{"version":3,"sources":["node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-languageserver-types/main.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/scanner.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/format.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/parser.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/edit.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/main.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/objects.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/jsonLanguageTypes.js","node_modules/monaco-editor/esm/vs/language/json/fillers/vscode-nls.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-uri/index.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/parser/jsonParser.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/json.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/strings.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonCompletion.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonHover.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonValidation.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/colors.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonDocumentSymbols.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/configuration.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonSchemaService.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonFolding.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/jsonLanguageService.js","node_modules/monaco-editor/esm/vs/language/json/jsonWorker.js","node_modules/monaco-editor/esm/vs/language/json/json.worker.js"],"names":["Position","create","line","character","is","value","candidate","Is","objectLiteral","number","Range","one","two","three","four","start","end","Error","Location","uri","range","defined","string","undefined","Color","red","green","blue","alpha","ColorInformation","color","ColorPresentation","label","textEdit","additionalTextEdits","TextEdit","typedArray","FoldingRangeKind","FoldingRange","startLine","endLine","startCharacter","endCharacter","kind","result","DiagnosticRelatedInformation","location","message","DiagnosticSeverity","Warning","Information","Hint","Diagnostic","severity","code","source","relatedInformation","Command","title","command","args","_i","arguments","length","replace","newText","insert","position","del","TextDocumentEdit","textDocument","edits","VersionedTextDocumentIdentifier","Array","isArray","WorkspaceEdit","changes","documentChanges","TextEditChangeImpl","prototype","push","delete","add","edit","all","clear","splice","WorkspaceChange","workspaceEdit","_this","_textEditChanges","Object","_workspaceEdit","forEach","textDocumentEdit","textEditChange","keys","key","defineProperty","get","enumerable","configurable","getTextEditChange","TextDocumentIdentifier","version","TextDocumentItem","languageId","text","MarkupKind","PlainText","Markdown","MarkupContent","CompletionItemKind","Text","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","File","Reference","Folder","EnumMember","Constant","Struct","Event","Operator","TypeParameter","InsertTextFormat","CompletionItem","CompletionList","items","isIncomplete","MarkedString","fromPlainText","plainText","language","Hover","contents","ParameterInformation","documentation","SignatureInformation","parameters","DocumentHighlightKind","Read","Write","DocumentHighlight","SymbolKind","Namespace","Package","String","Number","Boolean","Key","Null","SymbolInformation","name","containerName","DocumentSymbol","detail","selectionRange","children","deprecated","boolean","CodeActionKind","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","CodeActionContext","diagnostics","only","CodeAction","commandOrEdit","CodeLens","data","FormattingOptions","tabSize","insertSpaces","DocumentLink","target","EOL","TextDocument","content","FullTextDocument","lineCount","func","getText","positionAt","offsetAt","applyEdits","document","sortedEdits","mergeSort","a","b","diff","lastModifiedOffset","i","e","startOffset","endOffset","substring","compare","p","left","slice","right","leftIdx","rightIdx","ret","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","_uri","_languageId","_version","_content","_lineOffsets","update","event","getLineOffsets","lineOffsets","isLineStart","ch","charAt","offset","Math","max","min","low","high","mid","floor","lineOffset","nextLineOffset","toString","call","check","every","createScanner","ignoreTrivia","pos","len","tokenOffset","token","scanError","scanHexDigits","count","exact","digits","charCodeAt","setPosition","newPosition","scanNumber","isDigit","scanString","ch_1","fromCharCode","isLineBreak","scanNext","isWhiteSpace","commentClosed","isUnknownContentCharacter","scanNextNonTrivia","getPosition","scan","getToken","getTokenValue","getTokenOffset","getTokenLength","getTokenError","format","documentText","options","initialIndentLevel","formatText","formatTextStart","rangeStart","rangeEnd","isEOL","computeIndentLevel","eol","getEOL","lineBreak","indentLevel","indentValue","repeat","scanner","hasError","newLineAndIndent","editOperations","addEdit","firstToken","firstTokenStart","initialIndent","firstTokenEnd","secondToken","replaceContent","commentTokenStart","secondTokenStart","s","nChars","indexOf","getLocation","segments","earlyReturnException","previousNode","previousNodeInst","type","parent","isAtPropertyKey","setPreviousNode","colonOffset","visit","onObjectBegin","onObjectProperty","onObjectEnd","pop","onArrayBegin","onArrayEnd","onLiteralValue","getLiteralNodeType","onSeparator","sep","last","path","matches","pattern","k","parse","errors","currentProperty","currentParent","previousParents","onValue","visitor","object","array","onError","error","parseTree","ensurePropertyComplete","valueNode","findNodeAtLocation","root","node","path_1","segment","found","_a","_b","propertyNode","index","getNodePath","getNodeValue","map","obj","prop","contains","includeRightBound","findNodeAtOffset","item","_scanner","toNoArgVisit","visitFunction","toOneArgVisit","arg","onComment","disallowComments","allowTrailingComma","handleError","skipUntilAfter","skipUntil","parseString","isValue","parseLiteral","JSON","parseProperty","parseValue","parseObject","needsComma","parseArray","stripComments","replaceCh","parts","join","removeProperty","formattingOptions","setProperty","originalPath","getInsertionIndex","lastSegment","withFormatting","stringify","existing","propertyIndex","removeBegin","removeEnd","previous","next","newProperty","insertIndex","removalIndex","toRemove","parentEndOffset","applyEdit","begin","edit_1","editLength","isWS","parser","formatter","modify","equals","other","oneKeys","sort","otherKeys","ErrorCode","match","rest","localize","loadMessageBundle","file","config","opt","__extends","extendStatics","setPrototypeOf","__proto__","d","hasOwnProperty","__","constructor","isWindows","process","platform","navigator","userAgent","_schemePattern","_singleSlashStart","_doubleSlashStart","_validateUri","scheme","test","authority","_referenceResolution","_slash","_empty","_regexp","URI","schemeOrData","query","fragment","isUri","thing","_makeFsPath","with","change","_URI","exec","decodeURIComponent","idx","from","components","skipEncoding","_asFormatted","toJSON","revive","_fsPath","fsPath","_formatted","external","_super","apply","res","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","encodeURIComponent","substr","escaped","encodeURIComponentMinimal","toLowerCase","encoder","userinfo","nls","colorHexPattern","emailPattern","ASTNodeImpl","NullASTNodeImpl","BooleanASTNodeImpl","boolValue","ArrayASTNodeImpl","NumberASTNodeImpl","isInteger","NaN","StringASTNodeImpl","PropertyASTNodeImpl","keyNode","ObjectASTNodeImpl","properties","asSchema","schema","EnumMatch","SchemaCollector","focusOffset","exclude","schemas","merge","include","newSub","NoOpSchemaCollector","instance","ValidationResult","problems","propertiesMatches","propertiesValueMatches","primaryValueMatches","enumValueMatch","enumValues","hasProblems","mergeAll","validationResults","validationResult","concat","mergeEnumValues","EnumValueMismatch","v","mergePropertyMatch","propertyValidationResult","newJSONDocument","JSONDocument","Json","syntaxErrors","comments","getNodeFromOffset","doVisit_1","ctn","validate","getMatchingSchemas","matchingSchemas","_validateObjectNode","_validateArrayNode","_validateStringNode","_validateNumberNode","_validateNode","matchesType","some","errorMessage","allOf","subSchemaRef","notSchema","not","subValidationResult","subMatchingSchemas","ms","inverted","testAlternatives","alternatives","maxOneMatch","bestMatch","subSchema","compareResult","anyOf","oneOf","testBranch","testCondition","ifSchema","thenSchema","elseSchema","if","then","else","enum","val","objects","const","deprecationMessage","multipleOf","getExclusiveLimit","limit","exclusive","getLimit","exclusiveMinimum","minimum","exclusiveMaximum","maximum","minLength","maxLength","regex","RegExp","patternErrorMessage","Uri","subSchemas_1","itemValidationResult","additionalItems","itemSchema_1","containsSchema","doesContain","minItems","maxItems","uniqueItems","values_1","duplicates","lastIndexOf","seenKeys","unprocessedProperties","required","propertyName","propertyProcessed","propertySchema","child","patternProperties","propertyPattern","additionalProperties","maxProperties","minProperties","dependencies","propertyDep","requiredProp","propertyNames","f","lastProblemOffset","commentRanges","collectComments","_scanNext","token_1","_checkScanError","_accept","_errorAtRange","_error","_finalize","token_2","InvalidUnicode","InvalidEscapeCharacter","UnexpectedEndOfNumber","UnexpectedEndOfComment","UnexpectedEndOfString","InvalidCharacter","_parseArray","ValueExpected","commaOffset","TrailingComma","CommaExpected","_parseValue","CommaOrCloseBacketExpected","_parseProperty","keysSeen","_parseString","Undefined","seen","DuplicateKey","ColonExpected","_parseObject","PropertyExpected","property","CommaOrCloseBraceExpected","_parseNumber","tokenValue","numberValue","_parseLiteral","_root","stringifyObject","indent","stringifyLiteral","newIndent","startsWith","haystack","needle","endsWith","convertSimple2RegExpPattern","JSONCompletion","schemaService","contributions","promiseConstructor","templateVarIdCounter","promise","Promise","doResolve","resolveCompletion","resolver","resolve","doComplete","doc","isInComment","currentWord","getCurrentWord","overwriteRange","overwriteStart","proposed","collector","suggestion","insertText","setAsIncomplete","console","log","getNumberOfProposals","getSchemaForResource","collectionPromises","addValue","currentKey","separatorAfter_1","evaluateSeparatorAfter","getPropertyCompletions","getSchemaLessPropertyCompletions","location_1","Parser","contribution","collectPromise","collectPropertyCompletions","getLabelForValue","getInsertTextForProperty","insertTextFormat","types","getValueCompletions","getSchemaLessValueCompletions","getContributedValueCompletions","offsetForSeparator","separatorAfter","addFillerValueCompletions","schemaProperties_1","doNotSuggest","proposal","filterText","getFilterTextForValue","description","collectCompletionsForSimilarObject","getInsertTextForValue","parentKey_1","n","getSuggestionKind","collectSuggestionsForValues","getLabelTextForMatchingNode","getInsertTextForMatchingNode","addBooleanValueCompletion","parentKey_2","addDollarSchemaCompletions","parentKey_3","parentKey","addSchemaValueCompletions","valueNode_1","separatorAfter_2","findItemAtOffset","addNullValueCompletion","collectDefaultCompletions","parentKey_4","location_2","collectValueCompletions","addEnumValueCompletions","addDefaultValueCompletions","collectTypes","arrayDepth","hasProposals","isDefined","default","defaultSnippets","body","type_1","getInsertTextForSnippetValue","getFilterTextForSnippetValue","getLabelForSnippetValue","bodyText","prefix","suffix","split","enm","enumDescriptions","t","getInsertTextForGuessedValue","schemaIds","getRegisteredSchemaIds","schemaId","trim","getInsertTextForPlainText","replacer","snippetValue","propertyText","resultText","nValueProposals","JSONHover","doHover","hoverRangeNode","hoverRange","createHover","getInfoContribution","htmlContent","title_1","markdownDescription_1","markdownEnumValueDescription_1","enumValue_1","markdownDescription","toMarkdown","markdownEnumDescriptions","plain","JSONValidation","jsonSchemaService","validationEnabled","configure","raw","commentSeverity","allowComments","doValidation","jsonDocument","documentSettings","added","addProblem","problem","signature","getDiagnostics","trailingCommaSeverity","toDiagnosticSeverity","trailingCommas","astRoot","SchemaResolveError","semanticErrors","schemaAllowsComments","message_1","c","CommentNotPermitted","schemaRef","severityLevel","Digit0","Digit9","A","hexDigit","charCode","colorFromHex","colorFrom256RGB","JSONDocumentSymbols","findDocumentSymbols","resourceString","Strings","result_1","getRange","collectOutlineEntries","childContainerName","getSymbolKind","findDocumentSymbols2","result_2","nodeType","getSymbolDetail","findDocumentColors","visitedNode","matchingSchemas_1","nodeId","getColorPresentations","red256","round","green256","blue256","toTwoDigitHex","r","schemaContributions","schemaAssociations","FilePatternAssociation","patternRegExp","addSchema","id","matchesPattern","fileName","getSchemas","SchemaHandle","service","url","unresolvedSchemaContent","unresolvedSchema","UnresolvedSchema","getUnresolvedSchema","loadSchema","getResolvedSchema","resolvedSchema","unresolved","resolveSchemaContent","clearSchema","ResolvedSchema","getSection","getSectionRecursive","shift","parseInt","isNaN","JSONSchemaService","requestService","contextService","callOnDispose","contributionSchemas","contributionAssociations","schemasById","filePatternAssociations","filePatternAssociationById","registeredSchemasIds","filter","dispose","onResourceChange","normalizeId","schemaFile","setSchemaContributions","normalizedId","addSchemaHandle","associations","fpa","getOrAddFilePatternAssociation","schemaHandle","getOrAddSchemaHandle","registerExternalSchema","filePatterns","clearExternalSchemas","toDisplayString","schemaContent","jsonErrors","schemaToResolve","schemaURL","resolveErrors","findSection","current","part","sourceRoot","sourceURI","section","resolveExternalLink","linkPath","parentSchemaURL","resolveRelativePath","loc","resolveRefs","parentSchema","toWalk","openPromises","collectEntries","entries","entries_1","entry","collectMapEntries","maps","maps_1","collectArrayEntries","arrays","arrays_1","array_1","handleRef","$ref","definitions","_","resource","schemaProperties","schemeId","_c","createCombinedSchema","combinedSchemaId","combinedSchema","getFoldingRanges","context","ranges","nestingLevels","stack","prevStart","addRange","Comment","m","Region","rangeLimit","counts","nestingLevels_1","level","maxLevel","getLanguageService","params","schemaRequestService","workspaceContext","jsonCompletion","jsonHover","jsonDocumentSymbols","jsonValidation","settings","fileMatch","resetSchema","bind","parseJSONDocument","findColorSymbols","o","monaco","defaultSchemaRequestService","fetch","response","PromiseAdapter","executor","wrapped","onfulfilled","onrejected","thenable","getWrapped","as","reject","wrapError","values","JSONWorker","ctx","createData","_ctx","_languageSettings","languageSettings","_languageService","jsonService","enableSchemaRequest","_getTextDocument","textEdits","symbols","stylesheet","colorSymbols","colorPresentations","provideFoldingRanges","models","getMirrorModels","models_1","model","ls","getValue","self","onmessage","worker","initialize"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"json.worker.1e65d052.map","sourceRoot":"..","sourcesContent":["/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\n/**\n * The Position namespace provides helper functions to work with\n * [Position](#Position) literals.\n */\nexport var Position;\n(function (Position) {\n    /**\n     * Creates a new Position literal from the given line and character.\n     * @param line The position's line.\n     * @param character The position's character.\n     */\n    function create(line, character) {\n        return { line: line, character: character };\n    }\n    Position.create = create;\n    /**\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\n    }\n    Position.is = is;\n})(Position || (Position = {}));\n/**\n * The Range namespace provides helper functions to work with\n * [Range](#Range) literals.\n */\nexport var Range;\n(function (Range) {\n    function create(one, two, three, four) {\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\n            return { start: Position.create(one, two), end: Position.create(three, four) };\n        }\n        else if (Position.is(one) && Position.is(two)) {\n            return { start: one, end: two };\n        }\n        else {\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\n        }\n    }\n    Range.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n    }\n    Range.is = is;\n})(Range || (Range = {}));\n/**\n * The Location namespace provides helper functions to work with\n * [Location](#Location) literals.\n */\nexport var Location;\n(function (Location) {\n    /**\n     * Creates a Location literal.\n     * @param uri The location's uri.\n     * @param range The location's range.\n     */\n    function create(uri, range) {\n        return { uri: uri, range: range };\n    }\n    Location.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n    }\n    Location.is = is;\n})(Location || (Location = {}));\n/**\n * The Color namespace provides helper functions to work with\n * [Color](#Color) literals.\n */\nexport var Color;\n(function (Color) {\n    /**\n     * Creates a new Color literal.\n     */\n    function create(red, green, blue, alpha) {\n        return {\n            red: red,\n            green: green,\n            blue: blue,\n            alpha: alpha,\n        };\n    }\n    Color.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.number(candidate.red)\n            && Is.number(candidate.green)\n            && Is.number(candidate.blue)\n            && Is.number(candidate.alpha);\n    }\n    Color.is = is;\n})(Color || (Color = {}));\n/**\n * The ColorInformation namespace provides helper functions to work with\n * [ColorInformation](#ColorInformation) literals.\n */\nexport var ColorInformation;\n(function (ColorInformation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(range, color) {\n        return {\n            range: range,\n            color: color,\n        };\n    }\n    ColorInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Range.is(candidate.range) && Color.is(candidate.color);\n    }\n    ColorInformation.is = is;\n})(ColorInformation || (ColorInformation = {}));\n/**\n * The Color namespace provides helper functions to work with\n * [ColorPresentation](#ColorPresentation) literals.\n */\nexport var ColorPresentation;\n(function (ColorPresentation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(label, textEdit, additionalTextEdits) {\n        return {\n            label: label,\n            textEdit: textEdit,\n            additionalTextEdits: additionalTextEdits,\n        };\n    }\n    ColorPresentation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate.label)\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n    }\n    ColorPresentation.is = is;\n})(ColorPresentation || (ColorPresentation = {}));\n/**\n * Enum of known range kinds\n */\nexport var FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind[\"Comment\"] = \"comment\";\n    /**\n     * Folding range for a imports or includes\n     */\n    FoldingRangeKind[\"Imports\"] = \"imports\";\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind[\"Region\"] = \"region\";\n})(FoldingRangeKind || (FoldingRangeKind = {}));\n/**\n * The folding range namespace provides helper functions to work with\n * [FoldingRange](#FoldingRange) literals.\n */\nexport var FoldingRange;\n(function (FoldingRange) {\n    /**\n     * Creates a new FoldingRange literal.\n     */\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\n        var result = {\n            startLine: startLine,\n            endLine: endLine\n        };\n        if (Is.defined(startCharacter)) {\n            result.startCharacter = startCharacter;\n        }\n        if (Is.defined(endCharacter)) {\n            result.endCharacter = endCharacter;\n        }\n        if (Is.defined(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    FoldingRange.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n    }\n    FoldingRange.is = is;\n})(FoldingRange || (FoldingRange = {}));\n/**\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\n */\nexport var DiagnosticRelatedInformation;\n(function (DiagnosticRelatedInformation) {\n    /**\n     * Creates a new DiagnosticRelatedInformation literal.\n     */\n    function create(location, message) {\n        return {\n            location: location,\n            message: message\n        };\n    }\n    DiagnosticRelatedInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n    }\n    DiagnosticRelatedInformation.is = is;\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\n/**\n * The diagnostic's severity.\n */\nexport var DiagnosticSeverity;\n(function (DiagnosticSeverity) {\n    /**\n     * Reports an error.\n     */\n    DiagnosticSeverity.Error = 1;\n    /**\n     * Reports a warning.\n     */\n    DiagnosticSeverity.Warning = 2;\n    /**\n     * Reports an information.\n     */\n    DiagnosticSeverity.Information = 3;\n    /**\n     * Reports a hint.\n     */\n    DiagnosticSeverity.Hint = 4;\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\n/**\n * The Diagnostic namespace provides helper functions to work with\n * [Diagnostic](#Diagnostic) literals.\n */\nexport var Diagnostic;\n(function (Diagnostic) {\n    /**\n     * Creates a new Diagnostic literal.\n     */\n    function create(range, message, severity, code, source, relatedInformation) {\n        var result = { range: range, message: message };\n        if (Is.defined(severity)) {\n            result.severity = severity;\n        }\n        if (Is.defined(code)) {\n            result.code = code;\n        }\n        if (Is.defined(source)) {\n            result.source = source;\n        }\n        if (Is.defined(relatedInformation)) {\n            result.relatedInformation = relatedInformation;\n        }\n        return result;\n    }\n    Diagnostic.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && Range.is(candidate.range)\n            && Is.string(candidate.message)\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n    }\n    Diagnostic.is = is;\n})(Diagnostic || (Diagnostic = {}));\n/**\n * The Command namespace provides helper functions to work with\n * [Command](#Command) literals.\n */\nexport var Command;\n(function (Command) {\n    /**\n     * Creates a new Command literal.\n     */\n    function create(title, command) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var result = { title: title, command: command };\n        if (Is.defined(args) && args.length > 0) {\n            result.arguments = args;\n        }\n        return result;\n    }\n    Command.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\n    }\n    Command.is = is;\n})(Command || (Command = {}));\n/**\n * The TextEdit namespace provides helper function to create replace,\n * insert and delete edits more easily.\n */\nexport var TextEdit;\n(function (TextEdit) {\n    /**\n     * Creates a replace text edit.\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     */\n    function replace(range, newText) {\n        return { range: range, newText: newText };\n    }\n    TextEdit.replace = replace;\n    /**\n     * Creates a insert text edit.\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     */\n    function insert(position, newText) {\n        return { range: { start: position, end: position }, newText: newText };\n    }\n    TextEdit.insert = insert;\n    /**\n     * Creates a delete text edit.\n     * @param range The range of text to be deleted.\n     */\n    function del(range) {\n        return { range: range, newText: '' };\n    }\n    TextEdit.del = del;\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate)\n            && Is.string(candidate.newText)\n            && Range.is(candidate.range);\n    }\n    TextEdit.is = is;\n})(TextEdit || (TextEdit = {}));\n/**\n * The TextDocumentEdit namespace provides helper function to create\n * an edit that manipulates a text document.\n */\nexport var TextDocumentEdit;\n(function (TextDocumentEdit) {\n    /**\n     * Creates a new `TextDocumentEdit`\n     */\n    function create(textDocument, edits) {\n        return { textDocument: textDocument, edits: edits };\n    }\n    TextDocumentEdit.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\n            && Array.isArray(candidate.edits);\n    }\n    TextDocumentEdit.is = is;\n})(TextDocumentEdit || (TextDocumentEdit = {}));\nexport var WorkspaceEdit;\n(function (WorkspaceEdit) {\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\n            (candidate.documentChanges === void 0 || Is.typedArray(candidate.documentChanges, TextDocumentEdit.is));\n    }\n    WorkspaceEdit.is = is;\n})(WorkspaceEdit || (WorkspaceEdit = {}));\nvar TextEditChangeImpl = /** @class */ (function () {\n    function TextEditChangeImpl(edits) {\n        this.edits = edits;\n    }\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\n        this.edits.push(TextEdit.insert(position, newText));\n    };\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\n        this.edits.push(TextEdit.replace(range, newText));\n    };\n    TextEditChangeImpl.prototype.delete = function (range) {\n        this.edits.push(TextEdit.del(range));\n    };\n    TextEditChangeImpl.prototype.add = function (edit) {\n        this.edits.push(edit);\n    };\n    TextEditChangeImpl.prototype.all = function () {\n        return this.edits;\n    };\n    TextEditChangeImpl.prototype.clear = function () {\n        this.edits.splice(0, this.edits.length);\n    };\n    return TextEditChangeImpl;\n}());\n/**\n * A workspace change helps constructing changes to a workspace.\n */\nvar WorkspaceChange = /** @class */ (function () {\n    function WorkspaceChange(workspaceEdit) {\n        var _this = this;\n        this._textEditChanges = Object.create(null);\n        if (workspaceEdit) {\n            this._workspaceEdit = workspaceEdit;\n            if (workspaceEdit.documentChanges) {\n                workspaceEdit.documentChanges.forEach(function (textDocumentEdit) {\n                    var textEditChange = new TextEditChangeImpl(textDocumentEdit.edits);\n                    _this._textEditChanges[textDocumentEdit.textDocument.uri] = textEditChange;\n                });\n            }\n            else if (workspaceEdit.changes) {\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                    _this._textEditChanges[key] = textEditChange;\n                });\n            }\n        }\n    }\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\n        /**\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\n         * use to be returned from a workspace edit operation like rename.\n         */\n        get: function () {\n            return this._workspaceEdit;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\n        if (VersionedTextDocumentIdentifier.is(key)) {\n            if (!this._workspaceEdit) {\n                this._workspaceEdit = {\n                    documentChanges: []\n                };\n            }\n            if (!this._workspaceEdit.documentChanges) {\n                throw new Error('Workspace edit is not configured for versioned document changes.');\n            }\n            var textDocument = key;\n            var result = this._textEditChanges[textDocument.uri];\n            if (!result) {\n                var edits = [];\n                var textDocumentEdit = {\n                    textDocument: textDocument,\n                    edits: edits\n                };\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[textDocument.uri] = result;\n            }\n            return result;\n        }\n        else {\n            if (!this._workspaceEdit) {\n                this._workspaceEdit = {\n                    changes: Object.create(null)\n                };\n            }\n            if (!this._workspaceEdit.changes) {\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\n            }\n            var result = this._textEditChanges[key];\n            if (!result) {\n                var edits = [];\n                this._workspaceEdit.changes[key] = edits;\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[key] = result;\n            }\n            return result;\n        }\n    };\n    return WorkspaceChange;\n}());\nexport { WorkspaceChange };\n/**\n * The TextDocumentIdentifier namespace provides helper functions to work with\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\n */\nexport var TextDocumentIdentifier;\n(function (TextDocumentIdentifier) {\n    /**\n     * Creates a new TextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     */\n    function create(uri) {\n        return { uri: uri };\n    }\n    TextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri);\n    }\n    TextDocumentIdentifier.is = is;\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\n/**\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\n */\nexport var VersionedTextDocumentIdentifier;\n(function (VersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new VersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param uri The document's text.\n     */\n    function create(uri, version) {\n        return { uri: uri, version: version };\n    }\n    VersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.number(candidate.version);\n    }\n    VersionedTextDocumentIdentifier.is = is;\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\n/**\n * The TextDocumentItem namespace provides helper functions to work with\n * [TextDocumentItem](#TextDocumentItem) literals.\n */\nexport var TextDocumentItem;\n(function (TextDocumentItem) {\n    /**\n     * Creates a new TextDocumentItem literal.\n     * @param uri The document's uri.\n     * @param languageId The document's language identifier.\n     * @param version The document's version number.\n     * @param text The document's text.\n     */\n    function create(uri, languageId, version, text) {\n        return { uri: uri, languageId: languageId, version: version, text: text };\n    }\n    TextDocumentItem.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\n    }\n    TextDocumentItem.is = is;\n})(TextDocumentItem || (TextDocumentItem = {}));\n/**\n * Describes the content type that a client supports in various\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n *\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\n * are reserved for internal usage.\n */\nexport var MarkupKind;\n(function (MarkupKind) {\n    /**\n     * Plain text is supported as a content format\n     */\n    MarkupKind.PlainText = 'plaintext';\n    /**\n     * Markdown is supported as a content format\n     */\n    MarkupKind.Markdown = 'markdown';\n})(MarkupKind || (MarkupKind = {}));\n(function (MarkupKind) {\n    /**\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n    }\n    MarkupKind.is = is;\n})(MarkupKind || (MarkupKind = {}));\nexport var MarkupContent;\n(function (MarkupContent) {\n    /**\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n    }\n    MarkupContent.is = is;\n})(MarkupContent || (MarkupContent = {}));\n/**\n * The kind of a completion entry.\n */\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind.Text = 1;\n    CompletionItemKind.Method = 2;\n    CompletionItemKind.Function = 3;\n    CompletionItemKind.Constructor = 4;\n    CompletionItemKind.Field = 5;\n    CompletionItemKind.Variable = 6;\n    CompletionItemKind.Class = 7;\n    CompletionItemKind.Interface = 8;\n    CompletionItemKind.Module = 9;\n    CompletionItemKind.Property = 10;\n    CompletionItemKind.Unit = 11;\n    CompletionItemKind.Value = 12;\n    CompletionItemKind.Enum = 13;\n    CompletionItemKind.Keyword = 14;\n    CompletionItemKind.Snippet = 15;\n    CompletionItemKind.Color = 16;\n    CompletionItemKind.File = 17;\n    CompletionItemKind.Reference = 18;\n    CompletionItemKind.Folder = 19;\n    CompletionItemKind.EnumMember = 20;\n    CompletionItemKind.Constant = 21;\n    CompletionItemKind.Struct = 22;\n    CompletionItemKind.Event = 23;\n    CompletionItemKind.Operator = 24;\n    CompletionItemKind.TypeParameter = 25;\n})(CompletionItemKind || (CompletionItemKind = {}));\n/**\n * Defines whether the insert text in a completion item should be interpreted as\n * plain text or a snippet.\n */\nexport var InsertTextFormat;\n(function (InsertTextFormat) {\n    /**\n     * The primary text to be inserted is treated as a plain string.\n     */\n    InsertTextFormat.PlainText = 1;\n    /**\n     * The primary text to be inserted is treated as a snippet.\n     *\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n     * the end of the snippet. Placeholders with equal identifiers are linked,\n     * that is typing in one will update others too.\n     *\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\n     */\n    InsertTextFormat.Snippet = 2;\n})(InsertTextFormat || (InsertTextFormat = {}));\n/**\n * The CompletionItem namespace provides functions to deal with\n * completion items.\n */\nexport var CompletionItem;\n(function (CompletionItem) {\n    /**\n     * Create a completion item and seed it with a label.\n     * @param label The completion item's label\n     */\n    function create(label) {\n        return { label: label };\n    }\n    CompletionItem.create = create;\n})(CompletionItem || (CompletionItem = {}));\n/**\n * The CompletionList namespace provides functions to deal with\n * completion lists.\n */\nexport var CompletionList;\n(function (CompletionList) {\n    /**\n     * Creates a new completion list.\n     *\n     * @param items The completion items.\n     * @param isIncomplete The list is not complete.\n     */\n    function create(items, isIncomplete) {\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\n    }\n    CompletionList.create = create;\n})(CompletionList || (CompletionList = {}));\nexport var MarkedString;\n(function (MarkedString) {\n    /**\n     * Creates a marked string from plain text.\n     *\n     * @param plainText The plain text.\n     */\n    function fromPlainText(plainText) {\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    MarkedString.fromPlainText = fromPlainText;\n    /**\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n    }\n    MarkedString.is = is;\n})(MarkedString || (MarkedString = {}));\nexport var Hover;\n(function (Hover) {\n    /**\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n            MarkedString.is(candidate.contents) ||\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\n    }\n    Hover.is = is;\n})(Hover || (Hover = {}));\n/**\n * The ParameterInformation namespace provides helper functions to work with\n * [ParameterInformation](#ParameterInformation) literals.\n */\nexport var ParameterInformation;\n(function (ParameterInformation) {\n    /**\n     * Creates a new parameter information literal.\n     *\n     * @param label A label string.\n     * @param documentation A doc string.\n     */\n    function create(label, documentation) {\n        return documentation ? { label: label, documentation: documentation } : { label: label };\n    }\n    ParameterInformation.create = create;\n    ;\n})(ParameterInformation || (ParameterInformation = {}));\n/**\n * The SignatureInformation namespace provides helper functions to work with\n * [SignatureInformation](#SignatureInformation) literals.\n */\nexport var SignatureInformation;\n(function (SignatureInformation) {\n    function create(label, documentation) {\n        var parameters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            parameters[_i - 2] = arguments[_i];\n        }\n        var result = { label: label };\n        if (Is.defined(documentation)) {\n            result.documentation = documentation;\n        }\n        if (Is.defined(parameters)) {\n            result.parameters = parameters;\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    SignatureInformation.create = create;\n})(SignatureInformation || (SignatureInformation = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrence.\n     */\n    DocumentHighlightKind.Text = 1;\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind.Read = 2;\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind.Write = 3;\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * DocumentHighlight namespace to provide helper functions to work with\n * [DocumentHighlight](#DocumentHighlight) literals.\n */\nexport var DocumentHighlight;\n(function (DocumentHighlight) {\n    /**\n     * Create a DocumentHighlight object.\n     * @param range The range the highlight applies to.\n     */\n    function create(range, kind) {\n        var result = { range: range };\n        if (Is.number(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    DocumentHighlight.create = create;\n})(DocumentHighlight || (DocumentHighlight = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind.File = 1;\n    SymbolKind.Module = 2;\n    SymbolKind.Namespace = 3;\n    SymbolKind.Package = 4;\n    SymbolKind.Class = 5;\n    SymbolKind.Method = 6;\n    SymbolKind.Property = 7;\n    SymbolKind.Field = 8;\n    SymbolKind.Constructor = 9;\n    SymbolKind.Enum = 10;\n    SymbolKind.Interface = 11;\n    SymbolKind.Function = 12;\n    SymbolKind.Variable = 13;\n    SymbolKind.Constant = 14;\n    SymbolKind.String = 15;\n    SymbolKind.Number = 16;\n    SymbolKind.Boolean = 17;\n    SymbolKind.Array = 18;\n    SymbolKind.Object = 19;\n    SymbolKind.Key = 20;\n    SymbolKind.Null = 21;\n    SymbolKind.EnumMember = 22;\n    SymbolKind.Struct = 23;\n    SymbolKind.Event = 24;\n    SymbolKind.Operator = 25;\n    SymbolKind.TypeParameter = 26;\n})(SymbolKind || (SymbolKind = {}));\nexport var SymbolInformation;\n(function (SymbolInformation) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the location of the symbol.\n     * @param uri The resource of the location of symbol, defaults to the current document.\n     * @param containerName The name of the symbol containing the symbol.\n     */\n    function create(name, kind, range, uri, containerName) {\n        var result = {\n            name: name,\n            kind: kind,\n            location: { uri: uri, range: range }\n        };\n        if (containerName) {\n            result.containerName = containerName;\n        }\n        return result;\n    }\n    SymbolInformation.create = create;\n})(SymbolInformation || (SymbolInformation = {}));\n/**\n * Represents programming constructs like variables, classes, interfaces etc.\n * that appear in a document. Document symbols can be hierarchical and they\n * have two ranges: one that encloses its definition and one that points to\n * its most interesting range, e.g. the range of an identifier.\n */\nvar DocumentSymbol = /** @class */ (function () {\n    function DocumentSymbol() {\n    }\n    return DocumentSymbol;\n}());\nexport { DocumentSymbol };\n(function (DocumentSymbol) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param detail The detail of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the symbol.\n     * @param selectionRange The selectionRange of the symbol.\n     * @param children Children of the symbol.\n     */\n    function create(name, detail, kind, range, selectionRange, children) {\n        var result = {\n            name: name,\n            detail: detail,\n            kind: kind,\n            range: range,\n            selectionRange: selectionRange\n        };\n        if (children !== void 0) {\n            result.children = children;\n        }\n        return result;\n    }\n    DocumentSymbol.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\n            (candidate.children === void 0 || Array.isArray(candidate.children));\n    }\n    DocumentSymbol.is = is;\n})(DocumentSymbol || (DocumentSymbol = {}));\n/**\n * A set of predefined code action kinds\n */\nexport var CodeActionKind;\n(function (CodeActionKind) {\n    /**\n     * Base kind for quickfix actions: 'quickfix'\n     */\n    CodeActionKind.QuickFix = 'quickfix';\n    /**\n     * Base kind for refactoring actions: 'refactor'\n     */\n    CodeActionKind.Refactor = 'refactor';\n    /**\n     * Base kind for refactoring extraction actions: 'refactor.extract'\n     *\n     * Example extract actions:\n     *\n     * - Extract method\n     * - Extract function\n     * - Extract variable\n     * - Extract interface from class\n     * - ...\n     */\n    CodeActionKind.RefactorExtract = 'refactor.extract';\n    /**\n     * Base kind for refactoring inline actions: 'refactor.inline'\n     *\n     * Example inline actions:\n     *\n     * - Inline function\n     * - Inline variable\n     * - Inline constant\n     * - ...\n     */\n    CodeActionKind.RefactorInline = 'refactor.inline';\n    /**\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n     *\n     * Example rewrite actions:\n     *\n     * - Convert JavaScript function to class\n     * - Add or remove parameter\n     * - Encapsulate field\n     * - Make method static\n     * - Move method to base class\n     * - ...\n     */\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n    /**\n     * Base kind for source actions: `source`\n     *\n     * Source code actions apply to the entire file.\n     */\n    CodeActionKind.Source = 'source';\n    /**\n     * Base kind for an organize imports source action: `source.organizeImports`\n     */\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n})(CodeActionKind || (CodeActionKind = {}));\n/**\n * The CodeActionContext namespace provides helper functions to work with\n * [CodeActionContext](#CodeActionContext) literals.\n */\nexport var CodeActionContext;\n(function (CodeActionContext) {\n    /**\n     * Creates a new CodeActionContext literal.\n     */\n    function create(diagnostics, only) {\n        var result = { diagnostics: diagnostics };\n        if (only !== void 0 && only !== null) {\n            result.only = only;\n        }\n        return result;\n    }\n    CodeActionContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\n    }\n    CodeActionContext.is = is;\n})(CodeActionContext || (CodeActionContext = {}));\nexport var CodeAction;\n(function (CodeAction) {\n    function create(title, commandOrEdit, kind) {\n        var result = { title: title };\n        if (Command.is(commandOrEdit)) {\n            result.command = commandOrEdit;\n        }\n        else {\n            result.edit = commandOrEdit;\n        }\n        if (kind !== void null) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    CodeAction.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.title) &&\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\n    }\n    CodeAction.is = is;\n})(CodeAction || (CodeAction = {}));\n/**\n * The CodeLens namespace provides helper functions to work with\n * [CodeLens](#CodeLens) literals.\n */\nexport var CodeLens;\n(function (CodeLens) {\n    /**\n     * Creates a new CodeLens literal.\n     */\n    function create(range, data) {\n        var result = { range: range };\n        if (Is.defined(data))\n            result.data = data;\n        return result;\n    }\n    CodeLens.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n    }\n    CodeLens.is = is;\n})(CodeLens || (CodeLens = {}));\n/**\n * The FormattingOptions namespace provides helper functions to work with\n * [FormattingOptions](#FormattingOptions) literals.\n */\nexport var FormattingOptions;\n(function (FormattingOptions) {\n    /**\n     * Creates a new FormattingOptions literal.\n     */\n    function create(tabSize, insertSpaces) {\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\n    }\n    FormattingOptions.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n    }\n    FormattingOptions.is = is;\n})(FormattingOptions || (FormattingOptions = {}));\n/**\n * A document link is a range in a text document that links to an internal or external resource, like another\n * text document or a web site.\n */\nvar DocumentLink = /** @class */ (function () {\n    function DocumentLink() {\n    }\n    return DocumentLink;\n}());\nexport { DocumentLink };\n/**\n * The DocumentLink namespace provides helper functions to work with\n * [DocumentLink](#DocumentLink) literals.\n */\n(function (DocumentLink) {\n    /**\n     * Creates a new DocumentLink literal.\n     */\n    function create(range, target, data) {\n        return { range: range, target: target, data: data };\n    }\n    DocumentLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n    }\n    DocumentLink.is = is;\n})(DocumentLink || (DocumentLink = {}));\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new ITextDocument literal from the given uri and content.\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n    }\n    TextDocument.is = is;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits, function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = text.length;\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\n            var e = sortedEdits[i];\n            var startOffset = document.offsetAt(e.range.start);\n            var endOffset = document.offsetAt(e.range.end);\n            if (endOffset <= lastModifiedOffset) {\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n            }\n            else {\n                throw new Error('Ovelapping edit');\n            }\n            lastModifiedOffset = startOffset;\n        }\n        return text;\n    }\n    TextDocument.applyEdits = applyEdits;\n    function mergeSort(data, compare) {\n        if (data.length <= 1) {\n            // sorted\n            return data;\n        }\n        var p = (data.length / 2) | 0;\n        var left = data.slice(0, p);\n        var right = data.slice(p);\n        mergeSort(left, compare);\n        mergeSort(right, compare);\n        var leftIdx = 0;\n        var rightIdx = 0;\n        var i = 0;\n        while (leftIdx < left.length && rightIdx < right.length) {\n            var ret = compare(left[leftIdx], right[rightIdx]);\n            if (ret <= 0) {\n                // smaller_equal -> take left to preserve order\n                data[i++] = left[leftIdx++];\n            }\n            else {\n                // greater -> take right\n                data[i++] = right[rightIdx++];\n            }\n        }\n        while (leftIdx < left.length) {\n            data[i++] = left[leftIdx++];\n        }\n        while (rightIdx < right.length) {\n            data[i++] = right[rightIdx++];\n        }\n        return data;\n    }\n})(TextDocument || (TextDocument = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nexport var TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason || (TextDocumentSaveReason = {}));\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = null;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (event, version) {\n        this._content = event.text;\n        this._version = version;\n        this._lineOffsets = null;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === null) {\n            var lineOffsets = [];\n            var text = this._content;\n            var isLineStart = true;\n            for (var i = 0; i < text.length; i++) {\n                if (isLineStart) {\n                    lineOffsets.push(i);\n                    isLineStart = false;\n                }\n                var ch = text.charAt(i);\n                isLineStart = (ch === '\\r' || ch === '\\n');\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                    i++;\n                }\n            }\n            if (isLineStart && text.length > 0) {\n                lineOffsets.push(text.length);\n            }\n            this._lineOffsets = lineOffsets;\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return Position.create(0, offset);\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return Position.create(line, offset - lineOffsets[line]);\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return FullTextDocument;\n}());\nvar Is;\n(function (Is) {\n    var toString = Object.prototype.toString;\n    function defined(value) {\n        return typeof value !== 'undefined';\n    }\n    Is.defined = defined;\n    function undefined(value) {\n        return typeof value === 'undefined';\n    }\n    Is.undefined = undefined;\n    function boolean(value) {\n        return value === true || value === false;\n    }\n    Is.boolean = boolean;\n    function string(value) {\n        return toString.call(value) === '[object String]';\n    }\n    Is.string = string;\n    function number(value) {\n        return toString.call(value) === '[object Number]';\n    }\n    Is.number = number;\n    function func(value) {\n        return toString.call(value) === '[object Function]';\n    }\n    Is.func = func;\n    function objectLiteral(value) {\n        // Strictly speaking class instances pass this check as well. Since the LSP\n        // doesn't use classes we ignore this for now. If we do we need to add something\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n        return value !== null && typeof value === 'object';\n    }\n    Is.objectLiteral = objectLiteral;\n    function typedArray(value, check) {\n        return Array.isArray(value) && value.every(check);\n    }\n    Is.typedArray = typedArray;\n})(Is || (Is = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport function createScanner(text, ignoreTrivia) {\n    if (ignoreTrivia === void 0) { ignoreTrivia = false; }\n    var pos = 0, len = text.length, value = '', tokenOffset = 0, token = 16 /* Unknown */, scanError = 0 /* None */;\n    function scanHexDigits(count, exact) {\n        var digits = 0;\n        var value = 0;\n        while (digits < count || !exact) {\n            var ch = text.charCodeAt(pos);\n            if (ch >= 48 /* _0 */ && ch <= 57 /* _9 */) {\n                value = value * 16 + ch - 48 /* _0 */;\n            }\n            else if (ch >= 65 /* A */ && ch <= 70 /* F */) {\n                value = value * 16 + ch - 65 /* A */ + 10;\n            }\n            else if (ch >= 97 /* a */ && ch <= 102 /* f */) {\n                value = value * 16 + ch - 97 /* a */ + 10;\n            }\n            else {\n                break;\n            }\n            pos++;\n            digits++;\n        }\n        if (digits < count) {\n            value = -1;\n        }\n        return value;\n    }\n    function setPosition(newPosition) {\n        pos = newPosition;\n        value = '';\n        tokenOffset = 0;\n        token = 16 /* Unknown */;\n        scanError = 0 /* None */;\n    }\n    function scanNumber() {\n        var start = pos;\n        if (text.charCodeAt(pos) === 48 /* _0 */) {\n            pos++;\n        }\n        else {\n            pos++;\n            while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n            }\n        }\n        if (pos < text.length && text.charCodeAt(pos) === 46 /* dot */) {\n            pos++;\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n                return text.substring(start, pos);\n            }\n        }\n        var end = pos;\n        if (pos < text.length && (text.charCodeAt(pos) === 69 /* E */ || text.charCodeAt(pos) === 101 /* e */)) {\n            pos++;\n            if (pos < text.length && text.charCodeAt(pos) === 43 /* plus */ || text.charCodeAt(pos) === 45 /* minus */) {\n                pos++;\n            }\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n                end = pos;\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n            }\n        }\n        return text.substring(start, end);\n    }\n    function scanString() {\n        var result = '', start = pos;\n        while (true) {\n            if (pos >= len) {\n                result += text.substring(start, pos);\n                scanError = 2 /* UnexpectedEndOfString */;\n                break;\n            }\n            var ch = text.charCodeAt(pos);\n            if (ch === 34 /* doubleQuote */) {\n                result += text.substring(start, pos);\n                pos++;\n                break;\n            }\n            if (ch === 92 /* backslash */) {\n                result += text.substring(start, pos);\n                pos++;\n                if (pos >= len) {\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                ch = text.charCodeAt(pos++);\n                switch (ch) {\n                    case 34 /* doubleQuote */:\n                        result += '\\\"';\n                        break;\n                    case 92 /* backslash */:\n                        result += '\\\\';\n                        break;\n                    case 47 /* slash */:\n                        result += '/';\n                        break;\n                    case 98 /* b */:\n                        result += '\\b';\n                        break;\n                    case 102 /* f */:\n                        result += '\\f';\n                        break;\n                    case 110 /* n */:\n                        result += '\\n';\n                        break;\n                    case 114 /* r */:\n                        result += '\\r';\n                        break;\n                    case 116 /* t */:\n                        result += '\\t';\n                        break;\n                    case 117 /* u */:\n                        var ch_1 = scanHexDigits(4, true);\n                        if (ch_1 >= 0) {\n                            result += String.fromCharCode(ch_1);\n                        }\n                        else {\n                            scanError = 4 /* InvalidUnicode */;\n                        }\n                        break;\n                    default:\n                        scanError = 5 /* InvalidEscapeCharacter */;\n                }\n                start = pos;\n                continue;\n            }\n            if (ch >= 0 && ch <= 0x1f) {\n                if (isLineBreak(ch)) {\n                    result += text.substring(start, pos);\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                else {\n                    scanError = 6 /* InvalidCharacter */;\n                    // mark as error but continue with string\n                }\n            }\n            pos++;\n        }\n        return result;\n    }\n    function scanNext() {\n        value = '';\n        scanError = 0 /* None */;\n        tokenOffset = pos;\n        if (pos >= len) {\n            // at the end\n            tokenOffset = len;\n            return token = 17 /* EOF */;\n        }\n        var code = text.charCodeAt(pos);\n        // trivia: whitespace\n        if (isWhiteSpace(code)) {\n            do {\n                pos++;\n                value += String.fromCharCode(code);\n                code = text.charCodeAt(pos);\n            } while (isWhiteSpace(code));\n            return token = 15 /* Trivia */;\n        }\n        // trivia: newlines\n        if (isLineBreak(code)) {\n            pos++;\n            value += String.fromCharCode(code);\n            if (code === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                pos++;\n                value += '\\n';\n            }\n            return token = 14 /* LineBreakTrivia */;\n        }\n        switch (code) {\n            // tokens: []{}:,\n            case 123 /* openBrace */:\n                pos++;\n                return token = 1 /* OpenBraceToken */;\n            case 125 /* closeBrace */:\n                pos++;\n                return token = 2 /* CloseBraceToken */;\n            case 91 /* openBracket */:\n                pos++;\n                return token = 3 /* OpenBracketToken */;\n            case 93 /* closeBracket */:\n                pos++;\n                return token = 4 /* CloseBracketToken */;\n            case 58 /* colon */:\n                pos++;\n                return token = 6 /* ColonToken */;\n            case 44 /* comma */:\n                pos++;\n                return token = 5 /* CommaToken */;\n            // strings\n            case 34 /* doubleQuote */:\n                pos++;\n                value = scanString();\n                return token = 10 /* StringLiteral */;\n            // comments\n            case 47 /* slash */:\n                var start = pos - 1;\n                // Single-line comment\n                if (text.charCodeAt(pos + 1) === 47 /* slash */) {\n                    pos += 2;\n                    while (pos < len) {\n                        if (isLineBreak(text.charCodeAt(pos))) {\n                            break;\n                        }\n                        pos++;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 12 /* LineCommentTrivia */;\n                }\n                // Multi-line comment\n                if (text.charCodeAt(pos + 1) === 42 /* asterisk */) {\n                    pos += 2;\n                    var commentClosed = false;\n                    while (pos < len) {\n                        var ch = text.charCodeAt(pos);\n                        if (ch === 42 /* asterisk */ && (pos + 1 < len) && text.charCodeAt(pos + 1) === 47 /* slash */) {\n                            pos += 2;\n                            commentClosed = true;\n                            break;\n                        }\n                        pos++;\n                    }\n                    if (!commentClosed) {\n                        pos++;\n                        scanError = 1 /* UnexpectedEndOfComment */;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 13 /* BlockCommentTrivia */;\n                }\n                // just a single slash\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n            // numbers\n            case 45 /* minus */:\n                value += String.fromCharCode(code);\n                pos++;\n                if (pos === len || !isDigit(text.charCodeAt(pos))) {\n                    return token = 16 /* Unknown */;\n                }\n            // found a minus, followed by a number so\n            // we fall through to proceed with scanning\n            // numbers\n            case 48 /* _0 */:\n            case 49 /* _1 */:\n            case 50 /* _2 */:\n            case 51 /* _3 */:\n            case 52 /* _4 */:\n            case 53 /* _5 */:\n            case 54 /* _6 */:\n            case 55 /* _7 */:\n            case 56 /* _8 */:\n            case 57 /* _9 */:\n                value += scanNumber();\n                return token = 11 /* NumericLiteral */;\n            // literals and unknown symbols\n            default:\n                // is a literal? Read the full word.\n                while (pos < len && isUnknownContentCharacter(code)) {\n                    pos++;\n                    code = text.charCodeAt(pos);\n                }\n                if (tokenOffset !== pos) {\n                    value = text.substring(tokenOffset, pos);\n                    // keywords: true, false, null\n                    switch (value) {\n                        case 'true': return token = 8 /* TrueKeyword */;\n                        case 'false': return token = 9 /* FalseKeyword */;\n                        case 'null': return token = 7 /* NullKeyword */;\n                    }\n                    return token = 16 /* Unknown */;\n                }\n                // some\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n        }\n    }\n    function isUnknownContentCharacter(code) {\n        if (isWhiteSpace(code) || isLineBreak(code)) {\n            return false;\n        }\n        switch (code) {\n            case 125 /* closeBrace */:\n            case 93 /* closeBracket */:\n            case 123 /* openBrace */:\n            case 91 /* openBracket */:\n            case 34 /* doubleQuote */:\n            case 58 /* colon */:\n            case 44 /* comma */:\n            case 47 /* slash */:\n                return false;\n        }\n        return true;\n    }\n    function scanNextNonTrivia() {\n        var result;\n        do {\n            result = scanNext();\n        } while (result >= 12 /* LineCommentTrivia */ && result <= 15 /* Trivia */);\n        return result;\n    }\n    return {\n        setPosition: setPosition,\n        getPosition: function () { return pos; },\n        scan: ignoreTrivia ? scanNextNonTrivia : scanNext,\n        getToken: function () { return token; },\n        getTokenValue: function () { return value; },\n        getTokenOffset: function () { return tokenOffset; },\n        getTokenLength: function () { return pos - tokenOffset; },\n        getTokenError: function () { return scanError; }\n    };\n}\nfunction isWhiteSpace(ch) {\n    return ch === 32 /* space */ || ch === 9 /* tab */ || ch === 11 /* verticalTab */ || ch === 12 /* formFeed */ ||\n        ch === 160 /* nonBreakingSpace */ || ch === 5760 /* ogham */ || ch >= 8192 /* enQuad */ && ch <= 8203 /* zeroWidthSpace */ ||\n        ch === 8239 /* narrowNoBreakSpace */ || ch === 8287 /* mathematicalSpace */ || ch === 12288 /* ideographicSpace */ || ch === 65279 /* byteOrderMark */;\n}\nfunction isLineBreak(ch) {\n    return ch === 10 /* lineFeed */ || ch === 13 /* carriageReturn */ || ch === 8232 /* lineSeparator */ || ch === 8233 /* paragraphSeparator */;\n}\nfunction isDigit(ch) {\n    return ch >= 48 /* _0 */ && ch <= 57 /* _9 */;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner.js';\nexport function format(documentText, range, options) {\n    var initialIndentLevel;\n    var formatText;\n    var formatTextStart;\n    var rangeStart;\n    var rangeEnd;\n    if (range) {\n        rangeStart = range.offset;\n        rangeEnd = rangeStart + range.length;\n        formatTextStart = rangeStart;\n        while (formatTextStart > 0 && !isEOL(documentText, formatTextStart - 1)) {\n            formatTextStart--;\n        }\n        var endOffset = rangeEnd;\n        while (endOffset < documentText.length && !isEOL(documentText, endOffset)) {\n            endOffset++;\n        }\n        formatText = documentText.substring(formatTextStart, endOffset);\n        initialIndentLevel = computeIndentLevel(formatText, options);\n    }\n    else {\n        formatText = documentText;\n        initialIndentLevel = 0;\n        formatTextStart = 0;\n        rangeStart = 0;\n        rangeEnd = documentText.length;\n    }\n    var eol = getEOL(options, documentText);\n    var lineBreak = false;\n    var indentLevel = 0;\n    var indentValue;\n    if (options.insertSpaces) {\n        indentValue = repeat(' ', options.tabSize || 4);\n    }\n    else {\n        indentValue = '\\t';\n    }\n    var scanner = createScanner(formatText, false);\n    var hasError = false;\n    function newLineAndIndent() {\n        return eol + repeat(indentValue, initialIndentLevel + indentLevel);\n    }\n    function scanNext() {\n        var token = scanner.scan();\n        lineBreak = false;\n        while (token === 15 /* Trivia */ || token === 14 /* LineBreakTrivia */) {\n            lineBreak = lineBreak || (token === 14 /* LineBreakTrivia */);\n            token = scanner.scan();\n        }\n        hasError = token === 16 /* Unknown */ || scanner.getTokenError() !== 0 /* None */;\n        return token;\n    }\n    var editOperations = [];\n    function addEdit(text, startOffset, endOffset) {\n        if (!hasError && startOffset < rangeEnd && endOffset > rangeStart && documentText.substring(startOffset, endOffset) !== text) {\n            editOperations.push({ offset: startOffset, length: endOffset - startOffset, content: text });\n        }\n    }\n    var firstToken = scanNext();\n    if (firstToken !== 17 /* EOF */) {\n        var firstTokenStart = scanner.getTokenOffset() + formatTextStart;\n        var initialIndent = repeat(indentValue, initialIndentLevel);\n        addEdit(initialIndent, formatTextStart, firstTokenStart);\n    }\n    while (firstToken !== 17 /* EOF */) {\n        var firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n        var secondToken = scanNext();\n        var replaceContent = '';\n        while (!lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n            // comments on the same line: keep them on the same line, but ignore them otherwise\n            var commentTokenStart = scanner.getTokenOffset() + formatTextStart;\n            addEdit(' ', firstTokenEnd, commentTokenStart);\n            firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n            replaceContent = secondToken === 12 /* LineCommentTrivia */ ? newLineAndIndent() : '';\n            secondToken = scanNext();\n        }\n        if (secondToken === 2 /* CloseBraceToken */) {\n            if (firstToken !== 1 /* OpenBraceToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else if (secondToken === 4 /* CloseBracketToken */) {\n            if (firstToken !== 3 /* OpenBracketToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else {\n            switch (firstToken) {\n                case 3 /* OpenBracketToken */:\n                case 1 /* OpenBraceToken */:\n                    indentLevel++;\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 5 /* CommaToken */:\n                case 12 /* LineCommentTrivia */:\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 13 /* BlockCommentTrivia */:\n                    if (lineBreak) {\n                        replaceContent = newLineAndIndent();\n                    }\n                    else {\n                        // symbol following comment on the same line: keep on same line, separate with ' '\n                        replaceContent = ' ';\n                    }\n                    break;\n                case 6 /* ColonToken */:\n                    replaceContent = ' ';\n                    break;\n                case 10 /* StringLiteral */:\n                    if (secondToken === 6 /* ColonToken */) {\n                        replaceContent = '';\n                        break;\n                    }\n                // fall through\n                case 7 /* NullKeyword */:\n                case 8 /* TrueKeyword */:\n                case 9 /* FalseKeyword */:\n                case 11 /* NumericLiteral */:\n                case 2 /* CloseBraceToken */:\n                case 4 /* CloseBracketToken */:\n                    if (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */) {\n                        replaceContent = ' ';\n                    }\n                    else if (secondToken !== 5 /* CommaToken */ && secondToken !== 17 /* EOF */) {\n                        hasError = true;\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    hasError = true;\n                    break;\n            }\n            if (lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n                replaceContent = newLineAndIndent();\n            }\n        }\n        var secondTokenStart = scanner.getTokenOffset() + formatTextStart;\n        addEdit(replaceContent, firstTokenEnd, secondTokenStart);\n        firstToken = secondToken;\n    }\n    return editOperations;\n}\nfunction repeat(s, count) {\n    var result = '';\n    for (var i = 0; i < count; i++) {\n        result += s;\n    }\n    return result;\n}\nfunction computeIndentLevel(content, options) {\n    var i = 0;\n    var nChars = 0;\n    var tabSize = options.tabSize || 4;\n    while (i < content.length) {\n        var ch = content.charAt(i);\n        if (ch === ' ') {\n            nChars++;\n        }\n        else if (ch === '\\t') {\n            nChars += tabSize;\n        }\n        else {\n            break;\n        }\n        i++;\n    }\n    return Math.floor(nChars / tabSize);\n}\nfunction getEOL(options, text) {\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\r') {\n            if (i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                return '\\r\\n';\n            }\n            return '\\r';\n        }\n        else if (ch === '\\n') {\n            return '\\n';\n        }\n    }\n    return (options && options.eol) || '\\n';\n}\nexport function isEOL(text, offset) {\n    return '\\r\\n'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner.js';\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport function getLocation(text, position) {\n    var segments = []; // strings or numbers\n    var earlyReturnException = new Object();\n    var previousNode = void 0;\n    var previousNodeInst = {\n        value: {},\n        offset: 0,\n        length: 0,\n        type: 'object',\n        parent: void 0\n    };\n    var isAtPropertyKey = false;\n    function setPreviousNode(value, offset, length, type) {\n        previousNodeInst.value = value;\n        previousNodeInst.offset = offset;\n        previousNodeInst.length = length;\n        previousNodeInst.type = type;\n        previousNodeInst.colonOffset = void 0;\n        previousNode = previousNodeInst;\n    }\n    try {\n        visit(text, {\n            onObjectBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = void 0;\n                isAtPropertyKey = position > offset;\n                segments.push(''); // push a placeholder (will be replaced)\n            },\n            onObjectProperty: function (name, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(name, offset, length, 'property');\n                segments[segments.length - 1] = name;\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onObjectEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = void 0;\n                segments.pop();\n            },\n            onArrayBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = void 0;\n                segments.push(0);\n            },\n            onArrayEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = void 0;\n                segments.pop();\n            },\n            onLiteralValue: function (value, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(value, offset, length, getLiteralNodeType(value));\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onSeparator: function (sep, offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                if (sep === ':' && previousNode && previousNode.type === 'property') {\n                    previousNode.colonOffset = offset;\n                    isAtPropertyKey = false;\n                    previousNode = void 0;\n                }\n                else if (sep === ',') {\n                    var last = segments[segments.length - 1];\n                    if (typeof last === 'number') {\n                        segments[segments.length - 1] = last + 1;\n                    }\n                    else {\n                        isAtPropertyKey = true;\n                        segments[segments.length - 1] = '';\n                    }\n                    previousNode = void 0;\n                }\n            }\n        });\n    }\n    catch (e) {\n        if (e !== earlyReturnException) {\n            throw e;\n        }\n    }\n    return {\n        path: segments,\n        previousNode: previousNode,\n        isAtPropertyKey: isAtPropertyKey,\n        matches: function (pattern) {\n            var k = 0;\n            for (var i = 0; k < pattern.length && i < segments.length; i++) {\n                if (pattern[k] === segments[i] || pattern[k] === '*') {\n                    k++;\n                }\n                else if (pattern[k] !== '**') {\n                    return false;\n                }\n            }\n            return k === pattern.length;\n        }\n    };\n}\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore always check the errors list to find out if the input was valid.\n */\nexport function parse(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    var currentProperty = null;\n    var currentParent = [];\n    var previousParents = [];\n    function onValue(value) {\n        if (Array.isArray(currentParent)) {\n            currentParent.push(value);\n        }\n        else if (currentProperty) {\n            currentParent[currentProperty] = value;\n        }\n    }\n    var visitor = {\n        onObjectBegin: function () {\n            var object = {};\n            onValue(object);\n            previousParents.push(currentParent);\n            currentParent = object;\n            currentProperty = null;\n        },\n        onObjectProperty: function (name) {\n            currentProperty = name;\n        },\n        onObjectEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onArrayBegin: function () {\n            var array = [];\n            onValue(array);\n            previousParents.push(currentParent);\n            currentParent = array;\n            currentProperty = null;\n        },\n        onArrayEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onLiteralValue: onValue,\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    return currentParent[0];\n}\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport function parseTree(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    var currentParent = { type: 'array', offset: -1, length: -1, children: [], parent: void 0 }; // artificial root\n    function ensurePropertyComplete(endOffset) {\n        if (currentParent.type === 'property') {\n            currentParent.length = endOffset - currentParent.offset;\n            currentParent = currentParent.parent;\n        }\n    }\n    function onValue(valueNode) {\n        currentParent.children.push(valueNode);\n        return valueNode;\n    }\n    var visitor = {\n        onObjectBegin: function (offset) {\n            currentParent = onValue({ type: 'object', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onObjectProperty: function (name, offset, length) {\n            currentParent = onValue({ type: 'property', offset: offset, length: -1, parent: currentParent, children: [] });\n            currentParent.children.push({ type: 'string', value: name, offset: offset, length: length, parent: currentParent });\n        },\n        onObjectEnd: function (offset, length) {\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onArrayBegin: function (offset, length) {\n            currentParent = onValue({ type: 'array', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onArrayEnd: function (offset, length) {\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onLiteralValue: function (value, offset, length) {\n            onValue({ type: getLiteralNodeType(value), offset: offset, length: length, parent: currentParent, value: value });\n            ensurePropertyComplete(offset + length);\n        },\n        onSeparator: function (sep, offset, length) {\n            if (currentParent.type === 'property') {\n                if (sep === ':') {\n                    currentParent.colonOffset = offset;\n                }\n                else if (sep === ',') {\n                    ensurePropertyComplete(offset);\n                }\n            }\n        },\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    var result = currentParent.children[0];\n    if (result) {\n        delete result.parent;\n    }\n    return result;\n}\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport function findNodeAtLocation(root, path) {\n    if (!root) {\n        return void 0;\n    }\n    var node = root;\n    for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var segment = path_1[_i];\n        if (typeof segment === 'string') {\n            if (node.type !== 'object' || !Array.isArray(node.children)) {\n                return void 0;\n            }\n            var found = false;\n            for (var _a = 0, _b = node.children; _a < _b.length; _a++) {\n                var propertyNode = _b[_a];\n                if (Array.isArray(propertyNode.children) && propertyNode.children[0].value === segment) {\n                    node = propertyNode.children[1];\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                return void 0;\n            }\n        }\n        else {\n            var index = segment;\n            if (node.type !== 'array' || index < 0 || !Array.isArray(node.children) || index >= node.children.length) {\n                return void 0;\n            }\n            node = node.children[index];\n        }\n    }\n    return node;\n}\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport function getNodePath(node) {\n    if (!node.parent || !node.parent.children) {\n        return [];\n    }\n    var path = getNodePath(node.parent);\n    if (node.parent.type === 'property') {\n        var key = node.parent.children[0].value;\n        path.push(key);\n    }\n    else if (node.parent.type === 'array') {\n        var index = node.parent.children.indexOf(node);\n        if (index !== -1) {\n            path.push(index);\n        }\n    }\n    return path;\n}\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport function getNodeValue(node) {\n    switch (node.type) {\n        case 'array':\n            return node.children.map(getNodeValue);\n        case 'object':\n            var obj = Object.create(null);\n            for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n                var prop = _a[_i];\n                var valueNode = prop.children[1];\n                if (valueNode) {\n                    obj[prop.children[0].value] = getNodeValue(valueNode);\n                }\n            }\n            return obj;\n        case 'null':\n        case 'string':\n        case 'number':\n        case 'boolean':\n            return node.value;\n        default:\n            return void 0;\n    }\n}\nexport function contains(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    return (offset >= node.offset && offset < (node.offset + node.length)) || includeRightBound && (offset === (node.offset + node.length));\n}\n/**\n * Finds the most inner node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport function findNodeAtOffset(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    if (contains(node, offset, includeRightBound)) {\n        var children = node.children;\n        if (Array.isArray(children)) {\n            for (var i = 0; i < children.length && children[i].offset <= offset; i++) {\n                var item = findNodeAtOffset(children[i], offset, includeRightBound);\n                if (item) {\n                    return item;\n                }\n            }\n        }\n        return node;\n    }\n    return void 0;\n}\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport function visit(text, visitor, options) {\n    var _scanner = createScanner(text, false);\n    function toNoArgVisit(visitFunction) {\n        return visitFunction ? function () { return visitFunction(_scanner.getTokenOffset(), _scanner.getTokenLength()); } : function () { return true; };\n    }\n    function toOneArgVisit(visitFunction) {\n        return visitFunction ? function (arg) { return visitFunction(arg, _scanner.getTokenOffset(), _scanner.getTokenLength()); } : function () { return true; };\n    }\n    var onObjectBegin = toNoArgVisit(visitor.onObjectBegin), onObjectProperty = toOneArgVisit(visitor.onObjectProperty), onObjectEnd = toNoArgVisit(visitor.onObjectEnd), onArrayBegin = toNoArgVisit(visitor.onArrayBegin), onArrayEnd = toNoArgVisit(visitor.onArrayEnd), onLiteralValue = toOneArgVisit(visitor.onLiteralValue), onSeparator = toOneArgVisit(visitor.onSeparator), onComment = toNoArgVisit(visitor.onComment), onError = toOneArgVisit(visitor.onError);\n    var disallowComments = options && options.disallowComments;\n    var allowTrailingComma = options && options.allowTrailingComma;\n    function scanNext() {\n        while (true) {\n            var token = _scanner.scan();\n            switch (_scanner.getTokenError()) {\n                case 4 /* InvalidUnicode */:\n                    handleError(14 /* InvalidUnicode */);\n                    break;\n                case 5 /* InvalidEscapeCharacter */:\n                    handleError(15 /* InvalidEscapeCharacter */);\n                    break;\n                case 3 /* UnexpectedEndOfNumber */:\n                    handleError(13 /* UnexpectedEndOfNumber */);\n                    break;\n                case 1 /* UnexpectedEndOfComment */:\n                    if (!disallowComments) {\n                        handleError(11 /* UnexpectedEndOfComment */);\n                    }\n                    break;\n                case 2 /* UnexpectedEndOfString */:\n                    handleError(12 /* UnexpectedEndOfString */);\n                    break;\n                case 6 /* InvalidCharacter */:\n                    handleError(16 /* InvalidCharacter */);\n                    break;\n            }\n            switch (token) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (disallowComments) {\n                        handleError(10 /* InvalidCommentToken */);\n                    }\n                    else {\n                        onComment();\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    handleError(1 /* InvalidSymbol */);\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token;\n            }\n        }\n    }\n    function handleError(error, skipUntilAfter, skipUntil) {\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        onError(error);\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token = _scanner.getToken();\n            while (token !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token) !== -1) {\n                    scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token) !== -1) {\n                    break;\n                }\n                token = scanNext();\n            }\n        }\n    }\n    function parseString(isValue) {\n        var value = _scanner.getTokenValue();\n        if (isValue) {\n            onLiteralValue(value);\n        }\n        else {\n            onObjectProperty(value);\n        }\n        scanNext();\n        return true;\n    }\n    function parseLiteral() {\n        switch (_scanner.getToken()) {\n            case 11 /* NumericLiteral */:\n                var value = 0;\n                try {\n                    value = JSON.parse(_scanner.getTokenValue());\n                    if (typeof value !== 'number') {\n                        handleError(2 /* InvalidNumberFormat */);\n                        value = 0;\n                    }\n                }\n                catch (e) {\n                    handleError(2 /* InvalidNumberFormat */);\n                }\n                onLiteralValue(value);\n                break;\n            case 7 /* NullKeyword */:\n                onLiteralValue(null);\n                break;\n            case 8 /* TrueKeyword */:\n                onLiteralValue(true);\n                break;\n            case 9 /* FalseKeyword */:\n                onLiteralValue(false);\n                break;\n            default:\n                return false;\n        }\n        scanNext();\n        return true;\n    }\n    function parseProperty() {\n        if (_scanner.getToken() !== 10 /* StringLiteral */) {\n            handleError(3 /* PropertyNameExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            return false;\n        }\n        parseString(false);\n        if (_scanner.getToken() === 6 /* ColonToken */) {\n            onSeparator(':');\n            scanNext(); // consume colon\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n        }\n        else {\n            handleError(5 /* ColonExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        return true;\n    }\n    function parseObject() {\n        onObjectBegin();\n        scanNext(); // consume open brace\n        var needsComma = false;\n        while (_scanner.getToken() !== 2 /* CloseBraceToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 2 /* CloseBraceToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseProperty()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onObjectEnd();\n        if (_scanner.getToken() !== 2 /* CloseBraceToken */) {\n            handleError(7 /* CloseBraceExpected */, [2 /* CloseBraceToken */], []);\n        }\n        else {\n            scanNext(); // consume close brace\n        }\n        return true;\n    }\n    function parseArray() {\n        onArrayBegin();\n        scanNext(); // consume open bracket\n        var needsComma = false;\n        while (_scanner.getToken() !== 4 /* CloseBracketToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 4 /* CloseBracketToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onArrayEnd();\n        if (_scanner.getToken() !== 4 /* CloseBracketToken */) {\n            handleError(8 /* CloseBracketExpected */, [4 /* CloseBracketToken */], []);\n        }\n        else {\n            scanNext(); // consume close bracket\n        }\n        return true;\n    }\n    function parseValue() {\n        switch (_scanner.getToken()) {\n            case 3 /* OpenBracketToken */:\n                return parseArray();\n            case 1 /* OpenBraceToken */:\n                return parseObject();\n            case 10 /* StringLiteral */:\n                return parseString(true);\n            default:\n                return parseLiteral();\n        }\n    }\n    scanNext();\n    if (_scanner.getToken() === 17 /* EOF */) {\n        return true;\n    }\n    if (!parseValue()) {\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (_scanner.getToken() !== 17 /* EOF */) {\n        handleError(9 /* EndOfFileExpected */, [], []);\n    }\n    return true;\n}\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport function stripComments(text, replaceCh) {\n    var _scanner = createScanner(text), parts = [], kind, offset = 0, pos;\n    do {\n        pos = _scanner.getPosition();\n        kind = _scanner.scan();\n        switch (kind) {\n            case 12 /* LineCommentTrivia */:\n            case 13 /* BlockCommentTrivia */:\n            case 17 /* EOF */:\n                if (offset !== pos) {\n                    parts.push(text.substring(offset, pos));\n                }\n                if (replaceCh !== void 0) {\n                    parts.push(_scanner.getTokenValue().replace(/[^\\r\\n]/g, replaceCh));\n                }\n                offset = _scanner.getPosition();\n                break;\n        }\n    } while (kind !== 17 /* EOF */);\n    return parts.join('');\n}\nfunction getLiteralNodeType(value) {\n    switch (typeof value) {\n        case 'boolean': return 'boolean';\n        case 'number': return 'number';\n        case 'string': return 'string';\n        default: return 'null';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { format, isEOL } from './format.js';\nimport { parseTree, findNodeAtLocation } from './parser.js';\nexport function removeProperty(text, path, formattingOptions) {\n    return setProperty(text, path, void 0, formattingOptions);\n}\nexport function setProperty(text, originalPath, value, formattingOptions, getInsertionIndex) {\n    var path = originalPath.slice();\n    var errors = [];\n    var root = parseTree(text, errors);\n    var parent = void 0;\n    var lastSegment = void 0;\n    while (path.length > 0) {\n        lastSegment = path.pop();\n        parent = findNodeAtLocation(root, path);\n        if (parent === void 0 && value !== void 0) {\n            if (typeof lastSegment === 'string') {\n                value = (_a = {}, _a[lastSegment] = value, _a);\n            }\n            else {\n                value = [value];\n            }\n        }\n        else {\n            break;\n        }\n    }\n    if (!parent) {\n        // empty document\n        if (value === void 0) { // delete\n            throw new Error('Can not delete in empty document');\n        }\n        return withFormatting(text, { offset: root ? root.offset : 0, length: root ? root.length : 0, content: JSON.stringify(value) }, formattingOptions);\n    }\n    else if (parent.type === 'object' && typeof lastSegment === 'string' && Array.isArray(parent.children)) {\n        var existing = findNodeAtLocation(parent, [lastSegment]);\n        if (existing !== void 0) {\n            if (value === void 0) { // delete\n                if (!existing.parent) {\n                    throw new Error('Malformed AST');\n                }\n                var propertyIndex = parent.children.indexOf(existing.parent);\n                var removeBegin = void 0;\n                var removeEnd = existing.parent.offset + existing.parent.length;\n                if (propertyIndex > 0) {\n                    // remove the comma of the previous node\n                    var previous = parent.children[propertyIndex - 1];\n                    removeBegin = previous.offset + previous.length;\n                }\n                else {\n                    removeBegin = parent.offset + 1;\n                    if (parent.children.length > 1) {\n                        // remove the comma of the next node\n                        var next = parent.children[1];\n                        removeEnd = next.offset;\n                    }\n                }\n                return withFormatting(text, { offset: removeBegin, length: removeEnd - removeBegin, content: '' }, formattingOptions);\n            }\n            else {\n                // set value of existing property\n                return withFormatting(text, { offset: existing.offset, length: existing.length, content: JSON.stringify(value) }, formattingOptions);\n            }\n        }\n        else {\n            if (value === void 0) { // delete\n                return []; // property does not exist, nothing to do\n            }\n            var newProperty = JSON.stringify(lastSegment) + \": \" + JSON.stringify(value);\n            var index = getInsertionIndex ? getInsertionIndex(parent.children.map(function (p) { return p.children[0].value; })) : parent.children.length;\n            var edit = void 0;\n            if (index > 0) {\n                var previous = parent.children[index - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            else if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty + ',' };\n            }\n            return withFormatting(text, edit, formattingOptions);\n        }\n    }\n    else if (parent.type === 'array' && typeof lastSegment === 'number' && Array.isArray(parent.children)) {\n        var insertIndex = lastSegment;\n        if (insertIndex === -1) {\n            // Insert\n            var newProperty = \"\" + JSON.stringify(value);\n            var edit = void 0;\n            if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                var previous = parent.children[parent.children.length - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            return withFormatting(text, edit, formattingOptions);\n        }\n        else {\n            if (value === void 0 && parent.children.length >= 0) {\n                //Removal\n                var removalIndex = lastSegment;\n                var toRemove = parent.children[removalIndex];\n                var edit = void 0;\n                if (parent.children.length === 1) {\n                    // only item\n                    edit = { offset: parent.offset + 1, length: parent.length - 2, content: '' };\n                }\n                else if (parent.children.length - 1 === removalIndex) {\n                    // last item\n                    var previous = parent.children[removalIndex - 1];\n                    var offset = previous.offset + previous.length;\n                    var parentEndOffset = parent.offset + parent.length;\n                    edit = { offset: offset, length: parentEndOffset - 2 - offset, content: '' };\n                }\n                else {\n                    edit = { offset: toRemove.offset, length: parent.children[removalIndex + 1].offset - toRemove.offset, content: '' };\n                }\n                return withFormatting(text, edit, formattingOptions);\n            }\n            else {\n                throw new Error('Array modification not supported yet');\n            }\n        }\n    }\n    else {\n        throw new Error(\"Can not add \" + (typeof lastSegment !== 'number' ? 'index' : 'property') + \" to parent of type \" + parent.type);\n    }\n    var _a;\n}\nfunction withFormatting(text, edit, formattingOptions) {\n    // apply the edit\n    var newText = applyEdit(text, edit);\n    // format the new text\n    var begin = edit.offset;\n    var end = edit.offset + edit.content.length;\n    if (edit.length === 0 || edit.content.length === 0) { // insert or remove\n        while (begin > 0 && !isEOL(newText, begin - 1)) {\n            begin--;\n        }\n        while (end < newText.length && !isEOL(newText, end)) {\n            end++;\n        }\n    }\n    var edits = format(newText, { offset: begin, length: end - begin }, formattingOptions);\n    // apply the formatting edits and track the begin and end offsets of the changes\n    for (var i = edits.length - 1; i >= 0; i--) {\n        var edit_1 = edits[i];\n        newText = applyEdit(newText, edit_1);\n        begin = Math.min(begin, edit_1.offset);\n        end = Math.max(end, edit_1.offset + edit_1.length);\n        end += edit_1.content.length - edit_1.length;\n    }\n    // create a single edit with all changes\n    var editLength = text.length - (newText.length - end) - begin;\n    return [{ offset: begin, length: editLength, content: newText.substring(begin, end) }];\n}\nexport function applyEdit(text, edit) {\n    return text.substring(0, edit.offset) + edit.content + text.substring(edit.offset + edit.length);\n}\nexport function isWS(text, offset) {\n    return '\\r\\n \\t'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as formatter from './impl/format.js';\nimport * as edit from './impl/edit.js';\nimport * as scanner from './impl/scanner.js';\nimport * as parser from './impl/parser.js';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport var createScanner = scanner.createScanner;\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport var getLocation = parser.getLocation;\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore always check the errors list to find out if the input was valid.\n */\nexport var parse = parser.parse;\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport var parseTree = parser.parseTree;\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport var findNodeAtLocation = parser.findNodeAtLocation;\n/**\n * Finds the most inner node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport var findNodeAtOffset = parser.findNodeAtOffset;\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport var getNodePath = parser.getNodePath;\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport var getNodeValue = parser.getNodeValue;\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport var visit = parser.visit;\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport var stripComments = parser.stripComments;\n/**\n * Computes the edits needed to format a JSON document.\n *\n * @param documentText The input text\n * @param range The range to format or `undefined` to format the full content\n * @param options The formatting options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`\n */\nexport function format(documentText, range, options) {\n    return formatter.format(documentText, range, options);\n}\n/**\n * Computes the edits needed to modify a value in the JSON document.\n *\n * @param documentText The input text\n * @param path The path of the value to change. The path represents either to the document root, a property or an array item.\n * If the path points to an non-existing property or item, it will be created.\n * @param value The new value for the specified property or item. If the value is undefined,\n * the property or item will be removed.\n * @param options Options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`\n */\nexport function modify(text, path, value, options) {\n    return edit.setProperty(text, path, value, options.formattingOptions, options.getInsertionIndex);\n}\n/**\n * Applies edits to a input string.\n */\nexport function applyEdits(text, edits) {\n    for (var i = edits.length - 1; i >= 0; i--) {\n        text = edit.applyEdit(text, edits[i]);\n    }\n    return text;\n}\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n'use strict';\nexport function equals(one, other) {\n    if (one === other) {\n        return true;\n    }\n    if (one === null || one === undefined || other === null || other === undefined) {\n        return false;\n    }\n    if (typeof one !== typeof other) {\n        return false;\n    }\n    if (typeof one !== 'object') {\n        return false;\n    }\n    if ((Array.isArray(one)) !== (Array.isArray(other))) {\n        return false;\n    }\n    var i, key;\n    if (Array.isArray(one)) {\n        if (one.length !== other.length) {\n            return false;\n        }\n        for (i = 0; i < one.length; i++) {\n            if (!equals(one[i], other[i])) {\n                return false;\n            }\n        }\n    }\n    else {\n        var oneKeys = [];\n        for (key in one) {\n            oneKeys.push(key);\n        }\n        oneKeys.sort();\n        var otherKeys = [];\n        for (key in other) {\n            otherKeys.push(key);\n        }\n        otherKeys.sort();\n        if (!equals(oneKeys, otherKeys)) {\n            return false;\n        }\n        for (i = 0; i < oneKeys.length; i++) {\n            if (!equals(one[oneKeys[i]], other[oneKeys[i]])) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { Range, TextEdit, Color, ColorInformation, ColorPresentation, FoldingRange, FoldingRangeKind } from './../vscode-languageserver-types/main.js';\nexport { Range, TextEdit, Color, ColorInformation, ColorPresentation, FoldingRange, FoldingRangeKind };\n/**\n * Error codes used by diagnostics\n */\nexport var ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[ErrorCode[\"Undefined\"] = 0] = \"Undefined\";\n    ErrorCode[ErrorCode[\"EnumValueMismatch\"] = 1] = \"EnumValueMismatch\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfComment\"] = 257] = \"UnexpectedEndOfComment\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfString\"] = 258] = \"UnexpectedEndOfString\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfNumber\"] = 259] = \"UnexpectedEndOfNumber\";\n    ErrorCode[ErrorCode[\"InvalidUnicode\"] = 260] = \"InvalidUnicode\";\n    ErrorCode[ErrorCode[\"InvalidEscapeCharacter\"] = 261] = \"InvalidEscapeCharacter\";\n    ErrorCode[ErrorCode[\"InvalidCharacter\"] = 262] = \"InvalidCharacter\";\n    ErrorCode[ErrorCode[\"PropertyExpected\"] = 513] = \"PropertyExpected\";\n    ErrorCode[ErrorCode[\"CommaExpected\"] = 514] = \"CommaExpected\";\n    ErrorCode[ErrorCode[\"ColonExpected\"] = 515] = \"ColonExpected\";\n    ErrorCode[ErrorCode[\"ValueExpected\"] = 516] = \"ValueExpected\";\n    ErrorCode[ErrorCode[\"CommaOrCloseBacketExpected\"] = 517] = \"CommaOrCloseBacketExpected\";\n    ErrorCode[ErrorCode[\"CommaOrCloseBraceExpected\"] = 518] = \"CommaOrCloseBraceExpected\";\n    ErrorCode[ErrorCode[\"TrailingComma\"] = 519] = \"TrailingComma\";\n    ErrorCode[ErrorCode[\"DuplicateKey\"] = 520] = \"DuplicateKey\";\n    ErrorCode[ErrorCode[\"CommentNotPermitted\"] = 521] = \"CommentNotPermitted\";\n    ErrorCode[ErrorCode[\"SchemaResolveError\"] = 768] = \"SchemaResolveError\";\n})(ErrorCode || (ErrorCode = {}));\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nfunction format(message, args) {\r\n    var result;\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            return typeof args[index] !== 'undefined' ? args[index] : match;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nexport function loadMessageBundle(file) {\r\n    return localize;\r\n}\r\nexport function config(opt) {\r\n    return loadMessageBundle;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret) {\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component paths\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n *\n *\n */\nvar URI = (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment) {\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = schemeOrData || _empty;\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths and normalize windows drive letters to lower-case. Also\n         * uses the platform specific path separator. Will *not* validate the path for\n         * invalid characters and semantics. Will *not* look at the scheme of this URI.\n         */\n        get: function () {\n            return _makeFsPath(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === void 0) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === void 0) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === void 0) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === void 0) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === void 0) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    URI.parse = function (value) {\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty));\n    };\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // ---- printing/externalize ---------------------------\n    /**\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._fsPath = data.fsPath;\n            result._formatted = data.external;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport default URI;\n// tslint:disable-next-line:class-name\nvar _URI = (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = _makeFsPath(this);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n * @param uri\n */\nfunction _makeFsPath(uri) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        // windows drive letter: file:///c:/far/boo\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += encoder(fragment, false);\n    }\n    return res;\n}\nvar _a;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as Json from './../../jsonc-parser/main.js';\nimport * as objects from '../utils/objects.js';\nimport { ErrorCode } from '../jsonLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nimport Uri from './../../vscode-uri/index.js';\nimport { Diagnostic, DiagnosticSeverity, Range } from './../../vscode-languageserver-types/main.js';\nvar localize = nls.loadMessageBundle();\nvar colorHexPattern = /^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/;\nvar emailPattern = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\nvar ASTNodeImpl = /** @class */ (function () {\n    function ASTNodeImpl(parent, offset, length) {\n        this.offset = offset;\n        this.length = length;\n        this.parent = parent;\n    }\n    Object.defineProperty(ASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return [];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ASTNodeImpl.prototype.toString = function () {\n        return 'type: ' + this.type + ' (' + this.offset + '/' + this.length + ')' + (this.parent ? ' parent: {' + this.parent.toString() + '}' : '');\n    };\n    return ASTNodeImpl;\n}());\nexport { ASTNodeImpl };\nvar NullASTNodeImpl = /** @class */ (function (_super) {\n    __extends(NullASTNodeImpl, _super);\n    function NullASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'null';\n        _this.value = null;\n        return _this;\n    }\n    return NullASTNodeImpl;\n}(ASTNodeImpl));\nexport { NullASTNodeImpl };\nvar BooleanASTNodeImpl = /** @class */ (function (_super) {\n    __extends(BooleanASTNodeImpl, _super);\n    function BooleanASTNodeImpl(parent, boolValue, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'boolean';\n        _this.value = boolValue;\n        return _this;\n    }\n    return BooleanASTNodeImpl;\n}(ASTNodeImpl));\nexport { BooleanASTNodeImpl };\nvar ArrayASTNodeImpl = /** @class */ (function (_super) {\n    __extends(ArrayASTNodeImpl, _super);\n    function ArrayASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'array';\n        _this.items = [];\n        return _this;\n    }\n    Object.defineProperty(ArrayASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.items;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ArrayASTNodeImpl;\n}(ASTNodeImpl));\nexport { ArrayASTNodeImpl };\nvar NumberASTNodeImpl = /** @class */ (function (_super) {\n    __extends(NumberASTNodeImpl, _super);\n    function NumberASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'number';\n        _this.isInteger = true;\n        _this.value = Number.NaN;\n        return _this;\n    }\n    return NumberASTNodeImpl;\n}(ASTNodeImpl));\nexport { NumberASTNodeImpl };\nvar StringASTNodeImpl = /** @class */ (function (_super) {\n    __extends(StringASTNodeImpl, _super);\n    function StringASTNodeImpl(parent, offset, length) {\n        var _this = _super.call(this, parent, offset, length) || this;\n        _this.type = 'string';\n        _this.value = '';\n        return _this;\n    }\n    return StringASTNodeImpl;\n}(ASTNodeImpl));\nexport { StringASTNodeImpl };\nvar PropertyASTNodeImpl = /** @class */ (function (_super) {\n    __extends(PropertyASTNodeImpl, _super);\n    function PropertyASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'property';\n        _this.colonOffset = -1;\n        return _this;\n    }\n    Object.defineProperty(PropertyASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.valueNode ? [this.keyNode, this.valueNode] : [this.keyNode];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return PropertyASTNodeImpl;\n}(ASTNodeImpl));\nexport { PropertyASTNodeImpl };\nvar ObjectASTNodeImpl = /** @class */ (function (_super) {\n    __extends(ObjectASTNodeImpl, _super);\n    function ObjectASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'object';\n        _this.properties = [];\n        return _this;\n    }\n    Object.defineProperty(ObjectASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.properties;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ObjectASTNodeImpl;\n}(ASTNodeImpl));\nexport { ObjectASTNodeImpl };\nexport function asSchema(schema) {\n    if (typeof schema === 'boolean') {\n        return schema ? {} : { \"not\": {} };\n    }\n    return schema;\n}\nexport var EnumMatch;\n(function (EnumMatch) {\n    EnumMatch[EnumMatch[\"Key\"] = 0] = \"Key\";\n    EnumMatch[EnumMatch[\"Enum\"] = 1] = \"Enum\";\n})(EnumMatch || (EnumMatch = {}));\nvar SchemaCollector = /** @class */ (function () {\n    function SchemaCollector(focusOffset, exclude) {\n        if (focusOffset === void 0) { focusOffset = -1; }\n        if (exclude === void 0) { exclude = null; }\n        this.focusOffset = focusOffset;\n        this.exclude = exclude;\n        this.schemas = [];\n    }\n    SchemaCollector.prototype.add = function (schema) {\n        this.schemas.push(schema);\n    };\n    SchemaCollector.prototype.merge = function (other) {\n        var _a;\n        (_a = this.schemas).push.apply(_a, other.schemas);\n    };\n    SchemaCollector.prototype.include = function (node) {\n        return (this.focusOffset === -1 || contains(node, this.focusOffset)) && (node !== this.exclude);\n    };\n    SchemaCollector.prototype.newSub = function () {\n        return new SchemaCollector(-1, this.exclude);\n    };\n    return SchemaCollector;\n}());\nvar NoOpSchemaCollector = /** @class */ (function () {\n    function NoOpSchemaCollector() {\n    }\n    Object.defineProperty(NoOpSchemaCollector.prototype, \"schemas\", {\n        get: function () { return []; },\n        enumerable: true,\n        configurable: true\n    });\n    NoOpSchemaCollector.prototype.add = function (schema) { };\n    NoOpSchemaCollector.prototype.merge = function (other) { };\n    NoOpSchemaCollector.prototype.include = function (node) { return true; };\n    NoOpSchemaCollector.prototype.newSub = function () { return this; };\n    NoOpSchemaCollector.instance = new NoOpSchemaCollector();\n    return NoOpSchemaCollector;\n}());\nvar ValidationResult = /** @class */ (function () {\n    function ValidationResult() {\n        this.problems = [];\n        this.propertiesMatches = 0;\n        this.propertiesValueMatches = 0;\n        this.primaryValueMatches = 0;\n        this.enumValueMatch = false;\n        this.enumValues = null;\n    }\n    ValidationResult.prototype.hasProblems = function () {\n        return !!this.problems.length;\n    };\n    ValidationResult.prototype.mergeAll = function (validationResults) {\n        var _this = this;\n        validationResults.forEach(function (validationResult) {\n            _this.merge(validationResult);\n        });\n    };\n    ValidationResult.prototype.merge = function (validationResult) {\n        this.problems = this.problems.concat(validationResult.problems);\n    };\n    ValidationResult.prototype.mergeEnumValues = function (validationResult) {\n        if (!this.enumValueMatch && !validationResult.enumValueMatch && this.enumValues && validationResult.enumValues) {\n            this.enumValues = this.enumValues.concat(validationResult.enumValues);\n            for (var _i = 0, _a = this.problems; _i < _a.length; _i++) {\n                var error = _a[_i];\n                if (error.code === ErrorCode.EnumValueMismatch) {\n                    error.message = localize('enumWarning', 'Value is not accepted. Valid values: {0}.', this.enumValues.map(function (v) { return JSON.stringify(v); }).join(', '));\n                }\n            }\n        }\n    };\n    ValidationResult.prototype.mergePropertyMatch = function (propertyValidationResult) {\n        this.merge(propertyValidationResult);\n        this.propertiesMatches++;\n        if (propertyValidationResult.enumValueMatch || !propertyValidationResult.hasProblems() && propertyValidationResult.propertiesMatches) {\n            this.propertiesValueMatches++;\n        }\n        if (propertyValidationResult.enumValueMatch && propertyValidationResult.enumValues && propertyValidationResult.enumValues.length === 1) {\n            this.primaryValueMatches++;\n        }\n    };\n    ValidationResult.prototype.compare = function (other) {\n        var hasProblems = this.hasProblems();\n        if (hasProblems !== other.hasProblems()) {\n            return hasProblems ? -1 : 1;\n        }\n        if (this.enumValueMatch !== other.enumValueMatch) {\n            return other.enumValueMatch ? -1 : 1;\n        }\n        if (this.primaryValueMatches !== other.primaryValueMatches) {\n            return this.primaryValueMatches - other.primaryValueMatches;\n        }\n        if (this.propertiesValueMatches !== other.propertiesValueMatches) {\n            return this.propertiesValueMatches - other.propertiesValueMatches;\n        }\n        return this.propertiesMatches - other.propertiesMatches;\n    };\n    return ValidationResult;\n}());\nexport { ValidationResult };\nexport function newJSONDocument(root, diagnostics) {\n    if (diagnostics === void 0) { diagnostics = []; }\n    return new JSONDocument(root, diagnostics, []);\n}\nexport function getNodeValue(node) {\n    return Json.getNodeValue(node);\n}\nexport function getNodePath(node) {\n    return Json.getNodePath(node);\n}\nexport function contains(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    return offset >= node.offset && offset < (node.offset + node.length) || includeRightBound && offset === (node.offset + node.length);\n}\nvar JSONDocument = /** @class */ (function () {\n    function JSONDocument(root, syntaxErrors, comments) {\n        if (syntaxErrors === void 0) { syntaxErrors = []; }\n        if (comments === void 0) { comments = []; }\n        this.root = root;\n        this.syntaxErrors = syntaxErrors;\n        this.comments = comments;\n    }\n    JSONDocument.prototype.getNodeFromOffset = function (offset, includeRightBound) {\n        if (includeRightBound === void 0) { includeRightBound = false; }\n        if (this.root) {\n            return Json.findNodeAtOffset(this.root, offset, includeRightBound);\n        }\n        return void 0;\n    };\n    JSONDocument.prototype.visit = function (visitor) {\n        if (this.root) {\n            var doVisit_1 = function (node) {\n                var ctn = visitor(node);\n                var children = node.children;\n                if (Array.isArray(children)) {\n                    for (var i = 0; i < children.length && ctn; i++) {\n                        ctn = doVisit_1(children[i]);\n                    }\n                }\n                return ctn;\n            };\n            doVisit_1(this.root);\n        }\n    };\n    JSONDocument.prototype.validate = function (textDocument, schema) {\n        if (this.root && schema) {\n            var validationResult = new ValidationResult();\n            validate(this.root, schema, validationResult, NoOpSchemaCollector.instance);\n            return validationResult.problems.map(function (p) {\n                var range = Range.create(textDocument.positionAt(p.location.offset), textDocument.positionAt(p.location.offset + p.location.length));\n                return Diagnostic.create(range, p.message, p.severity, p.code);\n            });\n        }\n        return null;\n    };\n    JSONDocument.prototype.getMatchingSchemas = function (schema, focusOffset, exclude) {\n        if (focusOffset === void 0) { focusOffset = -1; }\n        if (exclude === void 0) { exclude = null; }\n        var matchingSchemas = new SchemaCollector(focusOffset, exclude);\n        if (this.root && schema) {\n            validate(this.root, schema, new ValidationResult(), matchingSchemas);\n        }\n        return matchingSchemas.schemas;\n    };\n    return JSONDocument;\n}());\nexport { JSONDocument };\nfunction validate(node, schema, validationResult, matchingSchemas) {\n    if (!node || !matchingSchemas.include(node)) {\n        return;\n    }\n    switch (node.type) {\n        case 'object':\n            _validateObjectNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'array':\n            _validateArrayNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'string':\n            _validateStringNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'number':\n            _validateNumberNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'property':\n            return validate(node.valueNode, schema, validationResult, matchingSchemas);\n    }\n    _validateNode();\n    matchingSchemas.add({ node: node, schema: schema });\n    function _validateNode() {\n        function matchesType(type) {\n            return node.type === type || (type === 'integer' && node.type === 'number' && node.isInteger);\n        }\n        if (Array.isArray(schema.type)) {\n            if (!schema.type.some(matchesType)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('typeArrayMismatchWarning', 'Incorrect type. Expected one of {0}.', schema.type.join(', '))\n                });\n            }\n        }\n        else if (schema.type) {\n            if (!matchesType(schema.type)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('typeMismatchWarning', 'Incorrect type. Expected \"{0}\".', schema.type)\n                });\n            }\n        }\n        if (Array.isArray(schema.allOf)) {\n            schema.allOf.forEach(function (subSchemaRef) {\n                validate(node, asSchema(subSchemaRef), validationResult, matchingSchemas);\n            });\n        }\n        var notSchema = asSchema(schema.not);\n        if (notSchema) {\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, notSchema, subValidationResult, subMatchingSchemas);\n            if (!subValidationResult.hasProblems()) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('notSchemaWarning', \"Matches a schema that is not allowed.\")\n                });\n            }\n            subMatchingSchemas.schemas.forEach(function (ms) {\n                ms.inverted = !ms.inverted;\n                matchingSchemas.add(ms);\n            });\n        }\n        var testAlternatives = function (alternatives, maxOneMatch) {\n            var matches = [];\n            // remember the best match that is used for error messages\n            var bestMatch = null;\n            alternatives.forEach(function (subSchemaRef) {\n                var subSchema = asSchema(subSchemaRef);\n                var subValidationResult = new ValidationResult();\n                var subMatchingSchemas = matchingSchemas.newSub();\n                validate(node, subSchema, subValidationResult, subMatchingSchemas);\n                if (!subValidationResult.hasProblems()) {\n                    matches.push(subSchema);\n                }\n                if (!bestMatch) {\n                    bestMatch = { schema: subSchema, validationResult: subValidationResult, matchingSchemas: subMatchingSchemas };\n                }\n                else {\n                    if (!maxOneMatch && !subValidationResult.hasProblems() && !bestMatch.validationResult.hasProblems()) {\n                        // no errors, both are equally good matches\n                        bestMatch.matchingSchemas.merge(subMatchingSchemas);\n                        bestMatch.validationResult.propertiesMatches += subValidationResult.propertiesMatches;\n                        bestMatch.validationResult.propertiesValueMatches += subValidationResult.propertiesValueMatches;\n                    }\n                    else {\n                        var compareResult = subValidationResult.compare(bestMatch.validationResult);\n                        if (compareResult > 0) {\n                            // our node is the best matching so far\n                            bestMatch = { schema: subSchema, validationResult: subValidationResult, matchingSchemas: subMatchingSchemas };\n                        }\n                        else if (compareResult === 0) {\n                            // there's already a best matching but we are as good\n                            bestMatch.matchingSchemas.merge(subMatchingSchemas);\n                            bestMatch.validationResult.mergeEnumValues(subValidationResult);\n                        }\n                    }\n                }\n            });\n            if (matches.length > 1 && maxOneMatch) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: 1 },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('oneOfWarning', \"Matches multiple schemas when only one must validate.\")\n                });\n            }\n            if (bestMatch !== null) {\n                validationResult.merge(bestMatch.validationResult);\n                validationResult.propertiesMatches += bestMatch.validationResult.propertiesMatches;\n                validationResult.propertiesValueMatches += bestMatch.validationResult.propertiesValueMatches;\n                matchingSchemas.merge(bestMatch.matchingSchemas);\n            }\n            return matches.length;\n        };\n        if (Array.isArray(schema.anyOf)) {\n            testAlternatives(schema.anyOf, false);\n        }\n        if (Array.isArray(schema.oneOf)) {\n            testAlternatives(schema.oneOf, true);\n        }\n        var testBranch = function (schema) {\n            var subSchema = asSchema(schema);\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, subSchema, subValidationResult, subMatchingSchemas);\n            validationResult.merge(subValidationResult);\n            validationResult.propertiesMatches += subValidationResult.propertiesMatches;\n            validationResult.propertiesValueMatches += subValidationResult.propertiesValueMatches;\n            matchingSchemas.merge(subMatchingSchemas);\n        };\n        var testCondition = function (ifSchema, thenSchema, elseSchema) {\n            var subSchema = asSchema(ifSchema);\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, subSchema, subValidationResult, subMatchingSchemas);\n            if (!subValidationResult.hasProblems()) {\n                if (thenSchema) {\n                    testBranch(thenSchema);\n                }\n            }\n            else if (elseSchema) {\n                testBranch(elseSchema);\n            }\n        };\n        if (schema.if) {\n            testCondition(schema.if, schema.then, schema.else);\n        }\n        if (Array.isArray(schema.enum)) {\n            var val = getNodeValue(node);\n            var enumValueMatch = false;\n            for (var _i = 0, _a = schema.enum; _i < _a.length; _i++) {\n                var e = _a[_i];\n                if (objects.equals(val, e)) {\n                    enumValueMatch = true;\n                    break;\n                }\n            }\n            validationResult.enumValues = schema.enum;\n            validationResult.enumValueMatch = enumValueMatch;\n            if (!enumValueMatch) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    code: ErrorCode.EnumValueMismatch,\n                    message: schema.errorMessage || localize('enumWarning', 'Value is not accepted. Valid values: {0}.', schema.enum.map(function (v) { return JSON.stringify(v); }).join(', '))\n                });\n            }\n        }\n        if (schema.const) {\n            var val = getNodeValue(node);\n            if (!objects.equals(val, schema.const)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    code: ErrorCode.EnumValueMismatch,\n                    message: schema.errorMessage || localize('constWarning', 'Value must be {0}.', JSON.stringify(schema.const))\n                });\n                validationResult.enumValueMatch = false;\n            }\n            else {\n                validationResult.enumValueMatch = true;\n            }\n            validationResult.enumValues = [schema.const];\n        }\n        if (schema.deprecationMessage && node.parent) {\n            validationResult.problems.push({\n                location: { offset: node.parent.offset, length: node.parent.length },\n                severity: DiagnosticSeverity.Warning,\n                message: schema.deprecationMessage\n            });\n        }\n    }\n    function _validateNumberNode(node, schema, validationResult, matchingSchemas) {\n        var val = node.value;\n        if (typeof schema.multipleOf === 'number') {\n            if (val % schema.multipleOf !== 0) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('multipleOfWarning', 'Value is not divisible by {0}.', schema.multipleOf)\n                });\n            }\n        }\n        function getExclusiveLimit(limit, exclusive) {\n            if (typeof exclusive === 'number') {\n                return exclusive;\n            }\n            if (typeof exclusive === 'boolean' && exclusive) {\n                return limit;\n            }\n            return void 0;\n        }\n        function getLimit(limit, exclusive) {\n            if (typeof exclusive !== 'boolean' || !exclusive) {\n                return limit;\n            }\n            return void 0;\n        }\n        var exclusiveMinimum = getExclusiveLimit(schema.minimum, schema.exclusiveMinimum);\n        if (typeof exclusiveMinimum === 'number' && val <= exclusiveMinimum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('exclusiveMinimumWarning', 'Value is below the exclusive minimum of {0}.', exclusiveMinimum)\n            });\n        }\n        var exclusiveMaximum = getExclusiveLimit(schema.maximum, schema.exclusiveMaximum);\n        if (typeof exclusiveMaximum === 'number' && val >= exclusiveMaximum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('exclusiveMaximumWarning', 'Value is above the exclusive maximum of {0}.', exclusiveMaximum)\n            });\n        }\n        var minimum = getLimit(schema.minimum, schema.exclusiveMinimum);\n        if (typeof minimum === 'number' && val < minimum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minimumWarning', 'Value is below the minimum of {0}.', minimum)\n            });\n        }\n        var maximum = getLimit(schema.maximum, schema.exclusiveMaximum);\n        if (typeof maximum === 'number' && val > maximum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maximumWarning', 'Value is above the maximum of {0}.', maximum)\n            });\n        }\n    }\n    function _validateStringNode(node, schema, validationResult, matchingSchemas) {\n        if (schema.minLength && node.value.length < schema.minLength) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minLengthWarning', 'String is shorter than the minimum length of {0}.', schema.minLength)\n            });\n        }\n        if (schema.maxLength && node.value.length > schema.maxLength) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maxLengthWarning', 'String is longer than the maximum length of {0}.', schema.maxLength)\n            });\n        }\n        if (schema.pattern) {\n            var regex = new RegExp(schema.pattern);\n            if (!regex.test(node.value)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.patternErrorMessage || schema.errorMessage || localize('patternWarning', 'String does not match the pattern of \"{0}\".', schema.pattern)\n                });\n            }\n        }\n        if (schema.format) {\n            switch (schema.format) {\n                case 'uri':\n                case 'uri-reference':\n                    {\n                        var errorMessage = void 0;\n                        if (!node.value) {\n                            errorMessage = localize('uriEmpty', 'URI expected.');\n                        }\n                        else {\n                            try {\n                                var uri = Uri.parse(node.value);\n                                if (!uri.scheme && schema.format === 'uri') {\n                                    errorMessage = localize('uriSchemeMissing', 'URI with a scheme is expected.');\n                                }\n                            }\n                            catch (e) {\n                                errorMessage = e.message;\n                            }\n                        }\n                        if (errorMessage) {\n                            validationResult.problems.push({\n                                location: { offset: node.offset, length: node.length },\n                                severity: DiagnosticSeverity.Warning,\n                                message: schema.patternErrorMessage || schema.errorMessage || localize('uriFormatWarning', 'String is not a URI: {0}', errorMessage)\n                            });\n                        }\n                    }\n                    break;\n                case 'email':\n                    {\n                        if (!node.value.match(emailPattern)) {\n                            validationResult.problems.push({\n                                location: { offset: node.offset, length: node.length },\n                                severity: DiagnosticSeverity.Warning,\n                                message: schema.patternErrorMessage || schema.errorMessage || localize('emailFormatWarning', 'String is not an e-mail address.')\n                            });\n                        }\n                    }\n                    break;\n                case 'color-hex':\n                    {\n                        if (!node.value.match(colorHexPattern)) {\n                            validationResult.problems.push({\n                                location: { offset: node.offset, length: node.length },\n                                severity: DiagnosticSeverity.Warning,\n                                message: schema.patternErrorMessage || schema.errorMessage || localize('colorHexFormatWarning', 'Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.')\n                            });\n                        }\n                    }\n                    break;\n                default:\n            }\n        }\n    }\n    function _validateArrayNode(node, schema, validationResult, matchingSchemas) {\n        if (Array.isArray(schema.items)) {\n            var subSchemas_1 = schema.items;\n            subSchemas_1.forEach(function (subSchemaRef, index) {\n                var subSchema = asSchema(subSchemaRef);\n                var itemValidationResult = new ValidationResult();\n                var item = node.items[index];\n                if (item) {\n                    validate(item, subSchema, itemValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(itemValidationResult);\n                }\n                else if (node.items.length >= subSchemas_1.length) {\n                    validationResult.propertiesValueMatches++;\n                }\n            });\n            if (node.items.length > subSchemas_1.length) {\n                if (typeof schema.additionalItems === 'object') {\n                    for (var i = subSchemas_1.length; i < node.items.length; i++) {\n                        var itemValidationResult = new ValidationResult();\n                        validate(node.items[i], schema.additionalItems, itemValidationResult, matchingSchemas);\n                        validationResult.mergePropertyMatch(itemValidationResult);\n                    }\n                }\n                else if (schema.additionalItems === false) {\n                    validationResult.problems.push({\n                        location: { offset: node.offset, length: node.length },\n                        severity: DiagnosticSeverity.Warning,\n                        message: localize('additionalItemsWarning', 'Array has too many items according to schema. Expected {0} or fewer.', subSchemas_1.length)\n                    });\n                }\n            }\n        }\n        else {\n            var itemSchema_1 = asSchema(schema.items);\n            if (itemSchema_1) {\n                node.items.forEach(function (item) {\n                    var itemValidationResult = new ValidationResult();\n                    validate(item, itemSchema_1, itemValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(itemValidationResult);\n                });\n            }\n        }\n        var containsSchema = asSchema(schema.contains);\n        if (containsSchema) {\n            var doesContain = node.items.some(function (item) {\n                var itemValidationResult = new ValidationResult();\n                validate(item, containsSchema, itemValidationResult, NoOpSchemaCollector.instance);\n                return !itemValidationResult.hasProblems();\n            });\n            if (!doesContain) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('requiredItemMissingWarning', 'Array does not contain required item.')\n                });\n            }\n        }\n        if (schema.minItems && node.items.length < schema.minItems) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minItemsWarning', 'Array has too few items. Expected {0} or more.', schema.minItems)\n            });\n        }\n        if (schema.maxItems && node.items.length > schema.maxItems) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maxItemsWarning', 'Array has too many items. Expected {0} or fewer.', schema.maxItems)\n            });\n        }\n        if (schema.uniqueItems === true) {\n            var values_1 = getNodeValue(node);\n            var duplicates = values_1.some(function (value, index) {\n                return index !== values_1.lastIndexOf(value);\n            });\n            if (duplicates) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('uniqueItemsWarning', 'Array has duplicate items.')\n                });\n            }\n        }\n    }\n    function _validateObjectNode(node, schema, validationResult, matchingSchemas) {\n        var seenKeys = Object.create(null);\n        var unprocessedProperties = [];\n        node.properties.forEach(function (node) {\n            var key = node.keyNode.value;\n            seenKeys[key] = node.valueNode;\n            unprocessedProperties.push(key);\n        });\n        if (Array.isArray(schema.required)) {\n            schema.required.forEach(function (propertyName) {\n                if (!seenKeys[propertyName]) {\n                    var keyNode = node.parent && node.parent.type === 'property' && node.parent.keyNode;\n                    var location = keyNode ? { offset: keyNode.offset, length: keyNode.length } : { offset: node.offset, length: 1 };\n                    validationResult.problems.push({\n                        location: location,\n                        severity: DiagnosticSeverity.Warning,\n                        message: localize('MissingRequiredPropWarning', 'Missing property \"{0}\".', propertyName)\n                    });\n                }\n            });\n        }\n        var propertyProcessed = function (prop) {\n            var index = unprocessedProperties.indexOf(prop);\n            while (index >= 0) {\n                unprocessedProperties.splice(index, 1);\n                index = unprocessedProperties.indexOf(prop);\n            }\n        };\n        if (schema.properties) {\n            Object.keys(schema.properties).forEach(function (propertyName) {\n                propertyProcessed(propertyName);\n                var propertySchema = schema.properties[propertyName];\n                var child = seenKeys[propertyName];\n                if (child) {\n                    if (typeof propertySchema === 'boolean') {\n                        if (!propertySchema) {\n                            var propertyNode = child.parent;\n                            validationResult.problems.push({\n                                location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                                severity: DiagnosticSeverity.Warning,\n                                message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                            });\n                        }\n                        else {\n                            validationResult.propertiesMatches++;\n                            validationResult.propertiesValueMatches++;\n                        }\n                    }\n                    else {\n                        var propertyValidationResult = new ValidationResult();\n                        validate(child, propertySchema, propertyValidationResult, matchingSchemas);\n                        validationResult.mergePropertyMatch(propertyValidationResult);\n                    }\n                }\n            });\n        }\n        if (schema.patternProperties) {\n            Object.keys(schema.patternProperties).forEach(function (propertyPattern) {\n                var regex = new RegExp(propertyPattern);\n                unprocessedProperties.slice(0).forEach(function (propertyName) {\n                    if (regex.test(propertyName)) {\n                        propertyProcessed(propertyName);\n                        var child = seenKeys[propertyName];\n                        if (child) {\n                            var propertySchema = schema.patternProperties[propertyPattern];\n                            if (typeof propertySchema === 'boolean') {\n                                if (!propertySchema) {\n                                    var propertyNode = child.parent;\n                                    validationResult.problems.push({\n                                        location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                                        severity: DiagnosticSeverity.Warning,\n                                        message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                                    });\n                                }\n                                else {\n                                    validationResult.propertiesMatches++;\n                                    validationResult.propertiesValueMatches++;\n                                }\n                            }\n                            else {\n                                var propertyValidationResult = new ValidationResult();\n                                validate(child, propertySchema, propertyValidationResult, matchingSchemas);\n                                validationResult.mergePropertyMatch(propertyValidationResult);\n                            }\n                        }\n                    }\n                });\n            });\n        }\n        if (typeof schema.additionalProperties === 'object') {\n            unprocessedProperties.forEach(function (propertyName) {\n                var child = seenKeys[propertyName];\n                if (child) {\n                    var propertyValidationResult = new ValidationResult();\n                    validate(child, schema.additionalProperties, propertyValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(propertyValidationResult);\n                }\n            });\n        }\n        else if (schema.additionalProperties === false) {\n            if (unprocessedProperties.length > 0) {\n                unprocessedProperties.forEach(function (propertyName) {\n                    var child = seenKeys[propertyName];\n                    if (child) {\n                        var propertyNode = child.parent;\n                        validationResult.problems.push({\n                            location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                            severity: DiagnosticSeverity.Warning,\n                            message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                        });\n                    }\n                });\n            }\n        }\n        if (schema.maxProperties) {\n            if (node.properties.length > schema.maxProperties) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('MaxPropWarning', 'Object has more properties than limit of {0}.', schema.maxProperties)\n                });\n            }\n        }\n        if (schema.minProperties) {\n            if (node.properties.length < schema.minProperties) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('MinPropWarning', 'Object has fewer properties than the required number of {0}', schema.minProperties)\n                });\n            }\n        }\n        if (schema.dependencies) {\n            Object.keys(schema.dependencies).forEach(function (key) {\n                var prop = seenKeys[key];\n                if (prop) {\n                    var propertyDep = schema.dependencies[key];\n                    if (Array.isArray(propertyDep)) {\n                        propertyDep.forEach(function (requiredProp) {\n                            if (!seenKeys[requiredProp]) {\n                                validationResult.problems.push({\n                                    location: { offset: node.offset, length: node.length },\n                                    severity: DiagnosticSeverity.Warning,\n                                    message: localize('RequiredDependentPropWarning', 'Object is missing property {0} required by property {1}.', requiredProp, key)\n                                });\n                            }\n                            else {\n                                validationResult.propertiesValueMatches++;\n                            }\n                        });\n                    }\n                    else {\n                        var propertySchema = asSchema(propertyDep);\n                        if (propertySchema) {\n                            var propertyValidationResult = new ValidationResult();\n                            validate(node, propertySchema, propertyValidationResult, matchingSchemas);\n                            validationResult.mergePropertyMatch(propertyValidationResult);\n                        }\n                    }\n                }\n            });\n        }\n        var propertyNames = asSchema(schema.propertyNames);\n        if (propertyNames) {\n            node.properties.forEach(function (f) {\n                var key = f.keyNode;\n                if (key) {\n                    validate(key, propertyNames, validationResult, NoOpSchemaCollector.instance);\n                }\n            });\n        }\n    }\n}\nexport function parse(textDocument, config) {\n    var problems = [];\n    var lastProblemOffset = -1;\n    var text = textDocument.getText();\n    var scanner = Json.createScanner(text, false);\n    var commentRanges = config && config.collectComments ? [] : void 0;\n    function _scanNext() {\n        while (true) {\n            var token_1 = scanner.scan();\n            _checkScanError();\n            switch (token_1) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (Array.isArray(commentRanges)) {\n                        commentRanges.push(Range.create(textDocument.positionAt(scanner.getTokenOffset()), textDocument.positionAt(scanner.getTokenOffset() + scanner.getTokenLength())));\n                    }\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token_1;\n            }\n        }\n    }\n    function _accept(token) {\n        if (scanner.getToken() === token) {\n            _scanNext();\n            return true;\n        }\n        return false;\n    }\n    function _errorAtRange(message, code, startOffset, endOffset, severity) {\n        if (severity === void 0) { severity = DiagnosticSeverity.Error; }\n        if (problems.length === 0 || startOffset !== lastProblemOffset) {\n            var range = Range.create(textDocument.positionAt(startOffset), textDocument.positionAt(endOffset));\n            problems.push(Diagnostic.create(range, message, severity, code, textDocument.languageId));\n            lastProblemOffset = startOffset;\n        }\n    }\n    function _error(message, code, node, skipUntilAfter, skipUntil) {\n        if (node === void 0) { node = null; }\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        var start = scanner.getTokenOffset();\n        var end = scanner.getTokenOffset() + scanner.getTokenLength();\n        if (start === end && start > 0) {\n            start--;\n            while (start > 0 && /\\s/.test(text.charAt(start))) {\n                start--;\n            }\n            end = start + 1;\n        }\n        _errorAtRange(message, code, start, end);\n        if (node) {\n            _finalize(node, false);\n        }\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token_2 = scanner.getToken();\n            while (token_2 !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token_2) !== -1) {\n                    _scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token_2) !== -1) {\n                    break;\n                }\n                token_2 = _scanNext();\n            }\n        }\n        return node;\n    }\n    function _checkScanError() {\n        switch (scanner.getTokenError()) {\n            case 4 /* InvalidUnicode */:\n                _error(localize('InvalidUnicode', 'Invalid unicode sequence in string.'), ErrorCode.InvalidUnicode);\n                return true;\n            case 5 /* InvalidEscapeCharacter */:\n                _error(localize('InvalidEscapeCharacter', 'Invalid escape character in string.'), ErrorCode.InvalidEscapeCharacter);\n                return true;\n            case 3 /* UnexpectedEndOfNumber */:\n                _error(localize('UnexpectedEndOfNumber', 'Unexpected end of number.'), ErrorCode.UnexpectedEndOfNumber);\n                return true;\n            case 1 /* UnexpectedEndOfComment */:\n                _error(localize('UnexpectedEndOfComment', 'Unexpected end of comment.'), ErrorCode.UnexpectedEndOfComment);\n                return true;\n            case 2 /* UnexpectedEndOfString */:\n                _error(localize('UnexpectedEndOfString', 'Unexpected end of string.'), ErrorCode.UnexpectedEndOfString);\n                return true;\n            case 6 /* InvalidCharacter */:\n                _error(localize('InvalidCharacter', 'Invalid characters in string. Control characters must be escaped.'), ErrorCode.InvalidCharacter);\n                return true;\n        }\n        return false;\n    }\n    function _finalize(node, scanNext) {\n        node.length = scanner.getTokenOffset() + scanner.getTokenLength() - node.offset;\n        if (scanNext) {\n            _scanNext();\n        }\n        return node;\n    }\n    function _parseArray(parent) {\n        if (scanner.getToken() !== 3 /* OpenBracketToken */) {\n            return null;\n        }\n        var node = new ArrayASTNodeImpl(parent, scanner.getTokenOffset());\n        _scanNext(); // consume OpenBracketToken\n        var count = 0;\n        var needsComma = false;\n        while (scanner.getToken() !== 4 /* CloseBracketToken */ && scanner.getToken() !== 17 /* EOF */) {\n            if (scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    _error(localize('ValueExpected', 'Value expected'), ErrorCode.ValueExpected);\n                }\n                var commaOffset = scanner.getTokenOffset();\n                _scanNext(); // consume comma\n                if (scanner.getToken() === 4 /* CloseBracketToken */) {\n                    if (needsComma) {\n                        _errorAtRange(localize('TrailingComma', 'Trailing comma'), ErrorCode.TrailingComma, commaOffset, commaOffset + 1);\n                    }\n                    continue;\n                }\n            }\n            else if (needsComma) {\n                _error(localize('ExpectedComma', 'Expected comma'), ErrorCode.CommaExpected);\n            }\n            var item = _parseValue(node, count++);\n            if (!item) {\n                _error(localize('PropertyExpected', 'Value expected'), ErrorCode.ValueExpected, null, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            else {\n                node.items.push(item);\n            }\n            needsComma = true;\n        }\n        if (scanner.getToken() !== 4 /* CloseBracketToken */) {\n            return _error(localize('ExpectedCloseBracket', 'Expected comma or closing bracket'), ErrorCode.CommaOrCloseBacketExpected, node);\n        }\n        return _finalize(node, true);\n    }\n    function _parseProperty(parent, keysSeen) {\n        var node = new PropertyASTNodeImpl(parent, scanner.getTokenOffset());\n        var key = _parseString(node);\n        if (!key) {\n            if (scanner.getToken() === 16 /* Unknown */) {\n                // give a more helpful error message\n                _error(localize('DoubleQuotesExpected', 'Property keys must be doublequoted'), ErrorCode.Undefined);\n                var keyNode = new StringASTNodeImpl(node, scanner.getTokenOffset(), scanner.getTokenLength());\n                keyNode.value = scanner.getTokenValue();\n                key = keyNode;\n                _scanNext(); // consume Unknown\n            }\n            else {\n                return null;\n            }\n        }\n        node.keyNode = key;\n        var seen = keysSeen[key.value];\n        if (seen) {\n            _errorAtRange(localize('DuplicateKeyWarning', \"Duplicate object key\"), ErrorCode.DuplicateKey, node.keyNode.offset, node.keyNode.offset + node.keyNode.length, DiagnosticSeverity.Warning);\n            if (typeof seen === 'object') {\n                _errorAtRange(localize('DuplicateKeyWarning', \"Duplicate object key\"), ErrorCode.DuplicateKey, seen.keyNode.offset, seen.keyNode.offset + seen.keyNode.length, DiagnosticSeverity.Warning);\n            }\n            keysSeen[key.value] = true; // if the same key is duplicate again, avoid duplicate error reporting\n        }\n        else {\n            keysSeen[key.value] = node;\n        }\n        if (scanner.getToken() === 6 /* ColonToken */) {\n            node.colonOffset = scanner.getTokenOffset();\n            _scanNext(); // consume ColonToken\n        }\n        else {\n            _error(localize('ColonExpected', 'Colon expected'), ErrorCode.ColonExpected);\n            if (scanner.getToken() === 10 /* StringLiteral */ && textDocument.positionAt(key.offset + key.length).line < textDocument.positionAt(scanner.getTokenOffset()).line) {\n                node.length = key.length;\n                return node;\n            }\n        }\n        var value = _parseValue(node, key.value);\n        if (!value) {\n            return _error(localize('ValueExpected', 'Value expected'), ErrorCode.ValueExpected, node, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        node.valueNode = value;\n        node.length = value.offset + value.length - node.offset;\n        return node;\n    }\n    function _parseObject(parent) {\n        if (scanner.getToken() !== 1 /* OpenBraceToken */) {\n            return null;\n        }\n        var node = new ObjectASTNodeImpl(parent, scanner.getTokenOffset());\n        var keysSeen = Object.create(null);\n        _scanNext(); // consume OpenBraceToken\n        var needsComma = false;\n        while (scanner.getToken() !== 2 /* CloseBraceToken */ && scanner.getToken() !== 17 /* EOF */) {\n            if (scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    _error(localize('PropertyExpected', 'Property expected'), ErrorCode.PropertyExpected);\n                }\n                var commaOffset = scanner.getTokenOffset();\n                _scanNext(); // consume comma\n                if (scanner.getToken() === 2 /* CloseBraceToken */) {\n                    if (needsComma) {\n                        _errorAtRange(localize('TrailingComma', 'Trailing comma'), ErrorCode.TrailingComma, commaOffset, commaOffset + 1);\n                    }\n                    continue;\n                }\n            }\n            else if (needsComma) {\n                _error(localize('ExpectedComma', 'Expected comma'), ErrorCode.CommaExpected);\n            }\n            var property = _parseProperty(node, keysSeen);\n            if (!property) {\n                _error(localize('PropertyExpected', 'Property expected'), ErrorCode.PropertyExpected, null, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            else {\n                node.properties.push(property);\n            }\n            needsComma = true;\n        }\n        if (scanner.getToken() !== 2 /* CloseBraceToken */) {\n            return _error(localize('ExpectedCloseBrace', 'Expected comma or closing brace'), ErrorCode.CommaOrCloseBraceExpected, node);\n        }\n        return _finalize(node, true);\n    }\n    function _parseString(parent) {\n        if (scanner.getToken() !== 10 /* StringLiteral */) {\n            return null;\n        }\n        var node = new StringASTNodeImpl(parent, scanner.getTokenOffset());\n        node.value = scanner.getTokenValue();\n        return _finalize(node, true);\n    }\n    function _parseNumber(parent) {\n        if (scanner.getToken() !== 11 /* NumericLiteral */) {\n            return null;\n        }\n        var node = new NumberASTNodeImpl(parent, scanner.getTokenOffset());\n        if (scanner.getTokenError() === 0 /* None */) {\n            var tokenValue = scanner.getTokenValue();\n            try {\n                var numberValue = JSON.parse(tokenValue);\n                if (typeof numberValue !== 'number') {\n                    return _error(localize('InvalidNumberFormat', 'Invalid number format.'), ErrorCode.Undefined, node);\n                }\n                node.value = numberValue;\n            }\n            catch (e) {\n                return _error(localize('InvalidNumberFormat', 'Invalid number format.'), ErrorCode.Undefined, node);\n            }\n            node.isInteger = tokenValue.indexOf('.') === -1;\n        }\n        return _finalize(node, true);\n    }\n    function _parseLiteral(parent) {\n        var node;\n        switch (scanner.getToken()) {\n            case 7 /* NullKeyword */:\n                return _finalize(new NullASTNodeImpl(parent, scanner.getTokenOffset()), true);\n            case 8 /* TrueKeyword */:\n                return _finalize(new BooleanASTNodeImpl(parent, true, scanner.getTokenOffset()), true);\n            case 9 /* FalseKeyword */:\n                return _finalize(new BooleanASTNodeImpl(parent, false, scanner.getTokenOffset()), true);\n            default:\n                return null;\n        }\n    }\n    function _parseValue(parent, name) {\n        return _parseArray(parent) || _parseObject(parent) || _parseString(parent) || _parseNumber(parent) || _parseLiteral(parent);\n    }\n    var _root = null;\n    var token = _scanNext();\n    if (token !== 17 /* EOF */) {\n        _root = _parseValue(null, null);\n        if (!_root) {\n            _error(localize('Invalid symbol', 'Expected a JSON object, array or literal.'), ErrorCode.Undefined);\n        }\n        else if (scanner.getToken() !== 17 /* EOF */) {\n            _error(localize('End of file expected', 'End of file expected.'), ErrorCode.Undefined);\n        }\n    }\n    return new JSONDocument(_root, problems, commentRanges);\n}\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n'use strict';\nexport function stringifyObject(obj, indent, stringifyLiteral) {\n    if (obj !== null && typeof obj === 'object') {\n        var newIndent = indent + '\\t';\n        if (Array.isArray(obj)) {\n            if (obj.length === 0) {\n                return '[]';\n            }\n            var result = '[\\n';\n            for (var i = 0; i < obj.length; i++) {\n                result += newIndent + stringifyObject(obj[i], newIndent, stringifyLiteral);\n                if (i < obj.length - 1) {\n                    result += ',';\n                }\n                result += '\\n';\n            }\n            result += indent + ']';\n            return result;\n        }\n        else {\n            var keys = Object.keys(obj);\n            if (keys.length === 0) {\n                return '{}';\n            }\n            var result = '{\\n';\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                result += newIndent + JSON.stringify(key) + ': ' + stringifyObject(obj[key], newIndent, stringifyLiteral);\n                if (i < keys.length - 1) {\n                    result += ',';\n                }\n                result += '\\n';\n            }\n            result += indent + '}';\n            return result;\n        }\n    }\n    return stringifyLiteral(obj);\n}\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n'use strict';\nexport function startsWith(haystack, needle) {\n    if (haystack.length < needle.length) {\n        return false;\n    }\n    for (var i = 0; i < needle.length; i++) {\n        if (haystack[i] !== needle[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack, needle) {\n    var diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.lastIndexOf(needle) === diff;\n    }\n    else if (diff === 0) {\n        return haystack === needle;\n    }\n    else {\n        return false;\n    }\n}\nexport function convertSimple2RegExpPattern(pattern) {\n    return pattern.replace(/[\\-\\\\\\{\\}\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&').replace(/[\\*]/g, '.*');\n}\nexport function repeat(value, count) {\n    var s = '';\n    while (count > 0) {\n        if ((count & 1) === 1) {\n            s += value;\n        }\n        value += value;\n        count = count >>> 1;\n    }\n    return s;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as Parser from '../parser/jsonParser.js';\nimport * as Json from './../../jsonc-parser/main.js';\nimport { stringifyObject } from '../utils/json.js';\nimport { endsWith } from '../utils/strings.js';\nimport { CompletionItem, CompletionItemKind, Range, TextEdit, InsertTextFormat } from './../../vscode-languageserver-types/main.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar JSONCompletion = /** @class */ (function () {\n    function JSONCompletion(schemaService, contributions, promiseConstructor) {\n        if (contributions === void 0) { contributions = []; }\n        this.templateVarIdCounter = 0;\n        this.schemaService = schemaService;\n        this.contributions = contributions;\n        this.promise = promiseConstructor || Promise;\n    }\n    JSONCompletion.prototype.doResolve = function (item) {\n        for (var i = this.contributions.length - 1; i >= 0; i--) {\n            if (this.contributions[i].resolveCompletion) {\n                var resolver = this.contributions[i].resolveCompletion(item);\n                if (resolver) {\n                    return resolver;\n                }\n            }\n        }\n        return this.promise.resolve(item);\n    };\n    JSONCompletion.prototype.doComplete = function (document, position, doc) {\n        var _this = this;\n        var result = {\n            items: [],\n            isIncomplete: false\n        };\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset, true);\n        if (this.isInComment(document, node ? node.offset : 0, offset)) {\n            return Promise.resolve(result);\n        }\n        var currentWord = this.getCurrentWord(document, offset);\n        var overwriteRange = null;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            overwriteRange = Range.create(document.positionAt(node.offset), document.positionAt(node.offset + node.length));\n        }\n        else {\n            var overwriteStart = offset - currentWord.length;\n            if (overwriteStart > 0 && document.getText()[overwriteStart - 1] === '\"') {\n                overwriteStart--;\n            }\n            overwriteRange = Range.create(document.positionAt(overwriteStart), position);\n        }\n        var proposed = {};\n        var collector = {\n            add: function (suggestion) {\n                var existing = proposed[suggestion.label];\n                if (!existing) {\n                    proposed[suggestion.label] = suggestion;\n                    if (overwriteRange) {\n                        suggestion.textEdit = TextEdit.replace(overwriteRange, suggestion.insertText);\n                    }\n                    result.items.push(suggestion);\n                }\n                else if (!existing.documentation) {\n                    existing.documentation = suggestion.documentation;\n                }\n            },\n            setAsIncomplete: function () {\n                result.isIncomplete = true;\n            },\n            error: function (message) {\n                console.error(message);\n            },\n            log: function (message) {\n                console.log(message);\n            },\n            getNumberOfProposals: function () {\n                return result.items.length;\n            }\n        };\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            var collectionPromises = [];\n            var addValue = true;\n            var currentKey = '';\n            var currentProperty = null;\n            if (node) {\n                if (node.type === 'string') {\n                    var parent = node.parent;\n                    if (parent && parent.type === 'property' && parent.keyNode === node) {\n                        addValue = !parent.valueNode;\n                        currentProperty = parent;\n                        currentKey = document.getText().substr(node.offset + 1, node.length - 2);\n                        if (parent) {\n                            node = parent.parent;\n                        }\n                    }\n                }\n            }\n            // proposals for properties\n            if (node && node.type === 'object') {\n                // don't suggest keys when the cursor is just before the opening curly brace\n                if (node.offset === offset) {\n                    return result;\n                }\n                // don't suggest properties that are already present\n                var properties = node.properties;\n                properties.forEach(function (p) {\n                    if (!currentProperty || currentProperty !== p) {\n                        proposed[p.keyNode.value] = CompletionItem.create('__');\n                    }\n                });\n                var separatorAfter_1 = '';\n                if (addValue) {\n                    separatorAfter_1 = _this.evaluateSeparatorAfter(document, document.offsetAt(overwriteRange.end));\n                }\n                if (schema) {\n                    // property proposals with schema\n                    _this.getPropertyCompletions(schema, doc, node, addValue, separatorAfter_1, collector);\n                }\n                else {\n                    // property proposals without schema\n                    _this.getSchemaLessPropertyCompletions(doc, node, currentKey, collector);\n                }\n                var location_1 = Parser.getNodePath(node);\n                _this.contributions.forEach(function (contribution) {\n                    var collectPromise = contribution.collectPropertyCompletions(document.uri, location_1, currentWord, addValue, separatorAfter_1 === '', collector);\n                    if (collectPromise) {\n                        collectionPromises.push(collectPromise);\n                    }\n                });\n                if ((!schema && currentWord.length > 0 && document.getText().charAt(offset - currentWord.length - 1) !== '\"')) {\n                    collector.add({\n                        kind: CompletionItemKind.Property,\n                        label: _this.getLabelForValue(currentWord),\n                        insertText: _this.getInsertTextForProperty(currentWord, null, false, separatorAfter_1),\n                        insertTextFormat: InsertTextFormat.Snippet, documentation: ''\n                    });\n                }\n            }\n            // proposals for values\n            var types = {};\n            if (schema) {\n                // value proposals with schema\n                _this.getValueCompletions(schema, doc, node, offset, document, collector, types);\n            }\n            else {\n                // value proposals without schema\n                _this.getSchemaLessValueCompletions(doc, node, offset, document, collector);\n            }\n            if (_this.contributions.length > 0) {\n                _this.getContributedValueCompletions(doc, node, offset, document, collector, collectionPromises);\n            }\n            return _this.promise.all(collectionPromises).then(function () {\n                if (collector.getNumberOfProposals() === 0) {\n                    var offsetForSeparator = offset;\n                    if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n                        offsetForSeparator = node.offset + node.length;\n                    }\n                    var separatorAfter = _this.evaluateSeparatorAfter(document, offsetForSeparator);\n                    _this.addFillerValueCompletions(types, separatorAfter, collector);\n                }\n                return result;\n            });\n        });\n    };\n    JSONCompletion.prototype.getPropertyCompletions = function (schema, doc, node, addValue, separatorAfter, collector) {\n        var _this = this;\n        var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset);\n        matchingSchemas.forEach(function (s) {\n            if (s.node === node && !s.inverted) {\n                var schemaProperties_1 = s.schema.properties;\n                if (schemaProperties_1) {\n                    Object.keys(schemaProperties_1).forEach(function (key) {\n                        var propertySchema = schemaProperties_1[key];\n                        if (typeof propertySchema === 'object' && !propertySchema.deprecationMessage && !propertySchema.doNotSuggest) {\n                            var proposal = {\n                                kind: CompletionItemKind.Property,\n                                label: key,\n                                insertText: _this.getInsertTextForProperty(key, propertySchema, addValue, separatorAfter),\n                                insertTextFormat: InsertTextFormat.Snippet,\n                                filterText: _this.getFilterTextForValue(key),\n                                documentation: propertySchema.description || '',\n                            };\n                            if (endsWith(proposal.insertText, \"$1\" + separatorAfter)) {\n                                proposal.command = {\n                                    title: 'Suggest',\n                                    command: 'editor.action.triggerSuggest'\n                                };\n                            }\n                            collector.add(proposal);\n                        }\n                    });\n                }\n            }\n        });\n    };\n    JSONCompletion.prototype.getSchemaLessPropertyCompletions = function (doc, node, currentKey, collector) {\n        var _this = this;\n        var collectCompletionsForSimilarObject = function (obj) {\n            obj.properties.forEach(function (p) {\n                var key = p.keyNode.value;\n                collector.add({\n                    kind: CompletionItemKind.Property,\n                    label: key,\n                    insertText: _this.getInsertTextForValue(key, ''),\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    filterText: _this.getFilterTextForValue(key),\n                    documentation: ''\n                });\n            });\n        };\n        if (node.parent) {\n            if (node.parent.type === 'property') {\n                // if the object is a property value, check the tree for other objects that hang under a property of the same name\n                var parentKey_1 = node.parent.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n !== node.parent && n.keyNode.value === parentKey_1 && n.valueNode && n.valueNode.type === 'object') {\n                        collectCompletionsForSimilarObject(n.valueNode);\n                    }\n                    return true;\n                });\n            }\n            else if (node.parent.type === 'array') {\n                // if the object is in an array, use all other array elements as similar objects\n                node.parent.items.forEach(function (n) {\n                    if (n.type === 'object' && n !== node) {\n                        collectCompletionsForSimilarObject(n);\n                    }\n                });\n            }\n        }\n        else if (node.type === 'object') {\n            collector.add({\n                kind: CompletionItemKind.Property,\n                label: '$schema',\n                insertText: this.getInsertTextForProperty('$schema', null, true, ''),\n                insertTextFormat: InsertTextFormat.Snippet, documentation: '',\n                filterText: this.getFilterTextForValue(\"$schema\")\n            });\n        }\n    };\n    JSONCompletion.prototype.getSchemaLessValueCompletions = function (doc, node, offset, document, collector) {\n        var _this = this;\n        var offsetForSeparator = offset;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            offsetForSeparator = node.offset + node.length;\n            node = node.parent;\n        }\n        if (!node) {\n            collector.add({\n                kind: this.getSuggestionKind('object'),\n                label: 'Empty object',\n                insertText: this.getInsertTextForValue({}, ''),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: ''\n            });\n            collector.add({\n                kind: this.getSuggestionKind('array'),\n                label: 'Empty array',\n                insertText: this.getInsertTextForValue([], ''),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: ''\n            });\n            return;\n        }\n        var separatorAfter = this.evaluateSeparatorAfter(document, offsetForSeparator);\n        var collectSuggestionsForValues = function (value) {\n            if (!Parser.contains(value.parent, offset, true)) {\n                collector.add({\n                    kind: _this.getSuggestionKind(value.type),\n                    label: _this.getLabelTextForMatchingNode(value, document),\n                    insertText: _this.getInsertTextForMatchingNode(value, document, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet, documentation: ''\n                });\n            }\n            if (value.type === 'boolean') {\n                _this.addBooleanValueCompletion(!value.value, separatorAfter, collector);\n            }\n        };\n        if (node.type === 'property') {\n            if (offset > node.colonOffset) {\n                var valueNode = node.valueNode;\n                if (valueNode && (offset > (valueNode.offset + valueNode.length) || valueNode.type === 'object' || valueNode.type === 'array')) {\n                    return;\n                }\n                // suggest values at the same key\n                var parentKey_2 = node.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n.keyNode.value === parentKey_2 && n.valueNode) {\n                        collectSuggestionsForValues(n.valueNode);\n                    }\n                    return true;\n                });\n                if (parentKey_2 === '$schema' && node.parent && !node.parent.parent) {\n                    this.addDollarSchemaCompletions(separatorAfter, collector);\n                }\n            }\n        }\n        if (node.type === 'array') {\n            if (node.parent && node.parent.type === 'property') {\n                // suggest items of an array at the same key\n                var parentKey_3 = node.parent.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n.keyNode.value === parentKey_3 && n.valueNode && n.valueNode.type === 'array') {\n                        n.valueNode.items.forEach(collectSuggestionsForValues);\n                    }\n                    return true;\n                });\n            }\n            else {\n                // suggest items in the same array\n                node.items.forEach(collectSuggestionsForValues);\n            }\n        }\n    };\n    JSONCompletion.prototype.getValueCompletions = function (schema, doc, node, offset, document, collector, types) {\n        var _this = this;\n        var offsetForSeparator = offset;\n        var parentKey = null;\n        var valueNode = null;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            offsetForSeparator = node.offset + node.length;\n            valueNode = node;\n            node = node.parent;\n        }\n        if (!node) {\n            this.addSchemaValueCompletions(schema.schema, '', collector, types);\n            return;\n        }\n        if ((node.type === 'property') && offset > node.colonOffset) {\n            var valueNode_1 = node.valueNode;\n            if (valueNode_1 && offset > (valueNode_1.offset + valueNode_1.length)) {\n                return; // we are past the value node\n            }\n            parentKey = node.keyNode.value;\n            node = node.parent;\n        }\n        if (node && (parentKey !== null || node.type === 'array')) {\n            var separatorAfter_2 = this.evaluateSeparatorAfter(document, offsetForSeparator);\n            var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset, valueNode);\n            matchingSchemas.forEach(function (s) {\n                if (s.node === node && !s.inverted && s.schema) {\n                    if (node.type === 'array' && s.schema.items) {\n                        if (Array.isArray(s.schema.items)) {\n                            var index = _this.findItemAtOffset(node, document, offset);\n                            if (index < s.schema.items.length) {\n                                _this.addSchemaValueCompletions(s.schema.items[index], separatorAfter_2, collector, types);\n                            }\n                        }\n                        else {\n                            _this.addSchemaValueCompletions(s.schema.items, separatorAfter_2, collector, types);\n                        }\n                    }\n                    if (s.schema.properties) {\n                        var propertySchema = s.schema.properties[parentKey];\n                        if (propertySchema) {\n                            _this.addSchemaValueCompletions(propertySchema, separatorAfter_2, collector, types);\n                        }\n                    }\n                }\n            });\n            if (parentKey === '$schema' && !node.parent) {\n                this.addDollarSchemaCompletions(separatorAfter_2, collector);\n            }\n            if (types['boolean']) {\n                this.addBooleanValueCompletion(true, separatorAfter_2, collector);\n                this.addBooleanValueCompletion(false, separatorAfter_2, collector);\n            }\n            if (types['null']) {\n                this.addNullValueCompletion(separatorAfter_2, collector);\n            }\n        }\n    };\n    JSONCompletion.prototype.getContributedValueCompletions = function (doc, node, offset, document, collector, collectionPromises) {\n        if (!node) {\n            this.contributions.forEach(function (contribution) {\n                var collectPromise = contribution.collectDefaultCompletions(document.uri, collector);\n                if (collectPromise) {\n                    collectionPromises.push(collectPromise);\n                }\n            });\n        }\n        else {\n            if (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null') {\n                node = node.parent;\n            }\n            if ((node.type === 'property') && offset > node.colonOffset) {\n                var parentKey_4 = node.keyNode.value;\n                var valueNode = node.valueNode;\n                if (!valueNode || offset <= (valueNode.offset + valueNode.length)) {\n                    var location_2 = Parser.getNodePath(node.parent);\n                    this.contributions.forEach(function (contribution) {\n                        var collectPromise = contribution.collectValueCompletions(document.uri, location_2, parentKey_4, collector);\n                        if (collectPromise) {\n                            collectionPromises.push(collectPromise);\n                        }\n                    });\n                }\n            }\n        }\n    };\n    JSONCompletion.prototype.addSchemaValueCompletions = function (schema, separatorAfter, collector, types) {\n        var _this = this;\n        if (typeof schema === 'object') {\n            this.addEnumValueCompletions(schema, separatorAfter, collector);\n            this.addDefaultValueCompletions(schema, separatorAfter, collector);\n            this.collectTypes(schema, types);\n            if (Array.isArray(schema.allOf)) {\n                schema.allOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n            if (Array.isArray(schema.anyOf)) {\n                schema.anyOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n            if (Array.isArray(schema.oneOf)) {\n                schema.oneOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n        }\n    };\n    JSONCompletion.prototype.addDefaultValueCompletions = function (schema, separatorAfter, collector, arrayDepth) {\n        var _this = this;\n        if (arrayDepth === void 0) { arrayDepth = 0; }\n        var hasProposals = false;\n        if (isDefined(schema.default)) {\n            var type = schema.type;\n            var value = schema.default;\n            for (var i = arrayDepth; i > 0; i--) {\n                value = [value];\n                type = 'array';\n            }\n            collector.add({\n                kind: this.getSuggestionKind(type),\n                label: this.getLabelForValue(value),\n                insertText: this.getInsertTextForValue(value, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('json.suggest.default', 'Default value'),\n            });\n            hasProposals = true;\n        }\n        if (Array.isArray(schema.defaultSnippets)) {\n            schema.defaultSnippets.forEach(function (s) {\n                var type = schema.type;\n                var value = s.body;\n                var label = s.label;\n                var insertText;\n                var filterText;\n                if (isDefined(value)) {\n                    var type_1 = schema.type;\n                    for (var i = arrayDepth; i > 0; i--) {\n                        value = [value];\n                        type_1 = 'array';\n                    }\n                    insertText = _this.getInsertTextForSnippetValue(value, separatorAfter);\n                    filterText = _this.getFilterTextForSnippetValue(value);\n                    label = label || _this.getLabelForSnippetValue(value);\n                }\n                else if (typeof s.bodyText === 'string') {\n                    var prefix = '', suffix = '', indent = '';\n                    for (var i = arrayDepth; i > 0; i--) {\n                        prefix = prefix + indent + '[\\n';\n                        suffix = suffix + '\\n' + indent + ']';\n                        indent += '\\t';\n                        type = 'array';\n                    }\n                    insertText = prefix + indent + s.bodyText.split('\\n').join('\\n' + indent) + suffix + separatorAfter;\n                    label = label || insertText;\n                    filterText = insertText.replace(/[\\n]/g, ''); // remove new lines\n                }\n                collector.add({\n                    kind: _this.getSuggestionKind(type),\n                    label: label,\n                    documentation: s.description,\n                    insertText: insertText,\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    filterText: filterText\n                });\n                hasProposals = true;\n            });\n        }\n        if (!hasProposals && typeof schema.items === 'object' && !Array.isArray(schema.items)) {\n            this.addDefaultValueCompletions(schema.items, separatorAfter, collector, arrayDepth + 1);\n        }\n    };\n    JSONCompletion.prototype.addEnumValueCompletions = function (schema, separatorAfter, collector) {\n        if (isDefined(schema.const)) {\n            collector.add({\n                kind: this.getSuggestionKind(schema.type),\n                label: this.getLabelForValue(schema.const),\n                insertText: this.getInsertTextForValue(schema.const, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: schema.description\n            });\n        }\n        if (Array.isArray(schema.enum)) {\n            for (var i = 0, length = schema.enum.length; i < length; i++) {\n                var enm = schema.enum[i];\n                var documentation = schema.description;\n                if (schema.enumDescriptions && i < schema.enumDescriptions.length) {\n                    documentation = schema.enumDescriptions[i];\n                }\n                collector.add({\n                    kind: this.getSuggestionKind(schema.type),\n                    label: this.getLabelForValue(enm),\n                    insertText: this.getInsertTextForValue(enm, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    documentation: documentation\n                });\n            }\n        }\n    };\n    JSONCompletion.prototype.collectTypes = function (schema, types) {\n        if (Array.isArray(schema.enum) || isDefined(schema.const)) {\n            return;\n        }\n        var type = schema.type;\n        if (Array.isArray(type)) {\n            type.forEach(function (t) { return types[t] = true; });\n        }\n        else {\n            types[type] = true;\n        }\n    };\n    JSONCompletion.prototype.addFillerValueCompletions = function (types, separatorAfter, collector) {\n        if (types['object']) {\n            collector.add({\n                kind: this.getSuggestionKind('object'),\n                label: '{}',\n                insertText: this.getInsertTextForGuessedValue({}, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('defaults.object', 'New object'),\n                documentation: ''\n            });\n        }\n        if (types['array']) {\n            collector.add({\n                kind: this.getSuggestionKind('array'),\n                label: '[]',\n                insertText: this.getInsertTextForGuessedValue([], separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('defaults.array', 'New array'),\n                documentation: ''\n            });\n        }\n    };\n    JSONCompletion.prototype.addBooleanValueCompletion = function (value, separatorAfter, collector) {\n        collector.add({\n            kind: this.getSuggestionKind('boolean'),\n            label: value ? 'true' : 'false',\n            insertText: this.getInsertTextForValue(value, separatorAfter),\n            insertTextFormat: InsertTextFormat.Snippet,\n            documentation: ''\n        });\n    };\n    JSONCompletion.prototype.addNullValueCompletion = function (separatorAfter, collector) {\n        collector.add({\n            kind: this.getSuggestionKind('null'),\n            label: 'null',\n            insertText: 'null' + separatorAfter,\n            insertTextFormat: InsertTextFormat.Snippet,\n            documentation: ''\n        });\n    };\n    JSONCompletion.prototype.addDollarSchemaCompletions = function (separatorAfter, collector) {\n        var _this = this;\n        var schemaIds = this.schemaService.getRegisteredSchemaIds(function (schema) { return schema === 'http' || schema === 'https'; });\n        schemaIds.forEach(function (schemaId) { return collector.add({\n            kind: CompletionItemKind.Module,\n            label: _this.getLabelForValue(schemaId),\n            filterText: _this.getFilterTextForValue(schemaId),\n            insertText: _this.getInsertTextForValue(schemaId, separatorAfter),\n            insertTextFormat: InsertTextFormat.Snippet, documentation: ''\n        }); });\n    };\n    JSONCompletion.prototype.getLabelForValue = function (value) {\n        var label = JSON.stringify(value);\n        if (label.length > 57) {\n            return label.substr(0, 57).trim() + '...';\n        }\n        return label;\n    };\n    JSONCompletion.prototype.getFilterTextForValue = function (value) {\n        return JSON.stringify(value);\n    };\n    JSONCompletion.prototype.getFilterTextForSnippetValue = function (value) {\n        return JSON.stringify(value).replace(/\\$\\{\\d+:([^}]+)\\}|\\$\\d+/g, '$1');\n    };\n    JSONCompletion.prototype.getLabelForSnippetValue = function (value) {\n        var label = JSON.stringify(value);\n        label = label.replace(/\\$\\{\\d+:([^}]+)\\}|\\$\\d+/g, '$1');\n        if (label.length > 57) {\n            return label.substr(0, 57).trim() + '...';\n        }\n        return label;\n    };\n    JSONCompletion.prototype.getInsertTextForPlainText = function (text) {\n        return text.replace(/[\\\\\\$\\}]/g, '\\\\$&'); // escape $, \\ and } \n    };\n    JSONCompletion.prototype.getInsertTextForValue = function (value, separatorAfter) {\n        var text = JSON.stringify(value, null, '\\t');\n        if (text === '{}') {\n            return '{\\n\\t$1\\n}' + separatorAfter;\n        }\n        else if (text === '[]') {\n            return '[\\n\\t$1\\n]' + separatorAfter;\n        }\n        return this.getInsertTextForPlainText(text + separatorAfter);\n    };\n    JSONCompletion.prototype.getInsertTextForSnippetValue = function (value, separatorAfter) {\n        var replacer = function (value) {\n            if (typeof value === 'string') {\n                if (value[0] === '^') {\n                    return value.substr(1);\n                }\n            }\n            return JSON.stringify(value);\n        };\n        return stringifyObject(value, '', replacer) + separatorAfter;\n    };\n    JSONCompletion.prototype.getInsertTextForGuessedValue = function (value, separatorAfter) {\n        switch (typeof value) {\n            case 'object':\n                if (value === null) {\n                    return '${1:null}' + separatorAfter;\n                }\n                return this.getInsertTextForValue(value, separatorAfter);\n            case 'string':\n                var snippetValue = JSON.stringify(value);\n                snippetValue = snippetValue.substr(1, snippetValue.length - 2); // remove quotes\n                snippetValue = this.getInsertTextForPlainText(snippetValue); // escape \\ and }\n                return '\"${1:' + snippetValue + '}\"' + separatorAfter;\n            case 'number':\n            case 'boolean':\n                return '${1:' + JSON.stringify(value) + '}' + separatorAfter;\n        }\n        return this.getInsertTextForValue(value, separatorAfter);\n    };\n    JSONCompletion.prototype.getSuggestionKind = function (type) {\n        if (Array.isArray(type)) {\n            var array = type;\n            type = array.length > 0 ? array[0] : null;\n        }\n        if (!type) {\n            return CompletionItemKind.Value;\n        }\n        switch (type) {\n            case 'string': return CompletionItemKind.Value;\n            case 'object': return CompletionItemKind.Module;\n            case 'property': return CompletionItemKind.Property;\n            default: return CompletionItemKind.Value;\n        }\n    };\n    JSONCompletion.prototype.getLabelTextForMatchingNode = function (node, document) {\n        switch (node.type) {\n            case 'array':\n                return '[]';\n            case 'object':\n                return '{}';\n            default:\n                var content = document.getText().substr(node.offset, node.length);\n                return content;\n        }\n    };\n    JSONCompletion.prototype.getInsertTextForMatchingNode = function (node, document, separatorAfter) {\n        switch (node.type) {\n            case 'array':\n                return this.getInsertTextForValue([], separatorAfter);\n            case 'object':\n                return this.getInsertTextForValue({}, separatorAfter);\n            default:\n                var content = document.getText().substr(node.offset, node.length) + separatorAfter;\n                return this.getInsertTextForPlainText(content);\n        }\n    };\n    JSONCompletion.prototype.getInsertTextForProperty = function (key, propertySchema, addValue, separatorAfter) {\n        var propertyText = this.getInsertTextForValue(key, '');\n        if (!addValue) {\n            return propertyText;\n        }\n        var resultText = propertyText + ': ';\n        var value;\n        var nValueProposals = 0;\n        if (propertySchema) {\n            if (Array.isArray(propertySchema.defaultSnippets)) {\n                if (propertySchema.defaultSnippets.length === 1) {\n                    var body = propertySchema.defaultSnippets[0].body;\n                    if (isDefined(body)) {\n                        value = this.getInsertTextForSnippetValue(body, '');\n                    }\n                }\n                nValueProposals += propertySchema.defaultSnippets.length;\n            }\n            if (propertySchema.enum) {\n                if (!value && propertySchema.enum.length === 1) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.enum[0], '');\n                }\n                nValueProposals += propertySchema.enum.length;\n            }\n            if (isDefined(propertySchema.default)) {\n                if (!value) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.default, '');\n                }\n                nValueProposals++;\n            }\n            if (nValueProposals === 0) {\n                var type = Array.isArray(propertySchema.type) ? propertySchema.type[0] : propertySchema.type;\n                if (!type) {\n                    if (propertySchema.properties) {\n                        type = 'object';\n                    }\n                    else if (propertySchema.items) {\n                        type = 'array';\n                    }\n                }\n                switch (type) {\n                    case 'boolean':\n                        value = '$1';\n                        break;\n                    case 'string':\n                        value = '\"$1\"';\n                        break;\n                    case 'object':\n                        value = '{\\n\\t$1\\n}';\n                        break;\n                    case 'array':\n                        value = '[\\n\\t$1\\n]';\n                        break;\n                    case 'number':\n                    case 'integer':\n                        value = '${1:0}';\n                        break;\n                    case 'null':\n                        value = '${1:null}';\n                        break;\n                    default:\n                        return propertyText;\n                }\n            }\n        }\n        if (!value || nValueProposals > 1) {\n            value = '$1';\n        }\n        return resultText + value + separatorAfter;\n    };\n    JSONCompletion.prototype.getCurrentWord = function (document, offset) {\n        var i = offset - 1;\n        var text = document.getText();\n        while (i >= 0 && ' \\t\\n\\r\\v\":{[,]}'.indexOf(text.charAt(i)) === -1) {\n            i--;\n        }\n        return text.substring(i + 1, offset);\n    };\n    JSONCompletion.prototype.evaluateSeparatorAfter = function (document, offset) {\n        var scanner = Json.createScanner(document.getText(), true);\n        scanner.setPosition(offset);\n        var token = scanner.scan();\n        switch (token) {\n            case 5 /* CommaToken */:\n            case 2 /* CloseBraceToken */:\n            case 4 /* CloseBracketToken */:\n            case 17 /* EOF */:\n                return '';\n            default:\n                return ',';\n        }\n    };\n    JSONCompletion.prototype.findItemAtOffset = function (node, document, offset) {\n        var scanner = Json.createScanner(document.getText(), true);\n        var children = node.items;\n        for (var i = children.length - 1; i >= 0; i--) {\n            var child = children[i];\n            if (offset > child.offset + child.length) {\n                scanner.setPosition(child.offset + child.length);\n                var token = scanner.scan();\n                if (token === 5 /* CommaToken */ && offset >= scanner.getTokenOffset() + scanner.getTokenLength()) {\n                    return i + 1;\n                }\n                return i;\n            }\n            else if (offset >= child.offset) {\n                return i;\n            }\n        }\n        return 0;\n    };\n    JSONCompletion.prototype.isInComment = function (document, start, offset) {\n        var scanner = Json.createScanner(document.getText(), false);\n        scanner.setPosition(start);\n        var token = scanner.scan();\n        while (token !== 17 /* EOF */ && (scanner.getTokenOffset() + scanner.getTokenLength() < offset)) {\n            token = scanner.scan();\n        }\n        return (token === 12 /* LineCommentTrivia */ || token === 13 /* BlockCommentTrivia */) && scanner.getTokenOffset() <= offset;\n    };\n    return JSONCompletion;\n}());\nexport { JSONCompletion };\nfunction isDefined(val) {\n    return typeof val !== 'undefined';\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as Parser from '../parser/jsonParser.js';\nimport { Range } from './../../vscode-languageserver-types/main.js';\nvar JSONHover = /** @class */ (function () {\n    function JSONHover(schemaService, contributions, promiseConstructor) {\n        if (contributions === void 0) { contributions = []; }\n        this.schemaService = schemaService;\n        this.contributions = contributions;\n        this.promise = promiseConstructor || Promise;\n    }\n    JSONHover.prototype.doHover = function (document, position, doc) {\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset);\n        if (!node || (node.type === 'object' || node.type === 'array') && offset > node.offset + 1 && offset < node.offset + node.length - 1) {\n            return this.promise.resolve(null);\n        }\n        var hoverRangeNode = node;\n        // use the property description when hovering over an object key\n        if (node.type === 'string') {\n            var parent = node.parent;\n            if (parent.type === 'property' && parent.keyNode === node) {\n                node = parent.valueNode;\n                if (!node) {\n                    return this.promise.resolve(null);\n                }\n            }\n        }\n        var hoverRange = Range.create(document.positionAt(hoverRangeNode.offset), document.positionAt(hoverRangeNode.offset + hoverRangeNode.length));\n        var createHover = function (contents) {\n            var result = {\n                contents: contents,\n                range: hoverRange\n            };\n            return result;\n        };\n        var location = Parser.getNodePath(node);\n        for (var i = this.contributions.length - 1; i >= 0; i--) {\n            var contribution = this.contributions[i];\n            var promise = contribution.getInfoContribution(document.uri, location);\n            if (promise) {\n                return promise.then(function (htmlContent) { return createHover(htmlContent); });\n            }\n        }\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            if (schema) {\n                var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset);\n                var title_1 = null;\n                var markdownDescription_1 = null;\n                var markdownEnumValueDescription_1 = null, enumValue_1 = null;\n                matchingSchemas.every(function (s) {\n                    if (s.node === node && !s.inverted && s.schema) {\n                        title_1 = title_1 || s.schema.title;\n                        markdownDescription_1 = markdownDescription_1 || s.schema.markdownDescription || toMarkdown(s.schema.description);\n                        if (s.schema.enum) {\n                            var idx = s.schema.enum.indexOf(Parser.getNodeValue(node));\n                            if (s.schema.markdownEnumDescriptions) {\n                                markdownEnumValueDescription_1 = s.schema.markdownEnumDescriptions[idx];\n                            }\n                            else if (s.schema.enumDescriptions) {\n                                markdownEnumValueDescription_1 = toMarkdown(s.schema.enumDescriptions[idx]);\n                            }\n                            if (markdownEnumValueDescription_1) {\n                                enumValue_1 = s.schema.enum[idx];\n                                if (typeof enumValue_1 !== 'string') {\n                                    enumValue_1 = JSON.stringify(enumValue_1);\n                                }\n                            }\n                        }\n                    }\n                    return true;\n                });\n                var result = '';\n                if (title_1) {\n                    result = toMarkdown(title_1);\n                }\n                if (markdownDescription_1) {\n                    if (result.length > 0) {\n                        result += \"\\n\\n\";\n                    }\n                    result += markdownDescription_1;\n                }\n                if (markdownEnumValueDescription_1) {\n                    if (result.length > 0) {\n                        result += \"\\n\\n\";\n                    }\n                    result += \"`\" + toMarkdown(enumValue_1) + \"`: \" + markdownEnumValueDescription_1;\n                }\n                return createHover([result]);\n            }\n            return null;\n        });\n    };\n    return JSONHover;\n}());\nexport { JSONHover };\nfunction toMarkdown(plain) {\n    if (plain) {\n        var res = plain.replace(/([^\\n\\r])(\\r?\\n)([^\\n\\r])/gm, '$1\\n\\n$3'); // single new lines to \\n\\n (Markdown paragraph)\n        return res.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    return void 0;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { Diagnostic, DiagnosticSeverity, Range } from './../../vscode-languageserver-types/main.js';\nimport { ErrorCode } from '../jsonLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar JSONValidation = /** @class */ (function () {\n    function JSONValidation(jsonSchemaService, promiseConstructor) {\n        this.jsonSchemaService = jsonSchemaService;\n        this.promise = promiseConstructor;\n        this.validationEnabled = true;\n    }\n    JSONValidation.prototype.configure = function (raw) {\n        if (raw) {\n            this.validationEnabled = raw.validate;\n            this.commentSeverity = raw.allowComments ? void 0 : DiagnosticSeverity.Error;\n        }\n    };\n    JSONValidation.prototype.doValidation = function (textDocument, jsonDocument, documentSettings, schema) {\n        var _this = this;\n        if (!this.validationEnabled) {\n            return this.promise.resolve([]);\n        }\n        var diagnostics = [];\n        var added = {};\n        var addProblem = function (problem) {\n            // remove duplicated messages\n            var signature = problem.range.start.line + ' ' + problem.range.start.character + ' ' + problem.message;\n            if (!added[signature]) {\n                added[signature] = true;\n                diagnostics.push(problem);\n            }\n        };\n        var getDiagnostics = function (schema) {\n            var trailingCommaSeverity = documentSettings ? toDiagnosticSeverity(documentSettings.trailingCommas) : DiagnosticSeverity.Error;\n            var commentSeverity = documentSettings ? toDiagnosticSeverity(documentSettings.comments) : _this.commentSeverity;\n            if (schema) {\n                if (schema.errors.length && jsonDocument.root) {\n                    var astRoot = jsonDocument.root;\n                    var property = astRoot.type === 'object' ? astRoot.properties[0] : null;\n                    if (property && property.keyNode.value === '$schema') {\n                        var node = property.valueNode || property;\n                        var range = Range.create(textDocument.positionAt(node.offset), textDocument.positionAt(node.offset + node.length));\n                        addProblem(Diagnostic.create(range, schema.errors[0], DiagnosticSeverity.Warning, ErrorCode.SchemaResolveError));\n                    }\n                    else {\n                        var range = Range.create(textDocument.positionAt(astRoot.offset), textDocument.positionAt(astRoot.offset + 1));\n                        addProblem(Diagnostic.create(range, schema.errors[0], DiagnosticSeverity.Warning, ErrorCode.SchemaResolveError));\n                    }\n                }\n                else {\n                    var semanticErrors = jsonDocument.validate(textDocument, schema.schema);\n                    if (semanticErrors) {\n                        semanticErrors.forEach(addProblem);\n                    }\n                }\n                if (schemaAllowsComments(schema.schema)) {\n                    trailingCommaSeverity = commentSeverity = void 0;\n                }\n            }\n            jsonDocument.syntaxErrors.forEach(function (p) {\n                if (p.code === ErrorCode.TrailingComma) {\n                    if (typeof commentSeverity !== 'number') {\n                        return;\n                    }\n                    p.severity = trailingCommaSeverity;\n                }\n                addProblem(p);\n            });\n            if (typeof commentSeverity === 'number') {\n                var message_1 = localize('InvalidCommentToken', 'Comments are not permitted in JSON.');\n                jsonDocument.comments.forEach(function (c) {\n                    addProblem(Diagnostic.create(c, message_1, commentSeverity, ErrorCode.CommentNotPermitted));\n                });\n            }\n            return diagnostics;\n        };\n        if (schema) {\n            return this.promise.resolve(getDiagnostics(schema));\n        }\n        return this.jsonSchemaService.getSchemaForResource(textDocument.uri, jsonDocument).then(function (schema) {\n            return getDiagnostics(schema);\n        });\n    };\n    return JSONValidation;\n}());\nexport { JSONValidation };\nfunction schemaAllowsComments(schemaRef) {\n    if (schemaRef && typeof schemaRef === 'object') {\n        if (schemaRef.allowComments) {\n            return true;\n        }\n        if (schemaRef.allOf) {\n            return schemaRef.allOf.some(schemaAllowsComments);\n        }\n    }\n    return false;\n}\nfunction toDiagnosticSeverity(severityLevel) {\n    switch (severityLevel) {\n        case 'error': return DiagnosticSeverity.Error;\n        case 'warning': return DiagnosticSeverity.Warning;\n        case 'ignore': return void 0;\n    }\n    return void 0;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar Digit0 = 48;\nvar Digit9 = 57;\nvar A = 65;\nvar a = 97;\nvar f = 102;\nexport function hexDigit(charCode) {\n    if (charCode < Digit0) {\n        return 0;\n    }\n    if (charCode <= Digit9) {\n        return charCode - Digit0;\n    }\n    if (charCode < a) {\n        charCode += (a - A);\n    }\n    if (charCode >= a && charCode <= f) {\n        return charCode - a + 10;\n    }\n    return 0;\n}\nexport function colorFromHex(text) {\n    if (text[0] !== '#') {\n        return null;\n    }\n    switch (text.length) {\n        case 4:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x11) / 255.0,\n                green: (hexDigit(text.charCodeAt(2)) * 0x11) / 255.0,\n                blue: (hexDigit(text.charCodeAt(3)) * 0x11) / 255.0,\n                alpha: 1\n            };\n        case 5:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x11) / 255.0,\n                green: (hexDigit(text.charCodeAt(2)) * 0x11) / 255.0,\n                blue: (hexDigit(text.charCodeAt(3)) * 0x11) / 255.0,\n                alpha: (hexDigit(text.charCodeAt(4)) * 0x11) / 255.0,\n            };\n        case 7:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x10 + hexDigit(text.charCodeAt(2))) / 255.0,\n                green: (hexDigit(text.charCodeAt(3)) * 0x10 + hexDigit(text.charCodeAt(4))) / 255.0,\n                blue: (hexDigit(text.charCodeAt(5)) * 0x10 + hexDigit(text.charCodeAt(6))) / 255.0,\n                alpha: 1\n            };\n        case 9:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x10 + hexDigit(text.charCodeAt(2))) / 255.0,\n                green: (hexDigit(text.charCodeAt(3)) * 0x10 + hexDigit(text.charCodeAt(4))) / 255.0,\n                blue: (hexDigit(text.charCodeAt(5)) * 0x10 + hexDigit(text.charCodeAt(6))) / 255.0,\n                alpha: (hexDigit(text.charCodeAt(7)) * 0x10 + hexDigit(text.charCodeAt(8))) / 255.0\n            };\n    }\n    return null;\n}\nexport function colorFrom256RGB(red, green, blue, alpha) {\n    if (alpha === void 0) { alpha = 1.0; }\n    return {\n        red: red / 255.0,\n        green: green / 255.0,\n        blue: blue / 255.0,\n        alpha: alpha\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as Parser from '../parser/jsonParser.js';\nimport * as Strings from '../utils/strings.js';\nimport { colorFromHex } from '../utils/colors.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nimport { SymbolKind, Range, Location, TextEdit } from './../../vscode-languageserver-types/main.js';\nvar localize = nls.loadMessageBundle();\nvar JSONDocumentSymbols = /** @class */ (function () {\n    function JSONDocumentSymbols(schemaService) {\n        this.schemaService = schemaService;\n    }\n    JSONDocumentSymbols.prototype.findDocumentSymbols = function (document, doc) {\n        var _this = this;\n        var root = doc.root;\n        if (!root) {\n            return null;\n        }\n        // special handling for key bindings\n        var resourceString = document.uri;\n        if ((resourceString === 'vscode://defaultsettings/keybindings.json') || Strings.endsWith(resourceString.toLowerCase(), '/user/keybindings.json')) {\n            if (root.type === 'array') {\n                var result_1 = [];\n                root.items.forEach(function (item) {\n                    if (item.type === 'object') {\n                        for (var _i = 0, _a = item.properties; _i < _a.length; _i++) {\n                            var property = _a[_i];\n                            if (property.keyNode.value === 'key') {\n                                if (property.valueNode) {\n                                    if (property.valueNode) {\n                                        var location = Location.create(document.uri, getRange(document, item));\n                                        result_1.push({ name: Parser.getNodeValue(property.valueNode), kind: SymbolKind.Function, location: location });\n                                    }\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                });\n                return result_1;\n            }\n        }\n        var collectOutlineEntries = function (result, node, containerName) {\n            if (node.type === 'array') {\n                node.items.forEach(function (node) { return collectOutlineEntries(result, node, containerName); });\n            }\n            else if (node.type === 'object') {\n                node.properties.forEach(function (property) {\n                    var location = Location.create(document.uri, getRange(document, property));\n                    var valueNode = property.valueNode;\n                    if (valueNode) {\n                        var childContainerName = containerName ? containerName + '.' + property.keyNode.value : property.keyNode.value;\n                        result.push({ name: property.keyNode.value, kind: _this.getSymbolKind(valueNode.type), location: location, containerName: containerName });\n                        collectOutlineEntries(result, valueNode, childContainerName);\n                    }\n                });\n            }\n            return result;\n        };\n        var result = collectOutlineEntries([], root, void 0);\n        return result;\n    };\n    JSONDocumentSymbols.prototype.findDocumentSymbols2 = function (document, doc) {\n        var _this = this;\n        var root = doc.root;\n        if (!root) {\n            return null;\n        }\n        // special handling for key bindings\n        var resourceString = document.uri;\n        if ((resourceString === 'vscode://defaultsettings/keybindings.json') || Strings.endsWith(resourceString.toLowerCase(), '/user/keybindings.json')) {\n            if (root.type === 'array') {\n                var result_2 = [];\n                root.items.forEach(function (item) {\n                    if (item.type === 'object') {\n                        for (var _i = 0, _a = item.properties; _i < _a.length; _i++) {\n                            var property = _a[_i];\n                            if (property.keyNode.value === 'key') {\n                                if (property.valueNode) {\n                                    var range = getRange(document, item);\n                                    var selectionRange = getRange(document, property.keyNode);\n                                    result_2.push({ name: Parser.getNodeValue(property.valueNode), kind: SymbolKind.Function, range: range, selectionRange: selectionRange });\n                                }\n                                return;\n                            }\n                        }\n                    }\n                });\n                return result_2;\n            }\n        }\n        var collectOutlineEntries = function (result, node) {\n            if (node.type === 'array') {\n                node.items.forEach(function (node, index) {\n                    if (node) {\n                        var range = getRange(document, node);\n                        var selectionRange = range;\n                        var name = String(index);\n                        var children = collectOutlineEntries([], node);\n                        result.push({ name: name, kind: _this.getSymbolKind(node.type), range: range, selectionRange: selectionRange, children: children });\n                    }\n                });\n            }\n            else if (node.type === 'object') {\n                node.properties.forEach(function (property) {\n                    var valueNode = property.valueNode;\n                    if (valueNode) {\n                        var range = getRange(document, property);\n                        var selectionRange = getRange(document, property.keyNode);\n                        var name = property.keyNode.value;\n                        var children = collectOutlineEntries([], valueNode);\n                        result.push({ name: name, kind: _this.getSymbolKind(valueNode.type), range: range, selectionRange: selectionRange, children: children });\n                    }\n                });\n            }\n            return result;\n        };\n        var result = collectOutlineEntries([], root);\n        return result;\n    };\n    JSONDocumentSymbols.prototype.getSymbolKind = function (nodeType) {\n        switch (nodeType) {\n            case 'object':\n                return SymbolKind.Module;\n            case 'string':\n                return SymbolKind.String;\n            case 'number':\n                return SymbolKind.Number;\n            case 'array':\n                return SymbolKind.Array;\n            case 'boolean':\n                return SymbolKind.Boolean;\n            default: // 'null'\n                return SymbolKind.Variable;\n        }\n    };\n    JSONDocumentSymbols.prototype.getSymbolDetail = function (nodeType) {\n        switch (nodeType) {\n            case 'object':\n                return localize('kind.object', 'object');\n            case 'string':\n                return localize('kind.string', 'string');\n            case 'number':\n                return localize('kind.number', 'number');\n            case 'array':\n                return localize('kind.array', 'array');\n            case 'boolean':\n                return localize('kind.boolean', 'boolean');\n            default: // 'null'\n                return localize('kind.null', 'null');\n        }\n    };\n    JSONDocumentSymbols.prototype.findDocumentColors = function (document, doc) {\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            var result = [];\n            if (schema) {\n                var matchingSchemas = doc.getMatchingSchemas(schema.schema);\n                var visitedNode = {};\n                for (var _i = 0, matchingSchemas_1 = matchingSchemas; _i < matchingSchemas_1.length; _i++) {\n                    var s = matchingSchemas_1[_i];\n                    if (!s.inverted && s.schema && (s.schema.format === 'color' || s.schema.format === 'color-hex') && s.node && s.node.type === 'string') {\n                        var nodeId = String(s.node.offset);\n                        if (!visitedNode[nodeId]) {\n                            var color = colorFromHex(Parser.getNodeValue(s.node));\n                            if (color) {\n                                var range = getRange(document, s.node);\n                                result.push({ color: color, range: range });\n                            }\n                            visitedNode[nodeId] = true;\n                        }\n                    }\n                }\n            }\n            return result;\n        });\n    };\n    JSONDocumentSymbols.prototype.getColorPresentations = function (document, doc, color, range) {\n        var result = [];\n        var red256 = Math.round(color.red * 255), green256 = Math.round(color.green * 255), blue256 = Math.round(color.blue * 255);\n        function toTwoDigitHex(n) {\n            var r = n.toString(16);\n            return r.length !== 2 ? '0' + r : r;\n        }\n        var label;\n        if (color.alpha === 1) {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256);\n        }\n        else {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256) + toTwoDigitHex(Math.round(color.alpha * 255));\n        }\n        result.push({ label: label, textEdit: TextEdit.replace(range, JSON.stringify(label)) });\n        return result;\n    };\n    return JSONDocumentSymbols;\n}());\nexport { JSONDocumentSymbols };\nfunction getRange(document, node) {\n    return Range.create(document.positionAt(node.offset), document.positionAt(node.offset + node.length));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nexport var schemaContributions = {\n    schemaAssociations: {},\n    schemas: {\n        // bundle the schema-schema to include (localized) descriptions\n        'http://json-schema.org/draft-04/schema#': {\n            'title': localize('schema.json', 'Describes a JSON file using a schema. See json-schema.org for more info.'),\n            '$schema': 'http://json-schema.org/draft-04/schema#',\n            'definitions': {\n                'schemaArray': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'items': { '$ref': '#' }\n                },\n                'positiveInteger': {\n                    'type': 'integer',\n                    'minimum': 0\n                },\n                'positiveIntegerDefault0': {\n                    'allOf': [{ '$ref': '#/definitions/positiveInteger' }, { 'default': 0 }]\n                },\n                'simpleTypes': {\n                    'type': 'string',\n                    'enum': ['array', 'boolean', 'integer', 'null', 'number', 'object', 'string']\n                },\n                'stringArray': {\n                    'type': 'array',\n                    'items': { 'type': 'string' },\n                    'minItems': 1,\n                    'uniqueItems': true\n                }\n            },\n            'type': 'object',\n            'properties': {\n                'id': {\n                    'type': 'string',\n                    'format': 'uri',\n                    'description': localize('schema.json.id', 'A unique identifier for the schema.')\n                },\n                '$schema': {\n                    'type': 'string',\n                    'format': 'uri',\n                    'description': localize('schema.json.$schema', 'The schema to verify this document against ')\n                },\n                'title': {\n                    'type': 'string',\n                    'description': localize('schema.json.title', 'A descriptive title of the element')\n                },\n                'description': {\n                    'type': 'string',\n                    'description': localize('schema.json.description', 'A long description of the element. Used in hover menus and suggestions.')\n                },\n                'default': {\n                    'description': localize('schema.json.default', 'A default value. Used by suggestions.')\n                },\n                'multipleOf': {\n                    'type': 'number',\n                    'minimum': 0,\n                    'exclusiveMinimum': true,\n                    'description': localize('schema.json.multipleOf', 'A number that should cleanly divide the current value (i.e. have no remainder)')\n                },\n                'maximum': {\n                    'type': 'number',\n                    'description': localize('schema.json.maximum', 'The maximum numerical value, inclusive by default.')\n                },\n                'exclusiveMaximum': {\n                    'type': 'boolean',\n                    'default': false,\n                    'description': localize('schema.json.exclusiveMaximum', 'Makes the maximum property exclusive.')\n                },\n                'minimum': {\n                    'type': 'number',\n                    'description': localize('schema.json.minimum', 'The minimum numerical value, inclusive by default.')\n                },\n                'exclusiveMinimum': {\n                    'type': 'boolean',\n                    'default': false,\n                    'description': localize('schema.json.exclusiveMininum', 'Makes the minimum property exclusive.')\n                },\n                'maxLength': {\n                    'allOf': [\n                        { '$ref': '#/definitions/positiveInteger' }\n                    ],\n                    'description': localize('schema.json.maxLength', 'The maximum length of a string.')\n                },\n                'minLength': {\n                    'allOf': [\n                        { '$ref': '#/definitions/positiveIntegerDefault0' }\n                    ],\n                    'description': localize('schema.json.minLength', 'The minimum length of a string.')\n                },\n                'pattern': {\n                    'type': 'string',\n                    'format': 'regex',\n                    'description': localize('schema.json.pattern', 'A regular expression to match the string against. It is not implicitly anchored.')\n                },\n                'additionalItems': {\n                    'anyOf': [\n                        { 'type': 'boolean' },\n                        { '$ref': '#' }\n                    ],\n                    'default': {},\n                    'description': localize('schema.json.additionalItems', 'For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail.')\n                },\n                'items': {\n                    'anyOf': [\n                        { '$ref': '#' },\n                        { '$ref': '#/definitions/schemaArray' }\n                    ],\n                    'default': {},\n                    'description': localize('schema.json.items', 'For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on.')\n                },\n                'maxItems': {\n                    'allOf': [\n                        { '$ref': '#/definitions/positiveInteger' }\n                    ],\n                    'description': localize('schema.json.maxItems', 'The maximum number of items that can be inside an array. Inclusive.')\n                },\n                'minItems': {\n                    'allOf': [\n                        { '$ref': '#/definitions/positiveIntegerDefault0' }\n                    ],\n                    'description': localize('schema.json.minItems', 'The minimum number of items that can be inside an array. Inclusive.')\n                },\n                'uniqueItems': {\n                    'type': 'boolean',\n                    'default': false,\n                    'description': localize('schema.json.uniqueItems', 'If all of the items in the array must be unique. Defaults to false.')\n                },\n                'maxProperties': {\n                    'allOf': [\n                        { '$ref': '#/definitions/positiveInteger' }\n                    ],\n                    'description': localize('schema.json.maxProperties', 'The maximum number of properties an object can have. Inclusive.')\n                },\n                'minProperties': {\n                    'allOf': [\n                        { '$ref': '#/definitions/positiveIntegerDefault0' },\n                    ],\n                    'description': localize('schema.json.minProperties', 'The minimum number of properties an object can have. Inclusive.')\n                },\n                'required': {\n                    'allOf': [\n                        { '$ref': '#/definitions/stringArray' }\n                    ],\n                    'description': localize('schema.json.required', 'An array of strings that lists the names of all properties required on this object.')\n                },\n                'additionalProperties': {\n                    'anyOf': [\n                        { 'type': 'boolean' },\n                        { '$ref': '#' }\n                    ],\n                    'default': {},\n                    'description': localize('schema.json.additionalProperties', 'Either a schema or a boolean. If a schema, then used to validate all properties not matched by \\'properties\\' or \\'patternProperties\\'. If false, then any properties not matched by either will cause this schema to fail.')\n                },\n                'definitions': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'default': {},\n                    'description': localize('schema.json.definitions', 'Not used for validation. Place subschemas here that you wish to reference inline with $ref')\n                },\n                'properties': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'default': {},\n                    'description': localize('schema.json.properties', 'A map of property names to schemas for each property.')\n                },\n                'patternProperties': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'default': {},\n                    'description': localize('schema.json.patternProperties', 'A map of regular expressions on property names to schemas for matching properties.')\n                },\n                'dependencies': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        'anyOf': [\n                            { '$ref': '#' },\n                            { '$ref': '#/definitions/stringArray' }\n                        ]\n                    },\n                    'description': localize('schema.json.dependencies', 'A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object.')\n                },\n                'enum': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'uniqueItems': true,\n                    'description': localize('schema.json.enum', 'The set of literal values that are valid')\n                },\n                'type': {\n                    'anyOf': [\n                        { '$ref': '#/definitions/simpleTypes' },\n                        {\n                            'type': 'array',\n                            'items': { '$ref': '#/definitions/simpleTypes' },\n                            'minItems': 1,\n                            'uniqueItems': true\n                        }\n                    ],\n                    'description': localize('schema.json.type', 'Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types.')\n                },\n                'format': {\n                    'anyOf': [\n                        {\n                            'type': 'string',\n                            'description': localize('schema.json.format', 'Describes the format expected for the value.'),\n                            'enum': ['date-time', 'uri', 'email', 'hostname', 'ipv4', 'ipv6', 'regex']\n                        }, {\n                            'type': 'string'\n                        }\n                    ]\n                },\n                'allOf': {\n                    'allOf': [\n                        { '$ref': '#/definitions/schemaArray' }\n                    ],\n                    'description': localize('schema.json.allOf', 'An array of schemas, all of which must match.')\n                },\n                'anyOf': {\n                    'allOf': [\n                        { '$ref': '#/definitions/schemaArray' }\n                    ],\n                    'description': localize('schema.json.anyOf', 'An array of schemas, where at least one must match.')\n                },\n                'oneOf': {\n                    'allOf': [\n                        { '$ref': '#/definitions/schemaArray' }\n                    ],\n                    'description': localize('schema.json.oneOf', 'An array of schemas, exactly one of which must match.')\n                },\n                'not': {\n                    'allOf': [\n                        { '$ref': '#' }\n                    ],\n                    'description': localize('schema.json.not', 'A schema which must not match.')\n                }\n            },\n            'dependencies': {\n                'exclusiveMaximum': ['maximum'],\n                'exclusiveMinimum': ['minimum']\n            },\n            'default': {}\n        }\n    }\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as Json from './../../jsonc-parser/main.js';\nimport URI from './../../vscode-uri/index.js';\nimport * as Strings from '../utils/strings.js';\nimport * as Parser from '../parser/jsonParser.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar FilePatternAssociation = /** @class */ (function () {\n    function FilePatternAssociation(pattern) {\n        try {\n            this.patternRegExp = new RegExp(Strings.convertSimple2RegExpPattern(pattern) + '$');\n        }\n        catch (e) {\n            // invalid pattern\n            this.patternRegExp = null;\n        }\n        this.schemas = [];\n    }\n    FilePatternAssociation.prototype.addSchema = function (id) {\n        this.schemas.push(id);\n    };\n    FilePatternAssociation.prototype.matchesPattern = function (fileName) {\n        return this.patternRegExp && this.patternRegExp.test(fileName);\n    };\n    FilePatternAssociation.prototype.getSchemas = function () {\n        return this.schemas;\n    };\n    return FilePatternAssociation;\n}());\nvar SchemaHandle = /** @class */ (function () {\n    function SchemaHandle(service, url, unresolvedSchemaContent) {\n        this.service = service;\n        this.url = url;\n        if (unresolvedSchemaContent) {\n            this.unresolvedSchema = this.service.promise.resolve(new UnresolvedSchema(unresolvedSchemaContent));\n        }\n    }\n    SchemaHandle.prototype.getUnresolvedSchema = function () {\n        if (!this.unresolvedSchema) {\n            this.unresolvedSchema = this.service.loadSchema(this.url);\n        }\n        return this.unresolvedSchema;\n    };\n    SchemaHandle.prototype.getResolvedSchema = function () {\n        var _this = this;\n        if (!this.resolvedSchema) {\n            this.resolvedSchema = this.getUnresolvedSchema().then(function (unresolved) {\n                return _this.service.resolveSchemaContent(unresolved, _this.url);\n            });\n        }\n        return this.resolvedSchema;\n    };\n    SchemaHandle.prototype.clearSchema = function () {\n        this.resolvedSchema = null;\n        this.unresolvedSchema = null;\n    };\n    return SchemaHandle;\n}());\nvar UnresolvedSchema = /** @class */ (function () {\n    function UnresolvedSchema(schema, errors) {\n        if (errors === void 0) { errors = []; }\n        this.schema = schema;\n        this.errors = errors;\n    }\n    return UnresolvedSchema;\n}());\nexport { UnresolvedSchema };\nvar ResolvedSchema = /** @class */ (function () {\n    function ResolvedSchema(schema, errors) {\n        if (errors === void 0) { errors = []; }\n        this.schema = schema;\n        this.errors = errors;\n    }\n    ResolvedSchema.prototype.getSection = function (path) {\n        return Parser.asSchema(this.getSectionRecursive(path, this.schema));\n    };\n    ResolvedSchema.prototype.getSectionRecursive = function (path, schema) {\n        var _this = this;\n        if (!schema || typeof schema === 'boolean' || path.length === 0) {\n            return schema;\n        }\n        var next = path.shift();\n        if (schema.properties && typeof schema.properties[next]) {\n            return this.getSectionRecursive(path, schema.properties[next]);\n        }\n        else if (schema.patternProperties) {\n            Object.keys(schema.patternProperties).forEach(function (pattern) {\n                var regex = new RegExp(pattern);\n                if (regex.test(next)) {\n                    return _this.getSectionRecursive(path, schema.patternProperties[pattern]);\n                }\n            });\n        }\n        else if (typeof schema.additionalProperties === 'object') {\n            return this.getSectionRecursive(path, schema.additionalProperties);\n        }\n        else if (next.match('[0-9]+')) {\n            if (Array.isArray(schema.items)) {\n                var index = parseInt(next, 10);\n                if (!isNaN(index) && schema.items[index]) {\n                    return this.getSectionRecursive(path, schema.items[index]);\n                }\n            }\n            else if (schema.items) {\n                return this.getSectionRecursive(path, schema.items);\n            }\n        }\n        return null;\n    };\n    return ResolvedSchema;\n}());\nexport { ResolvedSchema };\nvar JSONSchemaService = /** @class */ (function () {\n    function JSONSchemaService(requestService, contextService, promiseConstructor) {\n        this.contextService = contextService;\n        this.requestService = requestService;\n        this.promiseConstructor = promiseConstructor || Promise;\n        this.callOnDispose = [];\n        this.contributionSchemas = {};\n        this.contributionAssociations = {};\n        this.schemasById = {};\n        this.filePatternAssociations = [];\n        this.filePatternAssociationById = {};\n        this.registeredSchemasIds = {};\n    }\n    JSONSchemaService.prototype.getRegisteredSchemaIds = function (filter) {\n        return Object.keys(this.registeredSchemasIds).filter(function (id) {\n            var scheme = URI.parse(id).scheme;\n            return scheme !== 'schemaservice' && (!filter || filter(scheme));\n        });\n    };\n    Object.defineProperty(JSONSchemaService.prototype, \"promise\", {\n        get: function () {\n            return this.promiseConstructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    JSONSchemaService.prototype.dispose = function () {\n        while (this.callOnDispose.length > 0) {\n            this.callOnDispose.pop()();\n        }\n    };\n    JSONSchemaService.prototype.onResourceChange = function (uri) {\n        uri = this.normalizeId(uri);\n        var schemaFile = this.schemasById[uri];\n        if (schemaFile) {\n            schemaFile.clearSchema();\n            return true;\n        }\n        return false;\n    };\n    JSONSchemaService.prototype.normalizeId = function (id) {\n        // remove trailing '#', normalize drive capitalization\n        return URI.parse(id).toString();\n    };\n    JSONSchemaService.prototype.setSchemaContributions = function (schemaContributions) {\n        var _this = this;\n        if (schemaContributions.schemas) {\n            var schemas = schemaContributions.schemas;\n            for (var id in schemas) {\n                var normalizedId = this.normalizeId(id);\n                this.contributionSchemas[normalizedId] = this.addSchemaHandle(normalizedId, schemas[id]);\n            }\n        }\n        if (schemaContributions.schemaAssociations) {\n            var schemaAssociations = schemaContributions.schemaAssociations;\n            for (var pattern in schemaAssociations) {\n                var associations = schemaAssociations[pattern];\n                this.contributionAssociations[pattern] = associations;\n                var fpa = this.getOrAddFilePatternAssociation(pattern);\n                associations.forEach(function (schemaId) {\n                    var id = _this.normalizeId(schemaId);\n                    fpa.addSchema(id);\n                });\n            }\n        }\n    };\n    JSONSchemaService.prototype.addSchemaHandle = function (id, unresolvedSchemaContent) {\n        var schemaHandle = new SchemaHandle(this, id, unresolvedSchemaContent);\n        this.schemasById[id] = schemaHandle;\n        return schemaHandle;\n    };\n    JSONSchemaService.prototype.getOrAddSchemaHandle = function (id, unresolvedSchemaContent) {\n        return this.schemasById[id] || this.addSchemaHandle(id, unresolvedSchemaContent);\n    };\n    JSONSchemaService.prototype.getOrAddFilePatternAssociation = function (pattern) {\n        var fpa = this.filePatternAssociationById[pattern];\n        if (!fpa) {\n            fpa = new FilePatternAssociation(pattern);\n            this.filePatternAssociationById[pattern] = fpa;\n            this.filePatternAssociations.push(fpa);\n        }\n        return fpa;\n    };\n    JSONSchemaService.prototype.registerExternalSchema = function (uri, filePatterns, unresolvedSchemaContent) {\n        var _this = this;\n        if (filePatterns === void 0) { filePatterns = null; }\n        var id = this.normalizeId(uri);\n        this.registeredSchemasIds[id] = true;\n        if (filePatterns) {\n            filePatterns.forEach(function (pattern) {\n                _this.getOrAddFilePatternAssociation(pattern).addSchema(id);\n            });\n        }\n        return unresolvedSchemaContent ? this.addSchemaHandle(id, unresolvedSchemaContent) : this.getOrAddSchemaHandle(id);\n    };\n    JSONSchemaService.prototype.clearExternalSchemas = function () {\n        var _this = this;\n        this.schemasById = {};\n        this.filePatternAssociations = [];\n        this.filePatternAssociationById = {};\n        this.registeredSchemasIds = {};\n        for (var id in this.contributionSchemas) {\n            this.schemasById[id] = this.contributionSchemas[id];\n            this.registeredSchemasIds[id] = true;\n        }\n        for (var pattern in this.contributionAssociations) {\n            var fpa = this.getOrAddFilePatternAssociation(pattern);\n            this.contributionAssociations[pattern].forEach(function (schemaId) {\n                var id = _this.normalizeId(schemaId);\n                fpa.addSchema(id);\n            });\n        }\n    };\n    JSONSchemaService.prototype.getResolvedSchema = function (schemaId) {\n        var id = this.normalizeId(schemaId);\n        var schemaHandle = this.schemasById[id];\n        if (schemaHandle) {\n            return schemaHandle.getResolvedSchema();\n        }\n        return this.promise.resolve(null);\n    };\n    JSONSchemaService.prototype.loadSchema = function (url) {\n        if (!this.requestService) {\n            var errorMessage = localize('json.schema.norequestservice', 'Unable to load schema from \\'{0}\\'. No schema request service available', toDisplayString(url));\n            return this.promise.resolve(new UnresolvedSchema({}, [errorMessage]));\n        }\n        return this.requestService(url).then(function (content) {\n            if (!content) {\n                var errorMessage = localize('json.schema.nocontent', 'Unable to load schema from \\'{0}\\': No content.', toDisplayString(url));\n                return new UnresolvedSchema({}, [errorMessage]);\n            }\n            var schemaContent = {};\n            var jsonErrors = [];\n            schemaContent = Json.parse(content, jsonErrors);\n            var errors = jsonErrors.length ? [localize('json.schema.invalidFormat', 'Unable to parse content from \\'{0}\\': Parse error at offset {1}.', toDisplayString(url), jsonErrors[0].offset)] : [];\n            return new UnresolvedSchema(schemaContent, errors);\n        }, function (error) {\n            var errorMessage = localize('json.schema.unabletoload', 'Unable to load schema from \\'{0}\\': {1}', toDisplayString(url), error.toString());\n            return new UnresolvedSchema({}, [errorMessage]);\n        });\n    };\n    JSONSchemaService.prototype.resolveSchemaContent = function (schemaToResolve, schemaURL) {\n        var _this = this;\n        var resolveErrors = schemaToResolve.errors.slice(0);\n        var schema = schemaToResolve.schema;\n        var contextService = this.contextService;\n        var findSection = function (schema, path) {\n            if (!path) {\n                return schema;\n            }\n            var current = schema;\n            if (path[0] === '/') {\n                path = path.substr(1);\n            }\n            path.split('/').some(function (part) {\n                current = current[part];\n                return !current;\n            });\n            return current;\n        };\n        var merge = function (target, sourceRoot, sourceURI, path) {\n            var section = findSection(sourceRoot, path);\n            if (section) {\n                for (var key in section) {\n                    if (section.hasOwnProperty(key) && !target.hasOwnProperty(key)) {\n                        target[key] = section[key];\n                    }\n                }\n            }\n            else {\n                resolveErrors.push(localize('json.schema.invalidref', '$ref \\'{0}\\' in \\'{1}\\' can not be resolved.', path, sourceURI));\n            }\n        };\n        var resolveExternalLink = function (node, uri, linkPath, parentSchemaURL) {\n            if (contextService && !/^\\w+:\\/\\/.*/.test(uri)) {\n                uri = contextService.resolveRelativePath(uri, parentSchemaURL);\n            }\n            uri = _this.normalizeId(uri);\n            return _this.getOrAddSchemaHandle(uri).getUnresolvedSchema().then(function (unresolvedSchema) {\n                if (unresolvedSchema.errors.length) {\n                    var loc = linkPath ? uri + '#' + linkPath : uri;\n                    resolveErrors.push(localize('json.schema.problemloadingref', 'Problems loading reference \\'{0}\\': {1}', loc, unresolvedSchema.errors[0]));\n                }\n                merge(node, unresolvedSchema.schema, uri, linkPath);\n                return resolveRefs(node, unresolvedSchema.schema, uri);\n            });\n        };\n        var resolveRefs = function (node, parentSchema, parentSchemaURL) {\n            if (!node || typeof node !== 'object') {\n                return Promise.resolve(null);\n            }\n            var toWalk = [node];\n            var seen = [];\n            var openPromises = [];\n            var collectEntries = function () {\n                var entries = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    entries[_i] = arguments[_i];\n                }\n                for (var _a = 0, entries_1 = entries; _a < entries_1.length; _a++) {\n                    var entry = entries_1[_a];\n                    if (typeof entry === 'object') {\n                        toWalk.push(entry);\n                    }\n                }\n            };\n            var collectMapEntries = function () {\n                var maps = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    maps[_i] = arguments[_i];\n                }\n                for (var _a = 0, maps_1 = maps; _a < maps_1.length; _a++) {\n                    var map = maps_1[_a];\n                    if (typeof map === 'object') {\n                        for (var key in map) {\n                            var entry = map[key];\n                            if (typeof entry === 'object') {\n                                toWalk.push(entry);\n                            }\n                        }\n                    }\n                }\n            };\n            var collectArrayEntries = function () {\n                var arrays = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    arrays[_i] = arguments[_i];\n                }\n                for (var _a = 0, arrays_1 = arrays; _a < arrays_1.length; _a++) {\n                    var array = arrays_1[_a];\n                    if (Array.isArray(array)) {\n                        for (var _b = 0, array_1 = array; _b < array_1.length; _b++) {\n                            var entry = array_1[_b];\n                            if (typeof entry === 'object') {\n                                toWalk.push(entry);\n                            }\n                        }\n                    }\n                }\n            };\n            var handleRef = function (next) {\n                while (next.$ref) {\n                    var segments = next.$ref.split('#', 2);\n                    delete next.$ref;\n                    if (segments[0].length > 0) {\n                        openPromises.push(resolveExternalLink(next, segments[0], segments[1], parentSchemaURL));\n                        return;\n                    }\n                    else {\n                        merge(next, parentSchema, parentSchemaURL, segments[1]); // can set next.$ref again\n                    }\n                }\n                collectEntries(next.items, next.additionalProperties, next.not, next.contains, next.propertyNames, next.if, next.then, next.else);\n                collectMapEntries(next.definitions, next.properties, next.patternProperties, next.dependencies);\n                collectArrayEntries(next.anyOf, next.allOf, next.oneOf, next.items);\n            };\n            while (toWalk.length) {\n                var next = toWalk.pop();\n                if (seen.indexOf(next) >= 0) {\n                    continue;\n                }\n                seen.push(next);\n                handleRef(next);\n            }\n            return _this.promise.all(openPromises);\n        };\n        return resolveRefs(schema, schema, schemaURL).then(function (_) { return new ResolvedSchema(schema, resolveErrors); });\n    };\n    JSONSchemaService.prototype.getSchemaForResource = function (resource, document) {\n        // first use $schema if present\n        if (document && document.root && document.root.type === 'object') {\n            var schemaProperties = document.root.properties.filter(function (p) { return (p.keyNode.value === '$schema') && p.valueNode && p.valueNode.type === 'string'; });\n            if (schemaProperties.length > 0) {\n                var schemeId = Parser.getNodeValue(schemaProperties[0].valueNode);\n                if (schemeId && Strings.startsWith(schemeId, '.') && this.contextService) {\n                    schemeId = this.contextService.resolveRelativePath(schemeId, resource);\n                }\n                if (schemeId) {\n                    var id = this.normalizeId(schemeId);\n                    return this.getOrAddSchemaHandle(id).getResolvedSchema();\n                }\n            }\n        }\n        var seen = Object.create(null);\n        var schemas = [];\n        for (var _i = 0, _a = this.filePatternAssociations; _i < _a.length; _i++) {\n            var entry = _a[_i];\n            if (entry.matchesPattern(resource)) {\n                for (var _b = 0, _c = entry.getSchemas(); _b < _c.length; _b++) {\n                    var schemaId = _c[_b];\n                    if (!seen[schemaId]) {\n                        schemas.push(schemaId);\n                        seen[schemaId] = true;\n                    }\n                }\n            }\n        }\n        if (schemas.length > 0) {\n            return this.createCombinedSchema(resource, schemas).getResolvedSchema();\n        }\n        return this.promise.resolve(null);\n    };\n    JSONSchemaService.prototype.createCombinedSchema = function (resource, schemaIds) {\n        if (schemaIds.length === 1) {\n            return this.getOrAddSchemaHandle(schemaIds[0]);\n        }\n        else {\n            var combinedSchemaId = 'schemaservice://combinedSchema/' + encodeURIComponent(resource);\n            var combinedSchema = {\n                allOf: schemaIds.map(function (schemaId) { return ({ $ref: schemaId }); })\n            };\n            return this.addSchemaHandle(combinedSchemaId, combinedSchema);\n        }\n    };\n    return JSONSchemaService;\n}());\nexport { JSONSchemaService };\nfunction toDisplayString(url) {\n    try {\n        var uri = URI.parse(url);\n        if (uri.scheme === 'file') {\n            return uri.fsPath;\n        }\n    }\n    catch (e) {\n        // ignore\n    }\n    return url;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { Position } from './../../vscode-languageserver-types/main.js';\nimport { createScanner } from './../../jsonc-parser/main.js';\nimport { FoldingRangeKind } from '../jsonLanguageTypes.js';\nexport function getFoldingRanges(document, context) {\n    var ranges = [];\n    var nestingLevels = [];\n    var stack = [];\n    var prevStart = -1;\n    var scanner = createScanner(document.getText(), false);\n    var token = scanner.scan();\n    function addRange(range) {\n        ranges.push(range);\n        nestingLevels.push(stack.length);\n    }\n    while (token !== 17 /* EOF */) {\n        switch (token) {\n            case 1 /* OpenBraceToken */:\n            case 3 /* OpenBracketToken */: {\n                var startLine = document.positionAt(scanner.getTokenOffset()).line;\n                var range = { startLine: startLine, endLine: startLine, kind: token === 1 /* OpenBraceToken */ ? 'object' : 'array' };\n                stack.push(range);\n                break;\n            }\n            case 2 /* CloseBraceToken */:\n            case 4 /* CloseBracketToken */: {\n                var kind = token === 2 /* CloseBraceToken */ ? 'object' : 'array';\n                if (stack.length > 0 && stack[stack.length - 1].kind === kind) {\n                    var range = stack.pop();\n                    var line = document.positionAt(scanner.getTokenOffset()).line;\n                    if (range && line > range.startLine + 1 && prevStart !== range.startLine) {\n                        range.endLine = line - 1;\n                        addRange(range);\n                        prevStart = range.startLine;\n                    }\n                }\n                break;\n            }\n            case 13 /* BlockCommentTrivia */: {\n                var startLine = document.positionAt(scanner.getTokenOffset()).line;\n                var endLine = document.positionAt(scanner.getTokenOffset() + scanner.getTokenLength()).line;\n                if (scanner.getTokenError() === 1 /* UnexpectedEndOfComment */ && startLine + 1 < document.lineCount) {\n                    scanner.setPosition(document.offsetAt(Position.create(startLine + 1, 0)));\n                }\n                else {\n                    if (startLine < endLine) {\n                        addRange({ startLine: startLine, endLine: endLine, kind: FoldingRangeKind.Comment });\n                        prevStart = startLine;\n                    }\n                }\n                break;\n            }\n            case 12 /* LineCommentTrivia */: {\n                var text = document.getText().substr(scanner.getTokenOffset(), scanner.getTokenLength());\n                var m = text.match(/^\\/\\/\\s*#(region\\b)|(endregion\\b)/);\n                if (m) {\n                    var line = document.positionAt(scanner.getTokenOffset()).line;\n                    if (m[1]) { // start pattern match\n                        var range = { startLine: line, endLine: line, kind: FoldingRangeKind.Region };\n                        stack.push(range);\n                    }\n                    else {\n                        var i = stack.length - 1;\n                        while (i >= 0 && stack[i].kind !== FoldingRangeKind.Region) {\n                            i--;\n                        }\n                        if (i >= 0) {\n                            var range = stack[i];\n                            stack.length = i;\n                            if (line > range.startLine && prevStart !== range.startLine) {\n                                range.endLine = line;\n                                addRange(range);\n                                prevStart = range.startLine;\n                            }\n                        }\n                    }\n                }\n                break;\n            }\n        }\n        token = scanner.scan();\n    }\n    var rangeLimit = context && context.rangeLimit;\n    if (typeof rangeLimit !== 'number' || ranges.length <= rangeLimit) {\n        return ranges;\n    }\n    var counts = [];\n    for (var _i = 0, nestingLevels_1 = nestingLevels; _i < nestingLevels_1.length; _i++) {\n        var level = nestingLevels_1[_i];\n        if (level < 30) {\n            counts[level] = (counts[level] || 0) + 1;\n        }\n    }\n    var entries = 0;\n    var maxLevel = 0;\n    for (var i = 0; i < counts.length; i++) {\n        var n = counts[i];\n        if (n) {\n            if (n + entries > rangeLimit) {\n                maxLevel = i;\n                break;\n            }\n            entries += n;\n        }\n    }\n    var result = [];\n    for (var i = 0; i < ranges.length; i++) {\n        var level = nestingLevels[i];\n        if (typeof level === 'number') {\n            if (level < maxLevel || (level === maxLevel && entries++ < rangeLimit)) {\n                result.push(ranges[i]);\n            }\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { TextDocument, Position, CompletionItem, CompletionList, Hover, Range, SymbolInformation, Diagnostic, TextEdit, FormattingOptions, MarkedString } from './../vscode-languageserver-types/main.js';\nimport { JSONCompletion } from './services/jsonCompletion.js';\nimport { JSONHover } from './services/jsonHover.js';\nimport { JSONValidation } from './services/jsonValidation.js';\nimport { JSONDocumentSymbols } from './services/jsonDocumentSymbols.js';\nimport { parse as parseJSON, newJSONDocument } from './parser/jsonParser.js';\nimport { schemaContributions } from './services/configuration.js';\nimport { JSONSchemaService } from './services/jsonSchemaService.js';\nimport { getFoldingRanges } from './services/jsonFolding.js';\nimport { format as formatJSON } from './../jsonc-parser/main.js';\nexport * from './jsonLanguageTypes.js';\nexport { TextDocument, Position, CompletionItem, CompletionList, Hover, Range, SymbolInformation, Diagnostic, TextEdit, FormattingOptions, MarkedString };\nexport function getLanguageService(params) {\n    var promise = params.promiseConstructor || Promise;\n    var jsonSchemaService = new JSONSchemaService(params.schemaRequestService, params.workspaceContext, promise);\n    jsonSchemaService.setSchemaContributions(schemaContributions);\n    var jsonCompletion = new JSONCompletion(jsonSchemaService, params.contributions, promise);\n    var jsonHover = new JSONHover(jsonSchemaService, params.contributions, promise);\n    var jsonDocumentSymbols = new JSONDocumentSymbols(jsonSchemaService);\n    var jsonValidation = new JSONValidation(jsonSchemaService, promise);\n    return {\n        configure: function (settings) {\n            jsonSchemaService.clearExternalSchemas();\n            if (settings.schemas) {\n                settings.schemas.forEach(function (settings) {\n                    jsonSchemaService.registerExternalSchema(settings.uri, settings.fileMatch, settings.schema);\n                });\n            }\n            jsonValidation.configure(settings);\n        },\n        resetSchema: function (uri) { return jsonSchemaService.onResourceChange(uri); },\n        doValidation: jsonValidation.doValidation.bind(jsonValidation),\n        parseJSONDocument: function (document) { return parseJSON(document, { collectComments: true }); },\n        newJSONDocument: function (root, diagnostics) { return newJSONDocument(root, diagnostics); },\n        doResolve: jsonCompletion.doResolve.bind(jsonCompletion),\n        doComplete: jsonCompletion.doComplete.bind(jsonCompletion),\n        findDocumentSymbols: jsonDocumentSymbols.findDocumentSymbols.bind(jsonDocumentSymbols),\n        findDocumentSymbols2: jsonDocumentSymbols.findDocumentSymbols2.bind(jsonDocumentSymbols),\n        findColorSymbols: function (d, s) { return jsonDocumentSymbols.findDocumentColors(d, s).then(function (s) { return s.map(function (s) { return s.range; }); }); },\n        findDocumentColors: jsonDocumentSymbols.findDocumentColors.bind(jsonDocumentSymbols),\n        getColorPresentations: jsonDocumentSymbols.getColorPresentations.bind(jsonDocumentSymbols),\n        doHover: jsonHover.doHover.bind(jsonHover),\n        getFoldingRanges: getFoldingRanges,\n        format: function (d, r, o) {\n            var range = void 0;\n            if (r) {\n                var offset = d.offsetAt(r.start);\n                var length = d.offsetAt(r.end) - offset;\n                range = { offset: offset, length: length };\n            }\n            var options = { tabSize: o ? o.tabSize : 4, insertSpaces: o ? o.insertSpaces : true, eol: '\\n' };\n            return formatJSON(d.getText(), range, options).map(function (e) {\n                return TextEdit.replace(Range.create(d.positionAt(e.offset), d.positionAt(e.offset + e.length)), e.content);\n            });\n        }\n    };\n}\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar Promise = monaco.Promise;\r\nimport * as jsonService from './_deps/vscode-json-languageservice/jsonLanguageService.js';\r\nimport * as ls from './_deps/vscode-languageserver-types/main.js';\r\nvar defaultSchemaRequestService;\r\nif (typeof fetch !== 'undefined') {\r\n    defaultSchemaRequestService = function (url) { return fetch(url).then(function (response) { return response.text(); }); };\r\n}\r\nvar PromiseAdapter = /** @class */ (function () {\r\n    function PromiseAdapter(executor) {\r\n        this.wrapped = new monaco.Promise(executor);\r\n    }\r\n    PromiseAdapter.prototype.then = function (onfulfilled, onrejected) {\r\n        var thenable = this.wrapped;\r\n        return thenable.then(onfulfilled, onrejected);\r\n    };\r\n    PromiseAdapter.prototype.getWrapped = function () {\r\n        return this.wrapped;\r\n    };\r\n    PromiseAdapter.resolve = function (v) {\r\n        return monaco.Promise.as(v);\r\n    };\r\n    PromiseAdapter.reject = function (v) {\r\n        return monaco.Promise.wrapError(v);\r\n    };\r\n    PromiseAdapter.all = function (values) {\r\n        return monaco.Promise.join(values);\r\n    };\r\n    return PromiseAdapter;\r\n}());\r\nvar JSONWorker = /** @class */ (function () {\r\n    function JSONWorker(ctx, createData) {\r\n        this._ctx = ctx;\r\n        this._languageSettings = createData.languageSettings;\r\n        this._languageId = createData.languageId;\r\n        this._languageService = jsonService.getLanguageService({\r\n            schemaRequestService: createData.enableSchemaRequest && defaultSchemaRequestService,\r\n            promiseConstructor: PromiseAdapter\r\n        });\r\n        this._languageService.configure(this._languageSettings);\r\n    }\r\n    JSONWorker.prototype.doValidation = function (uri) {\r\n        var document = this._getTextDocument(uri);\r\n        if (document) {\r\n            var jsonDocument = this._languageService.parseJSONDocument(document);\r\n            return this._languageService.doValidation(document, jsonDocument);\r\n        }\r\n        return Promise.as([]);\r\n    };\r\n    JSONWorker.prototype.doComplete = function (uri, position) {\r\n        var document = this._getTextDocument(uri);\r\n        var jsonDocument = this._languageService.parseJSONDocument(document);\r\n        return this._languageService.doComplete(document, position, jsonDocument);\r\n    };\r\n    JSONWorker.prototype.doResolve = function (item) {\r\n        return this._languageService.doResolve(item);\r\n    };\r\n    JSONWorker.prototype.doHover = function (uri, position) {\r\n        var document = this._getTextDocument(uri);\r\n        var jsonDocument = this._languageService.parseJSONDocument(document);\r\n        return this._languageService.doHover(document, position, jsonDocument);\r\n    };\r\n    JSONWorker.prototype.format = function (uri, range, options) {\r\n        var document = this._getTextDocument(uri);\r\n        var textEdits = this._languageService.format(document, range, options);\r\n        return Promise.as(textEdits);\r\n    };\r\n    JSONWorker.prototype.resetSchema = function (uri) {\r\n        return Promise.as(this._languageService.resetSchema(uri));\r\n    };\r\n    JSONWorker.prototype.findDocumentSymbols = function (uri) {\r\n        var document = this._getTextDocument(uri);\r\n        var jsonDocument = this._languageService.parseJSONDocument(document);\r\n        var symbols = this._languageService.findDocumentSymbols(document, jsonDocument);\r\n        return Promise.as(symbols);\r\n    };\r\n    JSONWorker.prototype.findDocumentColors = function (uri) {\r\n        var document = this._getTextDocument(uri);\r\n        var stylesheet = this._languageService.parseJSONDocument(document);\r\n        var colorSymbols = this._languageService.findDocumentColors(document, stylesheet);\r\n        return Promise.as(colorSymbols);\r\n    };\r\n    JSONWorker.prototype.getColorPresentations = function (uri, color, range) {\r\n        var document = this._getTextDocument(uri);\r\n        var stylesheet = this._languageService.parseJSONDocument(document);\r\n        var colorPresentations = this._languageService.getColorPresentations(document, stylesheet, color, range);\r\n        return Promise.as(colorPresentations);\r\n    };\r\n    JSONWorker.prototype.provideFoldingRanges = function (uri, context) {\r\n        var document = this._getTextDocument(uri);\r\n        var ranges = this._languageService.getFoldingRanges(document, context);\r\n        return Promise.as(ranges);\r\n    };\r\n    JSONWorker.prototype._getTextDocument = function (uri) {\r\n        var models = this._ctx.getMirrorModels();\r\n        for (var _i = 0, models_1 = models; _i < models_1.length; _i++) {\r\n            var model = models_1[_i];\r\n            if (model.uri.toString() === uri) {\r\n                return ls.TextDocument.create(uri, this._languageId, model.version, model.getValue());\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    return JSONWorker;\r\n}());\r\nexport { JSONWorker };\r\nexport function create(ctx, createData) {\r\n    return new JSONWorker(ctx, createData);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport * as worker from '../../editor/editor.worker.js';\r\nimport { JSONWorker } from './jsonWorker.js';\r\nself.onmessage = function () {\r\n    // ignore the first message\r\n    worker.initialize(function (ctx, createData) {\r\n        return new JSONWorker(ctx, createData);\r\n    });\r\n};\r\n"]}