{"version":3,"sources":["node_modules/monaco-editor/esm/vs/language/typescript/workerManager.js","node_modules/monaco-editor/esm/vs/language/typescript/languageFeatures.js","node_modules/monaco-editor/esm/vs/language/typescript/tsMode.js"],"names":["WorkerManager","modeId","defaults","_this","_modeId","_defaults","_worker","_idleCheckInterval","setInterval","_checkIfIdle","_lastUsedTime","_configChangeListener","onDidChange","_stopWorker","prototype","dispose","_client","clearInterval","maxIdleTime","getWorkerMaxIdleTime","timePassedSinceLastUsed","Date","now","_getClient","monaco","editor","createWebWorker","moduleId","label","createData","compilerOptions","getCompilerOptions","extraLibs","getExtraLibs","p","getProxy","getEagerModelSync","then","worker","withSyncedResources","getModels","filter","model","getModeId","map","uri","getLanguageServiceWorker","resources","_i","arguments","length","client","_","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","__","constructor","create","Uri","Promise","IndentStyle","flattenDiagnosticMessageText","messageText","newLine","diagnosticChain","result","indent","i","next","displayPartsToString","displayParts","displayPart","text","join","Adapter","_positionToOffset","position","getModel","getOffsetAt","_offsetToPosition","offset","getPositionAt","_textSpanToRange","span","p1","start","p2","startLineNumber","lineNumber","startColumn","column","endLineNumber","endColumn","DiagnostcsAdapter","_super","_selector","call","_disposables","_listener","onModelAdd","handle","changeSubscription","onDidChangeContent","clearTimeout","setTimeout","_doValidate","toString","onModelRemoved","setModelMarkers","key","push","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","_a","forEach","resource","promises","getDiagnosticsOptions","noSyntaxValidation","noSemanticValidation","getSyntacticDiagnostics","getSemanticDiagnostics","diagnostics","markers","reduce","c","concat","_convertDiagnostics","undefined","err","console","error","diag","_b","severity","MarkerSeverity","Error","message","SuggestAdapter","apply","defineProperty","get","enumerable","configurable","provideCompletionItems","_context","token","wordInfo","getWordUntilPosition","getCompletionsAtPosition","info","suggestions","entries","entry","name","insertText","sortText","kind","convertKind","resolveCompletionItem","_model","_position","item","myItem","getCompletionEntryDetails","details","detail","documentation","value","Kind","primitiveType","keyword","languages","CompletionItemKind","Keyword","variable","localVariable","Variable","memberVariable","memberGetAccessor","memberSetAccessor","Field","function","memberFunction","constructSignature","callSignature","indexSignature","Function","enum","Enum","module","Module","class","Class","interface","Interface","warning","File","Property","SignatureHelpAdapter","signatureHelpTriggerCharacters","provideSignatureHelp","getSignatureHelpItems","ret","activeSignature","selectedItemIndex","activeParameter","argumentIndex","signatures","items","signature","parameters","prefixDisplayParts","a","parameter","separatorDisplayParts","suffixDisplayParts","QuickInfoAdapter","provideHover","getQuickInfoAtPosition","tags","tag","match","contents","range","textSpan","OccurrencesAdapter","provideDocumentHighlights","getOccurrencesAtPosition","isWriteAccess","DocumentHighlightKind","Write","Text","DefinitionAdapter","provideDefinition","getDefinitionAtPosition","entries_1","parse","fileName","ReferenceAdapter","provideReferences","context","getReferencesAtPosition","entries_2","OutlineAdapter","provideDocumentSymbols","getNavigationBarItems","convert","bucket","containerLabel","outlineTypeTable","SymbolKind","spans","selectionRange","containerName","childItems","child","unknown","script","type","localFunction","constructorImplementation","typeParameter","alias","const","let","Method","FormatHelper","_convertOptions","options","ConvertTabsToSpaces","insertSpaces","TabSize","tabSize","IndentSize","Smart","NewLineCharacter","InsertSpaceAfterCommaDelimiter","InsertSpaceAfterSemicolonInForStatements","InsertSpaceBeforeAndAfterBinaryOperators","InsertSpaceAfterKeywordsInControlFlowStatements","InsertSpaceAfterFunctionKeywordForAnonymousFunctions","InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","PlaceOpenBraceOnNewLineForControlBlocks","PlaceOpenBraceOnNewLineForFunctions","_convertTextChanges","change","newText","FormatAdapter","provideDocumentRangeFormattingEdits","getFormattingEditsForRange","edits","edit","FormatOnTypeAdapter","provideOnTypeFormattingEdits","ch","getFormattingEditsAfterKeystroke","javaScriptWorker","typeScriptWorker","setupTypeScript","setupMode","setupJavaScript","getJavaScriptWorker","resolve","reject","getTypeScriptWorker","first","more","registerCompletionItemProvider","languageFeatures","registerSignatureHelpProvider","registerHoverProvider","registerDocumentHighlightProvider","registerDefinitionProvider","registerReferenceProvider","registerDocumentSymbolProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider"],"mappings":"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","file":"tsMode.36fe6354.map","sourceRoot":"..","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar WorkerManager = /** @class */ (function () {\r\n    function WorkerManager(modeId, defaults) {\r\n        var _this = this;\r\n        this._modeId = modeId;\r\n        this._defaults = defaults;\r\n        this._worker = null;\r\n        this._idleCheckInterval = setInterval(function () { return _this._checkIfIdle(); }, 30 * 1000);\r\n        this._lastUsedTime = 0;\r\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\r\n    }\r\n    WorkerManager.prototype._stopWorker = function () {\r\n        if (this._worker) {\r\n            this._worker.dispose();\r\n            this._worker = null;\r\n        }\r\n        this._client = null;\r\n    };\r\n    WorkerManager.prototype.dispose = function () {\r\n        clearInterval(this._idleCheckInterval);\r\n        this._configChangeListener.dispose();\r\n        this._stopWorker();\r\n    };\r\n    WorkerManager.prototype._checkIfIdle = function () {\r\n        if (!this._worker) {\r\n            return;\r\n        }\r\n        var maxIdleTime = this._defaults.getWorkerMaxIdleTime();\r\n        var timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\r\n        if (maxIdleTime > 0 && timePassedSinceLastUsed > maxIdleTime) {\r\n            this._stopWorker();\r\n        }\r\n    };\r\n    WorkerManager.prototype._getClient = function () {\r\n        var _this = this;\r\n        this._lastUsedTime = Date.now();\r\n        if (!this._client) {\r\n            this._worker = monaco.editor.createWebWorker({\r\n                // module that exports the create() method and returns a `TypeScriptWorker` instance\r\n                moduleId: 'vs/language/typescript/tsWorker',\r\n                label: this._modeId,\r\n                // passed in to the create() method\r\n                createData: {\r\n                    compilerOptions: this._defaults.getCompilerOptions(),\r\n                    extraLibs: this._defaults.getExtraLibs()\r\n                }\r\n            });\r\n            var p = this._worker.getProxy();\r\n            if (this._defaults.getEagerModelSync()) {\r\n                p = p.then(function (worker) {\r\n                    return _this._worker.withSyncedResources(monaco.editor.getModels()\r\n                        .filter(function (model) { return model.getModeId() === _this._modeId; })\r\n                        .map(function (model) { return model.uri; }));\r\n                });\r\n            }\r\n            this._client = p;\r\n        }\r\n        return this._client;\r\n    };\r\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\r\n        var _this = this;\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        var _client;\r\n        return this._getClient().then(function (client) {\r\n            _client = client;\r\n        }).then(function (_) {\r\n            return _this._worker.withSyncedResources(resources);\r\n        }).then(function (_) { return _client; });\r\n    };\r\n    return WorkerManager;\r\n}());\r\nexport { WorkerManager };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar Uri = monaco.Uri;\r\nvar Promise = monaco.Promise;\r\n//#region utils copied from typescript to prevent loading the entire typescriptServices ---\r\nvar IndentStyle;\r\n(function (IndentStyle) {\r\n    IndentStyle[IndentStyle[\"None\"] = 0] = \"None\";\r\n    IndentStyle[IndentStyle[\"Block\"] = 1] = \"Block\";\r\n    IndentStyle[IndentStyle[\"Smart\"] = 2] = \"Smart\";\r\n})(IndentStyle || (IndentStyle = {}));\r\nfunction flattenDiagnosticMessageText(messageText, newLine) {\r\n    if (typeof messageText === \"string\") {\r\n        return messageText;\r\n    }\r\n    else {\r\n        var diagnosticChain = messageText;\r\n        var result = \"\";\r\n        var indent = 0;\r\n        while (diagnosticChain) {\r\n            if (indent) {\r\n                result += newLine;\r\n                for (var i = 0; i < indent; i++) {\r\n                    result += \"  \";\r\n                }\r\n            }\r\n            result += diagnosticChain.messageText;\r\n            indent++;\r\n            diagnosticChain = diagnosticChain.next;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nfunction displayPartsToString(displayParts) {\r\n    if (displayParts) {\r\n        return displayParts.map(function (displayPart) { return displayPart.text; }).join(\"\");\r\n    }\r\n    return \"\";\r\n}\r\n//#endregion\r\nvar Adapter = /** @class */ (function () {\r\n    function Adapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    Adapter.prototype._positionToOffset = function (uri, position) {\r\n        var model = monaco.editor.getModel(uri);\r\n        return model.getOffsetAt(position);\r\n    };\r\n    Adapter.prototype._offsetToPosition = function (uri, offset) {\r\n        var model = monaco.editor.getModel(uri);\r\n        return model.getPositionAt(offset);\r\n    };\r\n    Adapter.prototype._textSpanToRange = function (uri, span) {\r\n        var p1 = this._offsetToPosition(uri, span.start);\r\n        var p2 = this._offsetToPosition(uri, span.start + span.length);\r\n        var startLineNumber = p1.lineNumber, startColumn = p1.column;\r\n        var endLineNumber = p2.lineNumber, endColumn = p2.column;\r\n        return { startLineNumber: startLineNumber, startColumn: startColumn, endLineNumber: endLineNumber, endColumn: endColumn };\r\n    };\r\n    return Adapter;\r\n}());\r\nexport { Adapter };\r\n// --- diagnostics --- ---\r\nvar DiagnostcsAdapter = /** @class */ (function (_super) {\r\n    __extends(DiagnostcsAdapter, _super);\r\n    function DiagnostcsAdapter(_defaults, _selector, worker) {\r\n        var _this = _super.call(this, worker) || this;\r\n        _this._defaults = _defaults;\r\n        _this._selector = _selector;\r\n        _this._disposables = [];\r\n        _this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            if (model.getModeId() !== _selector) {\r\n                return;\r\n            }\r\n            var handle;\r\n            var changeSubscription = model.onDidChangeContent(function () {\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () { return _this._doValidate(model.uri); }, 500);\r\n            });\r\n            _this._listener[model.uri.toString()] = {\r\n                dispose: function () {\r\n                    changeSubscription.dispose();\r\n                    clearTimeout(handle);\r\n                }\r\n            };\r\n            _this._doValidate(model.uri);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            monaco.editor.setModelMarkers(model, _this._selector, []);\r\n            var key = model.uri.toString();\r\n            if (_this._listener[key]) {\r\n                _this._listener[key].dispose();\r\n                delete _this._listener[key];\r\n            }\r\n        };\r\n        _this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\r\n        _this._disposables.push(monaco.editor.onWillDisposeModel(onModelRemoved));\r\n        _this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n        }));\r\n        _this._disposables.push({\r\n            dispose: function () {\r\n                for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\r\n                    var model = _a[_i];\r\n                    onModelRemoved(model);\r\n                }\r\n            }\r\n        });\r\n        _this._disposables.push(_this._defaults.onDidChange(function () {\r\n            // redo diagnostics when options change\r\n            for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\r\n                var model = _a[_i];\r\n                onModelRemoved(model);\r\n                onModelAdd(model);\r\n            }\r\n        }));\r\n        monaco.editor.getModels().forEach(onModelAdd);\r\n        return _this;\r\n    }\r\n    DiagnostcsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnostcsAdapter.prototype._doValidate = function (resource) {\r\n        var _this = this;\r\n        this._worker(resource).then(function (worker) {\r\n            if (!monaco.editor.getModel(resource)) {\r\n                // model was disposed in the meantime\r\n                return null;\r\n            }\r\n            var promises = [];\r\n            var _a = _this._defaults.getDiagnosticsOptions(), noSyntaxValidation = _a.noSyntaxValidation, noSemanticValidation = _a.noSemanticValidation;\r\n            if (!noSyntaxValidation) {\r\n                promises.push(worker.getSyntacticDiagnostics(resource.toString()));\r\n            }\r\n            if (!noSemanticValidation) {\r\n                promises.push(worker.getSemanticDiagnostics(resource.toString()));\r\n            }\r\n            return Promise.join(promises);\r\n        }).then(function (diagnostics) {\r\n            if (!diagnostics || !monaco.editor.getModel(resource)) {\r\n                // model was disposed in the meantime\r\n                return null;\r\n            }\r\n            var markers = diagnostics\r\n                .reduce(function (p, c) { return c.concat(p); }, [])\r\n                .map(function (d) { return _this._convertDiagnostics(resource, d); });\r\n            monaco.editor.setModelMarkers(monaco.editor.getModel(resource), _this._selector, markers);\r\n        }).then(undefined, function (err) {\r\n            console.error(err);\r\n        });\r\n    };\r\n    DiagnostcsAdapter.prototype._convertDiagnostics = function (resource, diag) {\r\n        var _a = this._offsetToPosition(resource, diag.start), startLineNumber = _a.lineNumber, startColumn = _a.column;\r\n        var _b = this._offsetToPosition(resource, diag.start + diag.length), endLineNumber = _b.lineNumber, endColumn = _b.column;\r\n        return {\r\n            severity: monaco.MarkerSeverity.Error,\r\n            startLineNumber: startLineNumber,\r\n            startColumn: startColumn,\r\n            endLineNumber: endLineNumber,\r\n            endColumn: endColumn,\r\n            message: flattenDiagnosticMessageText(diag.messageText, '\\n')\r\n        };\r\n    };\r\n    return DiagnostcsAdapter;\r\n}(Adapter));\r\nexport { DiagnostcsAdapter };\r\nvar SuggestAdapter = /** @class */ (function (_super) {\r\n    __extends(SuggestAdapter, _super);\r\n    function SuggestAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(SuggestAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return ['.'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SuggestAdapter.prototype.provideCompletionItems = function (model, position, _context, token) {\r\n        var wordInfo = model.getWordUntilPosition(position);\r\n        var resource = model.uri;\r\n        var offset = this._positionToOffset(resource, position);\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getCompletionsAtPosition(resource.toString(), offset);\r\n        }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var suggestions = info.entries.map(function (entry) {\r\n                return {\r\n                    uri: resource,\r\n                    position: position,\r\n                    label: entry.name,\r\n                    insertText: entry.name,\r\n                    sortText: entry.sortText,\r\n                    kind: SuggestAdapter.convertKind(entry.kind)\r\n                };\r\n            });\r\n            return {\r\n                suggestions: suggestions\r\n            };\r\n        });\r\n    };\r\n    SuggestAdapter.prototype.resolveCompletionItem = function (_model, _position, item, token) {\r\n        var _this = this;\r\n        var myItem = item;\r\n        var resource = myItem.uri;\r\n        var position = myItem.position;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getCompletionEntryDetails(resource.toString(), _this._positionToOffset(resource, position), myItem.label);\r\n        }).then(function (details) {\r\n            if (!details) {\r\n                return myItem;\r\n            }\r\n            return {\r\n                uri: resource,\r\n                position: position,\r\n                label: details.name,\r\n                kind: SuggestAdapter.convertKind(details.kind),\r\n                detail: displayPartsToString(details.displayParts),\r\n                documentation: {\r\n                    value: displayPartsToString(details.documentation)\r\n                }\r\n            };\r\n        });\r\n    };\r\n    SuggestAdapter.convertKind = function (kind) {\r\n        switch (kind) {\r\n            case Kind.primitiveType:\r\n            case Kind.keyword:\r\n                return monaco.languages.CompletionItemKind.Keyword;\r\n            case Kind.variable:\r\n            case Kind.localVariable:\r\n                return monaco.languages.CompletionItemKind.Variable;\r\n            case Kind.memberVariable:\r\n            case Kind.memberGetAccessor:\r\n            case Kind.memberSetAccessor:\r\n                return monaco.languages.CompletionItemKind.Field;\r\n            case Kind.function:\r\n            case Kind.memberFunction:\r\n            case Kind.constructSignature:\r\n            case Kind.callSignature:\r\n            case Kind.indexSignature:\r\n                return monaco.languages.CompletionItemKind.Function;\r\n            case Kind.enum:\r\n                return monaco.languages.CompletionItemKind.Enum;\r\n            case Kind.module:\r\n                return monaco.languages.CompletionItemKind.Module;\r\n            case Kind.class:\r\n                return monaco.languages.CompletionItemKind.Class;\r\n            case Kind.interface:\r\n                return monaco.languages.CompletionItemKind.Interface;\r\n            case Kind.warning:\r\n                return monaco.languages.CompletionItemKind.File;\r\n        }\r\n        return monaco.languages.CompletionItemKind.Property;\r\n    };\r\n    return SuggestAdapter;\r\n}(Adapter));\r\nexport { SuggestAdapter };\r\nvar SignatureHelpAdapter = /** @class */ (function (_super) {\r\n    __extends(SignatureHelpAdapter, _super);\r\n    function SignatureHelpAdapter() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.signatureHelpTriggerCharacters = ['(', ','];\r\n        return _this;\r\n    }\r\n    SignatureHelpAdapter.prototype.provideSignatureHelp = function (model, position, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getSignatureHelpItems(resource.toString(), _this._positionToOffset(resource, position)); }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var ret = {\r\n                activeSignature: info.selectedItemIndex,\r\n                activeParameter: info.argumentIndex,\r\n                signatures: []\r\n            };\r\n            info.items.forEach(function (item) {\r\n                var signature = {\r\n                    label: '',\r\n                    documentation: null,\r\n                    parameters: []\r\n                };\r\n                signature.label += displayPartsToString(item.prefixDisplayParts);\r\n                item.parameters.forEach(function (p, i, a) {\r\n                    var label = displayPartsToString(p.displayParts);\r\n                    var parameter = {\r\n                        label: label,\r\n                        documentation: displayPartsToString(p.documentation)\r\n                    };\r\n                    signature.label += label;\r\n                    signature.parameters.push(parameter);\r\n                    if (i < a.length - 1) {\r\n                        signature.label += displayPartsToString(item.separatorDisplayParts);\r\n                    }\r\n                });\r\n                signature.label += displayPartsToString(item.suffixDisplayParts);\r\n                ret.signatures.push(signature);\r\n            });\r\n            return ret;\r\n        });\r\n    };\r\n    return SignatureHelpAdapter;\r\n}(Adapter));\r\nexport { SignatureHelpAdapter };\r\n// --- hover ------\r\nvar QuickInfoAdapter = /** @class */ (function (_super) {\r\n    __extends(QuickInfoAdapter, _super);\r\n    function QuickInfoAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    QuickInfoAdapter.prototype.provideHover = function (model, position, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getQuickInfoAtPosition(resource.toString(), _this._positionToOffset(resource, position));\r\n        }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var documentation = displayPartsToString(info.documentation);\r\n            var tags = info.tags ? info.tags.map(function (tag) {\r\n                var label = \"*@\" + tag.name + \"*\";\r\n                if (!tag.text) {\r\n                    return label;\r\n                }\r\n                return label + (tag.text.match(/\\r\\n|\\n/g) ? ' \\n' + tag.text : \" - \" + tag.text);\r\n            })\r\n                .join('  \\n\\n') : '';\r\n            var contents = displayPartsToString(info.displayParts);\r\n            return {\r\n                range: _this._textSpanToRange(resource, info.textSpan),\r\n                contents: [{\r\n                        value: '```js\\n' + contents + '\\n```\\n'\r\n                    }, {\r\n                        value: documentation + (tags ? '\\n\\n' + tags : '')\r\n                    }]\r\n            };\r\n        });\r\n    };\r\n    return QuickInfoAdapter;\r\n}(Adapter));\r\nexport { QuickInfoAdapter };\r\n// --- occurrences ------\r\nvar OccurrencesAdapter = /** @class */ (function (_super) {\r\n    __extends(OccurrencesAdapter, _super);\r\n    function OccurrencesAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OccurrencesAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getOccurrencesAtPosition(resource.toString(), _this._positionToOffset(resource, position));\r\n        }).then(function (entries) {\r\n            if (!entries) {\r\n                return;\r\n            }\r\n            return entries.map(function (entry) {\r\n                return {\r\n                    range: _this._textSpanToRange(resource, entry.textSpan),\r\n                    kind: entry.isWriteAccess ? monaco.languages.DocumentHighlightKind.Write : monaco.languages.DocumentHighlightKind.Text\r\n                };\r\n            });\r\n        });\r\n    };\r\n    return OccurrencesAdapter;\r\n}(Adapter));\r\nexport { OccurrencesAdapter };\r\n// --- definition ------\r\nvar DefinitionAdapter = /** @class */ (function (_super) {\r\n    __extends(DefinitionAdapter, _super);\r\n    function DefinitionAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getDefinitionAtPosition(resource.toString(), _this._positionToOffset(resource, position));\r\n        }).then(function (entries) {\r\n            if (!entries) {\r\n                return;\r\n            }\r\n            var result = [];\r\n            for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\r\n                var entry = entries_1[_i];\r\n                var uri = Uri.parse(entry.fileName);\r\n                if (monaco.editor.getModel(uri)) {\r\n                    result.push({\r\n                        uri: uri,\r\n                        range: _this._textSpanToRange(uri, entry.textSpan)\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        });\r\n    };\r\n    return DefinitionAdapter;\r\n}(Adapter));\r\nexport { DefinitionAdapter };\r\n// --- references ------\r\nvar ReferenceAdapter = /** @class */ (function (_super) {\r\n    __extends(ReferenceAdapter, _super);\r\n    function ReferenceAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getReferencesAtPosition(resource.toString(), _this._positionToOffset(resource, position));\r\n        }).then(function (entries) {\r\n            if (!entries) {\r\n                return;\r\n            }\r\n            var result = [];\r\n            for (var _i = 0, entries_2 = entries; _i < entries_2.length; _i++) {\r\n                var entry = entries_2[_i];\r\n                var uri = Uri.parse(entry.fileName);\r\n                if (monaco.editor.getModel(uri)) {\r\n                    result.push({\r\n                        uri: uri,\r\n                        range: _this._textSpanToRange(uri, entry.textSpan)\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        });\r\n    };\r\n    return ReferenceAdapter;\r\n}(Adapter));\r\nexport { ReferenceAdapter };\r\n// --- outline ------\r\nvar OutlineAdapter = /** @class */ (function (_super) {\r\n    __extends(OutlineAdapter, _super);\r\n    function OutlineAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OutlineAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getNavigationBarItems(resource.toString()); }).then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            var convert = function (bucket, item, containerLabel) {\r\n                var result = {\r\n                    name: item.text,\r\n                    detail: '',\r\n                    kind: (outlineTypeTable[item.kind] || monaco.languages.SymbolKind.Variable),\r\n                    range: _this._textSpanToRange(resource, item.spans[0]),\r\n                    selectionRange: _this._textSpanToRange(resource, item.spans[0]),\r\n                    containerName: containerLabel\r\n                };\r\n                if (item.childItems && item.childItems.length > 0) {\r\n                    for (var _i = 0, _a = item.childItems; _i < _a.length; _i++) {\r\n                        var child = _a[_i];\r\n                        convert(bucket, child, result.name);\r\n                    }\r\n                }\r\n                bucket.push(result);\r\n            };\r\n            var result = [];\r\n            items.forEach(function (item) { return convert(result, item); });\r\n            return result;\r\n        });\r\n    };\r\n    return OutlineAdapter;\r\n}(Adapter));\r\nexport { OutlineAdapter };\r\nvar Kind = /** @class */ (function () {\r\n    function Kind() {\r\n    }\r\n    Kind.unknown = '';\r\n    Kind.keyword = 'keyword';\r\n    Kind.script = 'script';\r\n    Kind.module = 'module';\r\n    Kind.class = 'class';\r\n    Kind.interface = 'interface';\r\n    Kind.type = 'type';\r\n    Kind.enum = 'enum';\r\n    Kind.variable = 'var';\r\n    Kind.localVariable = 'local var';\r\n    Kind.function = 'function';\r\n    Kind.localFunction = 'local function';\r\n    Kind.memberFunction = 'method';\r\n    Kind.memberGetAccessor = 'getter';\r\n    Kind.memberSetAccessor = 'setter';\r\n    Kind.memberVariable = 'property';\r\n    Kind.constructorImplementation = 'constructor';\r\n    Kind.callSignature = 'call';\r\n    Kind.indexSignature = 'index';\r\n    Kind.constructSignature = 'construct';\r\n    Kind.parameter = 'parameter';\r\n    Kind.typeParameter = 'type parameter';\r\n    Kind.primitiveType = 'primitive type';\r\n    Kind.label = 'label';\r\n    Kind.alias = 'alias';\r\n    Kind.const = 'const';\r\n    Kind.let = 'let';\r\n    Kind.warning = 'warning';\r\n    return Kind;\r\n}());\r\nexport { Kind };\r\nvar outlineTypeTable = Object.create(null);\r\noutlineTypeTable[Kind.module] = monaco.languages.SymbolKind.Module;\r\noutlineTypeTable[Kind.class] = monaco.languages.SymbolKind.Class;\r\noutlineTypeTable[Kind.enum] = monaco.languages.SymbolKind.Enum;\r\noutlineTypeTable[Kind.interface] = monaco.languages.SymbolKind.Interface;\r\noutlineTypeTable[Kind.memberFunction] = monaco.languages.SymbolKind.Method;\r\noutlineTypeTable[Kind.memberVariable] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberGetAccessor] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberSetAccessor] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.const] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.localVariable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.function] = monaco.languages.SymbolKind.Function;\r\noutlineTypeTable[Kind.localFunction] = monaco.languages.SymbolKind.Function;\r\n// --- formatting ----\r\nvar FormatHelper = /** @class */ (function (_super) {\r\n    __extends(FormatHelper, _super);\r\n    function FormatHelper() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatHelper._convertOptions = function (options) {\r\n        return {\r\n            ConvertTabsToSpaces: options.insertSpaces,\r\n            TabSize: options.tabSize,\r\n            IndentSize: options.tabSize,\r\n            IndentStyle: IndentStyle.Smart,\r\n            NewLineCharacter: '\\n',\r\n            InsertSpaceAfterCommaDelimiter: true,\r\n            InsertSpaceAfterSemicolonInForStatements: true,\r\n            InsertSpaceBeforeAndAfterBinaryOperators: true,\r\n            InsertSpaceAfterKeywordsInControlFlowStatements: true,\r\n            InsertSpaceAfterFunctionKeywordForAnonymousFunctions: true,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: false,\r\n            PlaceOpenBraceOnNewLineForControlBlocks: false,\r\n            PlaceOpenBraceOnNewLineForFunctions: false\r\n        };\r\n    };\r\n    FormatHelper.prototype._convertTextChanges = function (uri, change) {\r\n        return {\r\n            text: change.newText,\r\n            range: this._textSpanToRange(uri, change.span)\r\n        };\r\n    };\r\n    return FormatHelper;\r\n}(Adapter));\r\nexport { FormatHelper };\r\nvar FormatAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatAdapter, _super);\r\n    function FormatAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatAdapter.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getFormattingEditsForRange(resource.toString(), _this._positionToOffset(resource, { lineNumber: range.startLineNumber, column: range.startColumn }), _this._positionToOffset(resource, { lineNumber: range.endLineNumber, column: range.endColumn }), FormatHelper._convertOptions(options));\r\n        }).then(function (edits) {\r\n            if (edits) {\r\n                return edits.map(function (edit) { return _this._convertTextChanges(resource, edit); });\r\n            }\r\n        });\r\n    };\r\n    return FormatAdapter;\r\n}(FormatHelper));\r\nexport { FormatAdapter };\r\nvar FormatOnTypeAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatOnTypeAdapter, _super);\r\n    function FormatOnTypeAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(FormatOnTypeAdapter.prototype, \"autoFormatTriggerCharacters\", {\r\n        get: function () {\r\n            return [';', '}', '\\n'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FormatOnTypeAdapter.prototype.provideOnTypeFormattingEdits = function (model, position, ch, options, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getFormattingEditsAfterKeystroke(resource.toString(), _this._positionToOffset(resource, position), ch, FormatHelper._convertOptions(options));\r\n        }).then(function (edits) {\r\n            if (edits) {\r\n                return edits.map(function (edit) { return _this._convertTextChanges(resource, edit); });\r\n            }\r\n        });\r\n    };\r\n    return FormatOnTypeAdapter;\r\n}(FormatHelper));\r\nexport { FormatOnTypeAdapter };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { WorkerManager } from './workerManager.js';\r\nimport * as languageFeatures from './languageFeatures.js';\r\nvar javaScriptWorker;\r\nvar typeScriptWorker;\r\nexport function setupTypeScript(defaults) {\r\n    typeScriptWorker = setupMode(defaults, 'typescript');\r\n}\r\nexport function setupJavaScript(defaults) {\r\n    javaScriptWorker = setupMode(defaults, 'javascript');\r\n}\r\nexport function getJavaScriptWorker() {\r\n    return new monaco.Promise(function (resolve, reject) {\r\n        if (!javaScriptWorker) {\r\n            return reject(\"JavaScript not registered!\");\r\n        }\r\n        resolve(javaScriptWorker);\r\n    });\r\n}\r\nexport function getTypeScriptWorker() {\r\n    return new monaco.Promise(function (resolve, reject) {\r\n        if (!typeScriptWorker) {\r\n            return reject(\"TypeScript not registered!\");\r\n        }\r\n        resolve(typeScriptWorker);\r\n    });\r\n}\r\nfunction setupMode(defaults, modeId) {\r\n    var client = new WorkerManager(modeId, defaults);\r\n    var worker = function (first) {\r\n        var more = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            more[_i - 1] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, [first].concat(more));\r\n    };\r\n    monaco.languages.registerCompletionItemProvider(modeId, new languageFeatures.SuggestAdapter(worker));\r\n    monaco.languages.registerSignatureHelpProvider(modeId, new languageFeatures.SignatureHelpAdapter(worker));\r\n    monaco.languages.registerHoverProvider(modeId, new languageFeatures.QuickInfoAdapter(worker));\r\n    monaco.languages.registerDocumentHighlightProvider(modeId, new languageFeatures.OccurrencesAdapter(worker));\r\n    monaco.languages.registerDefinitionProvider(modeId, new languageFeatures.DefinitionAdapter(worker));\r\n    monaco.languages.registerReferenceProvider(modeId, new languageFeatures.ReferenceAdapter(worker));\r\n    monaco.languages.registerDocumentSymbolProvider(modeId, new languageFeatures.OutlineAdapter(worker));\r\n    monaco.languages.registerDocumentRangeFormattingEditProvider(modeId, new languageFeatures.FormatAdapter(worker));\r\n    monaco.languages.registerOnTypeFormattingEditProvider(modeId, new languageFeatures.FormatOnTypeAdapter(worker));\r\n    new languageFeatures.DiagnostcsAdapter(defaults, modeId, worker);\r\n    return worker;\r\n}\r\n"]}